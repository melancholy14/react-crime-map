{"version":3,"sources":["assets/iu.gif","assets/boa.gif","containers/SearchPage/actions.js","utils/contants.js","containers/MapPage/actions.js","components/modal.js","components/table.js","components/loading.js","components/select.js","components/button.js","components/checkbox.js","containers/SearchPage/page.js","containers/AnalysePage/actions.js","containers/MapPage/page.js","containers/AnalysePage/news.js","containers/AnalysePage/graphs.js","containers/AnalysePage/page.js","containers/App.js","containers/SearchPage/reducer.js","containers/MapPage/reducer.js","containers/AnalysePage/reducer.js","containers/reducers.js","utils/request.js","containers/SearchPage/saga.js","containers/AnalysePage/saga.js","containers/sagas.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","LOAD_AVAILABILITY_SUCCESS","LOAD_AVAILABILITY_FAILURE","LOAD_CRIME_CATEGORY_REQUEST","LOAD_CRIME_CATEGORY_SUCCESS","LOAD_CRIME_CATEGORY_FAILURE","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAILURE","searchSuccess","data","dateLength","arguments","length","undefined","type","searchFailure","message","categoryColors","all-crime","anti-social-behaviour","bicycle-theft","burglary","criminal-damage-arson","drugs","other-theft","possession-of-weapons","public-order","robbery","shoplifting","theft-from-the-person","vehicle-crime","violent-crime","other-crime","SAVE_LOCATION","FILTER_CRIME_CIRCLES","filterCrimeCircles","crimes","categories","values","Object","reduce","acc","ele","category","_ele$location","location","latitude","longitude","_ele$location$street","street","find","cat","id","objectSpread","defineProperty","count","fillColor","latlng","parseFloat","max","Math","apply","toConsumableArray","map","opacity","radius","ModalDiv","styled","div","_templateObject","Modal","_ref","title","show","onClose","children","react_default","a","createElement","className","concat","onClick","TableDiv","table_templateObject","Th","Td","_ref2","Tr","_ref3","Table","_ref4","LoadingDiv","loading_templateObject","Loading","loading","modal","src","round","random","boa","iu","alt","DefaultSelect","select","select_templateObject","Select","value","options","onChange","val","_ref2$text","text","key","DefaultButton","button","button_templateObject","Button","Checkbox","checked","SearchContainer","page_templateObject","allCrime","url","name","Search","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","changeDate","evt","target","minmax","state","sort","b","localeCompare","date","setState","changeCategory","crimeCheckboxes","selectedCategory","checkCategory","list","onFilterCrimeCategory","search","preventDefault","_this$state","dates","params","onSearch","toggleModal","showError","min","prevProps","prevAvailability","availability","prevCategory","prevMessage","_this$props","JSON","stringify","_this2","_this$state2","_this$state2$date","_this$state2$date$dat","_this$props2","_this$props2$category","htmlFor","components_select","components_checkbox","style","backgroundColor","components_button","components_loading","React","PureComponent","defaultProps","onSelectCrimeCategory","connect","_state$search","_state$search$categor","dispatch","param","LOAD_GRAPHS_REQUEST","LOAD_GRAPHS_SUCCESS","LOAD_GRAPHS_FAILURE","LOAD_NEWS_REQUEST","LOAD_NEWS_SUCCESS","LOAD_NEWS_FAILURE","LeafletMap","handleClick","onSaveLocation","handleLocationFound","hasLocation","handleCircle","onLoadGraphRequest","onLoadNewsRequest","leafletElement","locate","prevLatlng","circles","_this$state$latlng","Map","center","ref","zoom","onLocationfound","TileLayer","attribution","Marker","position","lat","lng","Popup","_ref$opacity","Circle","fillOpacity","stroke","loadGraphsRequest","loadNewsRequest","News","news","sectionName","pillarName","webTitle","webUrl","webPublicationDate","table_Table","table_Tr","table_Th","table_Td","Date","toLocaleDateString","href","Graphs","outcome","width","window","innerWidth","LineChart","height","XAxis","dataKey","YAxis","yAxisId","Tooltip","CartesianGrid","Line","BarChart","Bar","fill","AnalyseContainer","AnalysePage_page_templateObject","AnalysePage","dateGraph","categoryGraph","outcomeGraph","graphs","AnalysePage_news","analyse","AppDiv","App_templateObject","App","page","MapPage_page","AnalysePage_page","Component","initialState","crimeTable","combineReducers","action","update","$set","$merge","api","police","guardian","mapquest","keys","checkStatus","_callee","response","error","body","regenerator_default","wrap","_context","prev","next","status","abrupt","Error","json","sent","statusText","t0","stop","parseJSON","request","path","axios","get","then","loadAvailability","loadCrimeCategory","saga","put","console","log","_marked","_date","_args2","_context2","_marked2","_ref2$data","responses","_args3","_context3","all","_marked3","_context4","fork","takeLatest","_marked4","loadGraph","loadNews","streetId","selectedCrimes","filter","_ref2$location","_ref2$location$street","entries","month","slicedToArray","_ref5","_ref6","outcome_status","_ele$outcomes","outcomes","_ref7","_ref8","saga_marked","_ref9","addressUrl","_ref10","_ref10$data","_ref10$data$results","_address$0$locations","_locations$","adminArea5","postalCode","query","newsUrl","_ref11","_ref11$data","_ref11$data$response$","results","join","locations","saga_marked2","saga_marked3","sagas","searchSaga","analyseSaga","sagas_marked","Boolean","hostname","match","createSagaMiddleware","store","createStore","reducers","composeWithDevTools","applyMiddleware","run","ReactDOM","render","es","containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.58fbae89.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/iu.be3a3a56.gif\";","module.exports = __webpack_public_path__ + \"static/media/boa.3096abdc.gif\";","// @flow\n\nexport const LOAD_AVAILABILITY_SUCCESS = 'containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS';\nexport const LOAD_AVAILABILITY_FAILURE = 'containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE';\n\nexport const LOAD_CRIME_CATEGORY_REQUEST = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST';\nexport const LOAD_CRIME_CATEGORY_SUCCESS = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS';\nexport const LOAD_CRIME_CATEGORY_FAILURE = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE';\n\nexport const SEARCH_REQUEST = 'containers/SearchPage/actions/SEARCH_REQUEST';\nexport const SEARCH_SUCCESS = 'containers/SearchPage/actions/SEARCH_SUCCESS';\nexport const SEARCH_FAILURE = 'containers/SearchPage/actions/SEARCH_FAILURE';\n\nexport function loadAvailabilitySuccess (data: Array<mixed>) {\n  return {\n    type: LOAD_AVAILABILITY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadAvailabilityFailure (message: string) {\n  return {\n    type: LOAD_AVAILABILITY_FAILURE,\n    message,\n  }\n}\n\nexport function loadCrimeCategoryRequest (date: string) {\n  return {\n    type: LOAD_CRIME_CATEGORY_REQUEST,\n    date,\n  }\n}\n\nexport function loadCrimeCategorySuccess (data: Array<mixed>) {\n  return {\n    type: LOAD_CRIME_CATEGORY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadCrimeCategoryFailure (message: string) {\n  return {\n    type: LOAD_CRIME_CATEGORY_FAILURE,\n    message,\n  }\n}\n\nexport function searchRequest (data: { url: string, dates: Array<string> }) {\n  return {\n    type: SEARCH_REQUEST,\n    data,\n  }\n}\n\nexport function searchSuccess (data: Array<mixed>, dateLength: number = 1) {\n  return {\n    type: SEARCH_SUCCESS,\n    data,\n    dateLength,\n  }\n}\n\nexport function searchFailure (message: string) {\n  return {\n    type: SEARCH_FAILURE,\n    message,\n  }\n}","export const outcomes = [\n  { code: \"awaiting-court-result\", name: \"Awaiting court outcome\" },\n  { code: \"court-result-unavailable\", name: \"Court result unavailable\" },\n  { code: \"unable-to-proceed\", name: \"Court case unable to proceed\" },\n  { code: \"local-resolution\", name: \"Local resolution\" },\n  { code: \"no-further-action\", name: \"Investigation complete; no suspect identified\" },\n  { code: \"deprived-of-property\", name: \"Offender deprived of property\" },\n  { code: \"fined\", name: \"Offender fined\" },\n  { code: \"absolute-discharge\", name: \"Offender given absolute discharge\" },\n  { code: \"cautioned\", name: \"Offender given a caution\" },\n  { code: \"drugs-possession-warning\", name: \"Offender given a drugs possession warning\" },\n  { code: \"penalty-notice-issued\", name: \"Offender given a penalty notice\" },\n  { code: \"community-penalty\", name: \"Offender given community sentence\" },\n  { code: \"conditional-discharge\", name: \"Offender given conditional discharge\" },\n  { code: \"suspended-sentence\", name: \"Offender given suspended prison sentence\" },\n  { code: \"imprisoned\", name: \"Offender sent to prison\" },\n  { code: \"other-court-disposal\", name: \"Offender otherwise dealt with\" },\n  { code: \"compensation\", name: \"Offender ordered to pay compensation\" },\n  { code: \"sentenced-in-another-case\", name: \"Suspect charged as part of another case\" },\n  { code: \"charged\", name: \"Suspect charged\" },\n  { code: \"not-guilty\", name: \"Defendant found not guilty\" },\n  { code: \"sent-to-crown-court\", name: \"Defendant sent to Crown Court\" },\n  { code: \"unable-to-prosecute\", name: \"Unable to prosecute suspect\" },\n  { code: \"formal-action-not-in-public-interest\", name: \"Formal action is not in the public interest\" },\n  { code: \"action-taken-by-another-organisation\", name: \"Action to be taken by another organisation\" },\n  { code: \"further-investigation-not-in-public-interest\", name: \"Further investigation is not in the public interest\" },\n  { code: \"under-investigation\", name: \"Under investigation\" },\n  { code: \"status-update-unavailable\", name: \"Status update unavailable\" },\n];\n\nexport const categoryColors = {\n  \"all-crime\": \"#d17f68\",\n  \"anti-social-behaviour\": \"#73b638\",\n  \"bicycle-theft\": \"#a45dcf\",\n  \"burglary\": \"#5fbc6e\",\n  \"criminal-damage-arson\": \"#c0489a\",\n  \"drugs\": \"#4b7d3c\",\n  \"other-theft\": \"#666dc6\",\n  \"possession-of-weapons\": \"#d99938\",\n  \"public-order\": \"#5e99d2\",\n  \"robbery\": \"#cc4f32\",\n  \"shoplifting\": \"#49b9a9\",\n  \"theft-from-the-person\": \"#c7496a\",\n  \"vehicle-crime\": \"#adac4d\",\n  \"violent-crime\": \"#c581bb\",\n  \"other-crime\": \"#8b6c2f\",\n};","import {\n  categoryColors,\n} from '../../utils/contants';\n\nexport const SAVE_LOCATION = 'containers/MapPage/actions/SAVE_LOCATION';\n\nexport const FILTER_CRIME_CIRCLES = 'containers/MapPage/actions/FILTER_CRIME_CIRCLES';\n\nexport function saveLocation (data) {\n  return {\n    type: SAVE_LOCATION,\n    data,\n  }\n}\n\nexport function filterCrimeCircles (crimes = [], categories = []) {\n  const values = Object.values(crimes.reduce((acc, ele) => {\n    const {\n      category,\n      location: {\n        latitude,\n        longitude,\n        street = {},\n      } = {},\n    } = ele;\n\n    if (categories.length === 0 || categories.find((cat) => cat === category)){\n      if (!acc[street.id]) {\n        return {\n          ...acc,\n          [street.id]: {\n            category,\n            fillColor: categoryColors[category],\n            street,\n            count: 1,\n            latlng: [parseFloat(latitude), parseFloat(longitude)],\n          },\n        };\n      } else {\n        return {\n          ...acc,\n          [street.id]: {\n            ...acc[street.id],\n            count: acc[street.id].count + 1,\n          },\n        };\n      }\n    }\n    return acc;\n  }, {}));\n\n  const max = Math.max(...values.map((ele) => ele.count));\n\n  const data = values.map((ele) => ({\n    ...ele,\n    opacity: ((ele.count - (ele.count%100))/100 > 0) ? 1 : (((ele.count - (ele.count%10))/10 > 0) ? 0.75 : 0.5),\n    radius: (25 / max) * ele.count,\n  }));\n\n  return {\n    type: FILTER_CRIME_CIRCLES,\n    data,\n  }\n}","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst ModalDiv = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  .modal-title {\n    position: fixed;\n    top: 7rem;\n    width: 100%;\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n\n    .title {\n      display: inline-block;\n      width: calc(100% - 2rem);\n    }\n\n    .close {\n      display: inline-block;\n      width: 2rem;\n      font-size: large;\n      font-weight: bold;    \n      border: 0;\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    width: 100%;\n    min-height: 10rem;\n    // height: calc(50% - 6rem);\n    overflow: auto;\n    top: 10rem;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  // .modal-footer {\n  //   position: fixed;\n  //   top: calc(50% - 6rem + 10rem);\n  //   height: 3rem;\n  //   background-color: white;\n  //   width: 100%;\n  //   line-height: 3rem;\n  //   vertical-align: middle;\n  //   text-align: center;\n  //   border-top: 1px solid black;\n  //   box-sizing: border-box;\n\n  //   .close {\n  //     background-color: black;\n  //     color: white;\n  //     font-weight: bolder;\n  //     padding: 0.5rem 1rem;\n  //     border: 0;\n  //   }\n  // }\n`;\n\nconst Modal = ({ title, show, onClose, children }: {\n  title: string,\n  show: boolean,\n  onClose?: Function,\n  children: any,\n}) => (\n  <ModalDiv className={`display-${show ? 'block' : 'none'}`}>\n    <div className=\"modal-title\">\n      <div className=\"title\">{ title }</div>\n      <button className=\"close\" onClick={onClose}>X</button>\n    </div>\n    <div className=\"modal-main\">\n      { children }\n    </div>\n  </ModalDiv>\n);\n\nexport default Modal;","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst TableDiv = styled.div`\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  // border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n  }\n\n  .td {\n    display: table-cell;\n  }\n`;\n\nconst Th = ({ children }: { children: any }) => (<div className=\"th\">{ children }</div>);\n\nconst Td = ({ children }: { children: any }) => (<div className=\"td\">{ children }</div>);\n\nconst Tr = ({ children }: { children: Array<any> }) => (<div className=\"tr\">{ children }</div>);\n\nconst Table = ({ children }: { children: Array<typeof Tr> }) => (<TableDiv>{ children }</TableDiv>);\n\n\nexport {\n  Table,\n  Tr, Th, Td,\n};\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport Modal from './modal';\n\nimport iu from '../assets/iu.gif'\nimport boa from '../assets/boa.gif';\n\nconst LoadingDiv = styled.div` \n  img {\n    width: 100%;\n  }\n`;\n\nconst Loading = ({ loading }: { loading: boolean }) => (\n  <Modal\n    title=\"Loading...\"\n    show={loading}\n  >\n    <LoadingDiv>\n      <img src={Math.round(Math.random()) % 2 === 0 ? boa : iu} alt=\"loading...\" />\n    </LoadingDiv>\n  </Modal>\n);\n\nexport default Loading;","// @flow\n\nimport React from 'react';\n\nimport styled from 'styled-components';\n\nconst DefaultSelect = styled.select`\n  border: 1px solid lightgray;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  background-color: white;\n  font-family: inherit;\n`;\n\nconst Select = ({ id, value, options, onChange, className }: {\n  id: string | number,\n  value: any,\n  className: string,\n  options: Array<{ value: any, text?: string }>,\n  onChange: Function,\n}) => \n(<DefaultSelect id={id} onChange={onChange} value={value} className={className}>\n  {\n    options && options.map(({value: val, text = val}) => <option key={val} value={val}>{text}</option>)\n  }\n</DefaultSelect>);\n\nexport default Select;\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst DefaultButton = styled.button`\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.3rem 1rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n  font-family: inherit;\n`;\n\nconst Button = ({ onClick, className, children }: { onClick: Function, className: string, children: any }) => (\n  <DefaultButton onClick={onClick} className={className}>\n    { children }\n  </DefaultButton>\n);\n\nexport default Button;","// @flow\n\nimport React from 'react';\n\nconst Checkbox = ({ id, value, checked, className, onChange }: {\n  id: string,\n  value: any,\n  checked: boolean,\n  className: string,\n  onChange: Function,\n}) => (\n  <input\n    type=\"checkbox\"\n    id={id}\n    value={value}\n    onChange={onChange}\n    checked={checked}\n    className={className}\n  />\n);\n\nexport default Checkbox;","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { connect } from 'react-redux';\n\nimport {\n  searchRequest,\n} from './actions';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nimport {\n  categoryColors,\n} from '../../utils/contants';\n\nimport {\n  Modal,\n  Loading,\n  Select,\n  Button,\n  Checkbox,\n} from '../../components';\n\nconst SearchContainer = styled.div`\n    order: 1;\n    margin: 0.5rem;\n    padding: 0.5rem;\n\n    .grid-container {\n      display: grid;\n      grid-template-rows: 2rem 2rem auto 2rem;\n      grid-template-columns: 4.5rem auto;\n\n      .grid-item {\n        padding: 0.5rem;\n\n        &.select {\n          padding: 0.25rem 0.5rem;\n        }\n\n        &.whole-row {\n          grid-column-start: 1;\n          grid-column-end: 3;\n\n          .each-crime {\n            display: inline-block;\n            min-width: 50%;\n            font-size: small;\n            line-height: 1rem;\n            vertical-align: middle;\n\n            label {\n              font-size: smaller;\n              font-weight: bolder;\n            }\n\n            .color {\n              width: 0.75rem;\n              height: 0.75rem;\n              display: inline-block;\n              border-radius: 0.5rem;\n              margin: 0 0.3rem;\n            }\n          }\n        }\n      }\n\n      & > label {\n        font-size: smaller;\n        text-transform: capitalize;\n        font-weight: bold;\n      }\n    }\n\n    button {     \n      padding: 0.3rem 1rem;\n    }\n`;\n\nconst allCrime = {\n  url: 'all-crime',\n  name: 'All crime'\n};\n\ntype Props = {\n  availability: Array<{ date: string }>,\n  category: Array<{ url: string, name: string }>,\n  crimes: Array<mixed>,\n  message: string,\n  loading: boolean,\n  onSelectCrimeCategory: Function,\n  onFilterCrimeCategory: Function,\n  onSearch: Function,\n}\n\ntype State = {\n  date: {\n    min: string,\n    max: string,\n    dates: Array<{ value: string }>,\n  },\n  minmax: string[],\n  showError: boolean,\n  crimeCheckboxes: Array<{ url: string, name: string, checked: boolean }>,\n  selectedCategory: string,\n}\n\nclass Search extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    availability: [],\n    category: [],\n    crimes: [],\n    message: null,\n    loading: false,\n    onSelectCrimeCategory: () => {},\n    onFilterCrimeCategory: () => {},\n    onSearch: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      date: {\n        min: '',\n        max: '',\n        dates: [],\n      },\n      minmax: [],\n      crimeCheckboxes: [],\n      selectedCategory: '',\n      showError: false,\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      availability: prevAvailability,\n      category: prevCategory,\n      message: prevMessage,\n    } = prevProps;\n\n    const {\n      availability,\n      category,\n      message,\n    } = this.props;\n\n    if (JSON.stringify(prevAvailability) !== JSON.stringify(availability)){\n      const date = availability.reduce((acc, ele) => ({\n          min: (acc.min && acc.min < ele.date) ? acc.min : ele.date,\n          max: (acc.max && acc.max > ele.date) ? acc.max : ele.date,\n          dates: acc.dates ? [...acc.dates, { value: ele.date }] : [{ value: ele.date }],\n        }), {\n          ...this.state.date,\n        });\n\n      const minmax = [date.min, date.max];\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n\n    if (JSON.stringify(prevCategory) !== JSON.stringify(category)) {\n      const crimeCheckboxes = this.props.category.reduce((acc, ele) => {\n        if (ele.url !== allCrime.url) {\n          return [\n            ...acc,\n            {\n              ...ele,\n              checked: true,\n            }\n          ];\n        }\n        return acc;\n      }, []);\n\n      this.setState({\n        crimeCheckboxes,\n      });\n    }\n    \n    if (prevMessage !== message) {\n      this.setState({\n        showError: true,\n      });\n    }\n  }\n\n  changeDate = (type) => (evt) => {\n    const { value } = evt.target;\n\n    if(value) {\n      const minmax = [...this.state.minmax];\n      minmax[type === 'min' ? 0 : 1] = value;\n      // minmax.sort((a, b) => a > b);\n      minmax.sort((a, b) => a.localeCompare(b));\n\n      const date = {\n        ...this.state.date,\n        [type]: value,\n      };\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n  }\n\n  changeCategory = (evt) => {\n    let crimeCheckboxes = [];\n    if (evt.target.value === allCrime.url) {\n      crimeCheckboxes = this.state.crimeCheckboxes.map((ele) => {\n        return {\n          ...ele,\n          checked: true,\n        }\n      });\n    }\n\n    this.setState({\n      crimeCheckboxes,\n      selectedCategory: evt.target.value,\n    });\n  }\n\n  checkCategory = (url) => (evt) => {\n    const crimeCheckboxes = this.state.crimeCheckboxes.map((ele) => {\n      if (ele.url === url) {\n        return {\n          ...ele,\n          checked: evt.target.checked,\n        }\n      } \n      return ele;\n    });\n\n    this.setState({\n      crimeCheckboxes,\n    });\n\n    const list = crimeCheckboxes.reduce((acc, ele) => {\n      if(ele.checked) {\n        return [...acc, ele.url];\n      }\n      return acc;\n    }, []);\n\n    this.props.onFilterCrimeCategory(this.props.crimes, list);\n  }\n\n  search = (evt) => {\n    evt.preventDefault();\n\n    const {\n      minmax,\n      date,\n      selectedCategory,\n    } = this.state;\n\n    const dates = date.dates.reduce((acc, ele) => {\n      if (minmax[0] <= ele.value && ele.value <= minmax[1]) {\n        return [...acc, ele.value];\n      }\n      return acc;\n    }, []).sort((a, b) => a.localeCompare(b));\n\n    const params = {\n      url: selectedCategory || allCrime.url,\n      dates,\n    };\n\n    this.props.onSearch(params);\n  }\n\n  toggleModal = () => this.setState({ showError: !this.state.showError })\n\n  render() {\n    const {\n      date: {\n        min,\n        max,\n        dates = [],\n      } = {},\n      crimeCheckboxes,\n      showError,\n    } = this.state;\n\n    const {\n      category = [allCrime],\n      message,\n      loading,\n    } = this.props;\n\n    return (\n      <SearchContainer>\n        <form className=\"grid-container\">\n          <label htmlFor=\"select_date\" className=\"grid-item\">date</label>\n          <div className=\"grid-item select\">\n            <Select\n              onChange={this.changeDate('min')}\n              value={min}\n              options={dates}\n            />\n            <span> ~ </span>\n            <Select\n              onChange={this.changeDate('max')}\n              value={max}\n              options={dates}\n            />\n          </div>\n          <label htmlFor=\"select_category\" className=\"grid-item\">category</label>\n          <div className=\"grid-item select\">\n            <Select\n              id=\"select_category\"\n              onChange={this.changeCategory}\n              options={category}\n            />\n          </div>\n          { crimeCheckboxes &&\n          <div className=\"grid-item whole-row\">\n            {\n              crimeCheckboxes && crimeCheckboxes.map(({ url, checked, name }) => (<div className=\"each-crime\" key={url}>\n                <Checkbox\n                  value={url}\n                  id={`checkbox_${url}`}\n                  onChange={this.checkCategory(url)}\n                  checked={checked}\n                />\n                <label htmlFor={`checkbox_${url}`}>{name}</label>\n                <span className=\"color\" style={{backgroundColor: categoryColors[url]}}></span>\n              </div>))\n            }\n          </div> }\n          <Button onClick={this.search} className=\"grid-item whole-row\">SEARCH</Button>\n        </form>\n        <Loading loading={loading} />\n        <Modal\n          show={showError}\n          onClose={this.toggleModal}\n        >\n          {message}\n        </Modal>\n      </SearchContainer>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { search: { category = [] } = {} } = state;\n  \n  return {\n    ...state.search,\n    category: category.map((ele) => ({\n      ...ele,\n      value: ele.url,\n      text: ele.name,\n    })),\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSearch: (param) => dispatch(searchRequest(param)),\n    onFilterCrimeCategory: (crimes, list) => dispatch(filterCrimeCircles(crimes, list)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","// @flow\n\nexport const LOAD_GRAPHS_REQUEST = 'containers/AnalysePage/LOAD_GRAPHS_REQUEST';\nexport const LOAD_GRAPHS_SUCCESS = 'containers/AnalysePage/LOAD_GRAPHS_SUCCESS';\nexport const LOAD_GRAPHS_FAILURE = 'containers/AnalysePage/LOAD_GRAPHS_FAILURE';\n\nexport const LOAD_NEWS_REQUEST = 'containers/AnalysePage/LOAD_NEWS_REQUEST';\nexport const LOAD_NEWS_SUCCESS = 'containers/AnalysePage/LOAD_NEWS_SUCCESS';\nexport const LOAD_NEWS_FAILURE = 'containers/AnalysePage/LOAD_NEWS_FAILURE';\n\nexport function loadGraphsRequest(id: string) {\n  return {\n    type: LOAD_GRAPHS_REQUEST,\n    id,\n  }\n}\n\nexport function loadGraphsSuccess(data: { dateGraph: Array<any>, categoryGraph: Array<any>, outcomeGraph: Array<any>}) {\n  return {\n    type: LOAD_GRAPHS_SUCCESS,\n    data,\n  }\n}\n\nexport function loadGraphsFailure(message: string) {\n  return {\n    type: LOAD_GRAPHS_FAILURE,\n    message,\n  }\n}\n\nexport function loadNewsRequest(latlng: { lat: number, lng: number }) {\n  return {\n    type: LOAD_NEWS_REQUEST,\n    latlng,\n  }\n}\n\nexport function loadNewsSuccess(news: Array<any>) {\n  return {\n    type: LOAD_NEWS_SUCCESS,\n    data: news,\n  }\n}\n\nexport function loadNewsFailure(message: string) {\n  return {\n    type: LOAD_NEWS_FAILURE,\n    message,\n  }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport {\n  Map, TileLayer,\n  Marker, Popup,\n  Circle,\n} from 'react-leaflet';\n\nimport {\n  loadGraphsRequest,\n  loadNewsRequest,\n} from '../AnalysePage/actions';\n\nimport {\n  saveLocation,\n} from './actions';\n\nconst attribution = \"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\";\nconst url = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\nclass LeafletMap extends React.PureComponent {\n  static propTypes = {\n    latlng: PropTypes.shape({\n      lat: PropTypes.number,\n      lng: PropTypes.number,\n    }),\n    circles: PropTypes.array,\n    onSaveLocation: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      latlng: props.latlng,\n    }\n  }\n\n  componentDidMount() {\n    if (this.map.leafletElement) {\n      this.map.leafletElement.locate();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      latlng: prevLatlng,\n    } = prevProps;\n\n    const {\n      latlng,\n    } = this.props;\n\n    if (prevLatlng !== latlng) {\n      this.setState({\n        latlng,\n      });\n    }\n  }\n\n  handleClick = (evt) => this.props.onSaveLocation(evt.latlng);\n\n  handleLocationFound = (evt) => {\n    this.setState({\n      hasLocation: true,\n      latlng: evt.latlng,\n    });\n\n    this.props.onSaveLocation(evt.latlng);\n  }\n\n  handleCircle = (id, latlng) => () => {\n    this.props.onLoadGraphRequest(id);\n    this.props.onLoadNewsRequest(latlng);\n  }\n\n  render() {\n    const {\n      circles,\n    } = this.props;\n\n    const {\n      latlng = {},\n    } = this.state;\n\n    return (\n      <Map\n        center={latlng}\n        ref={(val) => { this.map = val; }}\n        zoom={13}\n        onClick={this.handleClick}\n        onLocationfound={this.handleLocationFound}\n      >\n        <TileLayer\n          attribution={attribution}\n          url={url}\n        />\n        { latlng &&\n        <Marker position={[latlng.lat, latlng.lng]}>\n          <Popup>\n            {`You clicked here!!\n            Latitude: ${latlng.lat}\n            Longitude: ${latlng.lng}`}\n          </Popup>\n        </Marker> }\n        {\n          circles && circles.map(({latlng, street, radius, count, opacity = 0.5, fillColor}) => \n          <Circle\n            fillColor={fillColor}\n            fillOpacity={opacity}\n            stroke={false}\n            radius={radius < 10 ? radius * 25 : 250}\n            center={latlng}\n            key={latlng}\n            onClick={this.handleCircle(street.id, latlng)}\n          >\n            <Popup>\n            {`Street Id: ${street.id}\n            Street Name: ${street.name}\n            Crime Count: ${count}`}\n            </Popup>\n          </Circle>)\n        }\n      </Map>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.map,\n  };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSaveLocation: (latlng) => dispatch(saveLocation(latlng)),\n    onLoadGraphRequest: (id) => dispatch(loadGraphsRequest(id)),\n    onLoadNewsRequest: (latlng) => dispatch(loadNewsRequest(latlng)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeafletMap);\n","// @flow\n\nimport React from 'react';\n\nimport {\n  Table, Tr, Th, Td,\n} from '../../components';\n\nconst News = ({ news }: {\n  news: Array<{\n    id: string,\n    sectionName: string,\n    pillarName: string,\n    webTitle: string,\n    webUrl: string,\n    webPublicationDate: string,\n  }>\n}) => (\n  <div>\n    {\n      news && news.map(({id, sectionName, pillarName, webTitle, webUrl, webPublicationDate }) =>\n        (<Table key={id}>\n          <Tr>\n            <Th>Date</Th>\n            <Td>{ new Date(webPublicationDate).toLocaleDateString() }</Td>\n          </Tr>\n          <Tr>\n            <Th>Section</Th>\n            <Td>{ sectionName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Pillar</Th>\n            <Td>{ pillarName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Title</Th>\n            <Td><a href={webUrl} target=\"_new\">{ webTitle }</a></Td>\n          </Tr>\n        </Table>\n      ))\n    }\n  </div>\n);\n\nexport default News;","// @flow\n\nimport React from 'react';\n\nimport {\n  LineChart, Line,\n  BarChart, Bar,\n  XAxis, YAxis,\n  Tooltip,\n  CartesianGrid,\n} from 'recharts';\n\ntype Props = {\n  date: Array<any>,\n  category: Array<any>,\n  outcome: Array<any>,\n};\n\nconst Graphs = (props: Props) => {\n  const {\n    date,\n    category,\n    outcome,\n  } = props;\n  \n  const width = window.innerWidth - 35;\n\n  return (<div>\n    { date && \n    <div>\n      <p>The number of crimes per Date</p>\n      <LineChart\n        width={width}\n        height={width}\n        data={date}\n      >\n        <XAxis dataKey=\"date\" />\n        <YAxis type=\"number\" yAxisId={0} />\n        <Tooltip />\n        <CartesianGrid stroke=\"#f5f5f5\" />\n        <Line type=\"monotone\" dataKey=\"count\" stroke=\"#ff7300\" yAxisId={0} />\n      </LineChart>\n      </div>\n    }\n    { category && category.length > 1 &&\n      <div>\n        <p>The number of crimes per Category</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={category}\n        >\n          <XAxis dataKey=\"category\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#387908\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n    { outcome &&\n      <div>\n        <p>The ratio of crimes per Outcome</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={outcome}\n        >\n          <XAxis dataKey=\"outcome\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#38abc8\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n  </div>);\n}\n\nexport default Graphs;\n","// @flow\n\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport News from './news';\nimport Graphs from './graphs';\n\nconst AnalyseContainer = styled.div`\n  .tr {\n    line-height: 2rem;\n\n    .th, .td {\n      padding: 0 0.5rem;\n      font-size: smaller;\n    }\n  }\n`;\n\ntype Props = {\n  dateGraph: Array<any>,\n  categoryGraph: Array<any>,\n  outcomeGraph: Array<any>,\n  crimeTable: Array<any>,\n  news: Array<any>,\n};\n\nclass AnalysePage extends React.PureComponent<Props> {\n  render(){\n    const {\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n      news,\n    } = this.props;\n\n    return (<AnalyseContainer>\n      { dateGraph &&\n        <section>\n          <h3>Graphs</h3>\n          <Graphs\n            date={dateGraph}\n            category={categoryGraph}\n            outcome={outcomeGraph}\n          />\n        </section>\n      }\n      { news &&\n        <section>\n          <h3>News</h3>\n          <News\n            news={news}\n          />\n        </section>\n      }\n    </AnalyseContainer>);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.analyse,\n  }\n}\n\nexport default connect(mapStateToProps)(AnalysePage);","// @flow\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport Search from './SearchPage/page';\nimport LeafletMap from './MapPage/page';\nimport Analyse from './AnalysePage/page';\n\nconst AppDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  header {\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n  }\n\n  aside {\n    order: 1;\n  }\n\n  .map {\n    order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n  }\n\n  .analyse {\n    order: 3;\n    padding: 1rem;\n  }\n`;\n\ntype Props = {};\n\nclass App extends Component<Props> {\n  render() {\n    return (\n      <AppDiv>\n        <header>\n          <div className=\"title\">\n            CRIME MAP\n          </div>\n          <div className=\"email\">\n            <span className=\"smaller\">Contact me: melancholy14@hotmail.com</span>\n          </div>\n        </header>\n        <aside>\n          <Search />\n        </aside>\n        <main className=\"map\">\n          <LeafletMap />\n        </main>\n        <main className=\"analyse\">\n          <Analyse />\n        </main>\n      </AppDiv>\n    );\n  }\n}\n\nexport default App;\n","// @flow\nimport update from 'immutability-helper';\n\nimport {\n  LOAD_AVAILABILITY_SUCCESS,\n  LOAD_AVAILABILITY_FAILURE,\n  LOAD_CRIME_CATEGORY_SUCCESS,\n  LOAD_CRIME_CATEGORY_FAILURE,\n  SEARCH_REQUEST,\n  SEARCH_SUCCESS,\n  SEARCH_FAILURE,\n} from './actions';\n\ntype State = {\n  +availability: Array<{\n    date: string,\n  }>,\n  +category: Array<{\n    url: string,\n    name: string,\n  }>,\n  +crimes: Array<mixed>,\n  +message: string,\n  +loading: boolean,\n}\n\ntype Action = {\n  type: string,\n  data?: any,\n  message?: string,\n};\n\nconst initialState = {\n  availability: [],\n  category: [],\n  crimes: [],\n  message: '',\n  loading: false,\n};\n\nexport default function searchReducer(state: State = initialState, action: Action): State {\n  switch(action.type) {\n    case SEARCH_REQUEST:\n      return update(state, {\n        $merge: {\n          ...action.data,\n          loading: true\n        }\n      });\n    case LOAD_AVAILABILITY_SUCCESS:\n      return update(state, {\n        availability: {$set: action.data}\n      });\n    case LOAD_CRIME_CATEGORY_SUCCESS:\n      return update(state, {\n        category: {$set: action.data},\n      });\n    case SEARCH_SUCCESS:\n      return update(state, {\n        crimes: {$set: action.data},\n        loading: {$set: false},\n      });\n    case LOAD_AVAILABILITY_FAILURE:\n    case LOAD_CRIME_CATEGORY_FAILURE:\n    case SEARCH_FAILURE:\n      return update(state, {\n        message: {$set: action.message},\n        loading: {$set: false},\n      });\n    default:\n      return state;\n  }\n}\n","import update from 'immutability-helper';\n\nimport {\n  SAVE_LOCATION,\n  FILTER_CRIME_CIRCLES,\n} from './actions';\n\nconst initialState = {\n  latlng: {\n    lat: 51.505,\n    lng: -0.09,\n  },\n  circles: [],\n};\n\nexport default function mapReducer(state = initialState, action){\n  switch(action.type) {\n    case SAVE_LOCATION:\n      return update(state, {\n        latlng: {$set: action.data},\n      });\n    case FILTER_CRIME_CIRCLES:\n      return update(state, {\n        circles: {$set: action.data},\n      });\n    default:\n      return state;\n  }\n}\n","// @flow\n\nimport update from 'immutability-helper';\n\nimport {\n  LOAD_GRAPHS_SUCCESS,\n  LOAD_GRAPHS_FAILURE,\n  LOAD_NEWS_SUCCESS,\n  LOAD_NEWS_FAILURE,\n} from './actions';\n\ntype State = {\n  +dateGraph: Array<any>,\n  +categoryGraph: Array<any>,\n  +outcomeGraph: Array<any>,\n  +crimeTable: Array<any>,\n  +news: Array<any>,\n  +message: string,\n}\n\nconst initialState = {\n  dateGraph: [],\n  categoryGraph: [],\n  outcomeGraph: [],\n  crimeTable: [],\n  news: [],\n  message: '',\n}\n\ntype Action = {\n  type: string,\n  data?: any,\n  message?: string,\n}\n\nexport default function analyseReducer(state: State = initialState, action: Action): State{\n  switch(action.type){\n    case LOAD_GRAPHS_SUCCESS:\n      return update(state, {\n        $merge: {\n          ...action.data\n        }\n      });\n    case LOAD_NEWS_SUCCESS:\n      return update(state, {\n        news: {$set: action.data},\n      });\n    case LOAD_NEWS_FAILURE:\n    case LOAD_GRAPHS_FAILURE:\n      return update(state, {\n        message: {$set: action.message},\n      });\n    default:\n      return state;\n  }\n};\n","// @flow\n\nimport { combineReducers } from 'redux';\n\nimport searchReducer from './SearchPage/reducer';\nimport mapReducer from './MapPage/reducer';\nimport analyseReducer from './AnalysePage/reducer';\n\nexport default combineReducers({\n  map: mapReducer,\n  search: searchReducer,\n  analyse: analyseReducer,\n});","import axios from 'axios';\n\nexport const api = {\n  police: 'https://data.police.uk/api',\n  guardian: 'https://content.guardianapis.com/search',\n  mapquest: 'https://open.mapquestapi.com/geocoding/v1',\n};\n\nexport const keys = {\n  guardian: '36ecd8a8-f9be-4d95-9643-4095fae41301',\n  mapquest: '7qAl9AvfefdHSIOkkLrVvSc466ZoHenG',\n}\n\nasync function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error();\n    error.response = response;\n\n    try {\n      const body = await response.json();\n      error.body = body;\n      error.message = body.message || response.statusText;\n\n      throw error;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction parseJSON(response){\n  if(response.status === 204 || response.status === 205){\n    return null;\n  }\n\n  return response;\n}\n\nexport function request(path, options) {\n  return axios.get(path, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}","// @flow\n\nimport { fork, put, takeLatest, select, all } from 'redux-saga/effects';\nimport { api, request } from '../../utils/request';\n\nimport {\n  LOAD_CRIME_CATEGORY_REQUEST,\n  SEARCH_REQUEST,\n  loadAvailabilitySuccess,\n  loadAvailabilityFailure,\n  loadCrimeCategorySuccess,\n  loadCrimeCategoryFailure,\n  searchSuccess,\n  searchFailure,\n} from './actions';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nfunction* loadAvailability() {\n  try {\n    const response = yield request(`${api.police}/crimes-street-dates`);\n\n    yield put(loadAvailabilitySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadAvailabilityFailure(err.message));\n  }\n}\n\nfunction* loadCrimeCategory({ date: _date } = {}) {\n  try {\n    const date = _date || (new Date()).toLocaleDateString();\n\n    const response = yield request(`${api.police}/crime-categories?date=${date}`);\n\n    yield put(loadCrimeCategorySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadCrimeCategoryFailure(err.message));\n  }\n}\n\nfunction* search({ data: { url, dates }} = {}) {\n  try {\n    const { lat, lng } = yield select((state) => state.map.latlng);\n\n    if (lat && lng && dates && dates.length > 0) {\n      const responses = yield all(dates.map((date) => request(`${api.police}/crimes-street/${url}?lat=${lat}&lng=${lng}&date=${date}`)));\n\n      const data = responses && responses.reduce((acc, response) => {\n        return [...acc, ...(response && response.data)];\n      }, []);\n\n      yield put(searchSuccess(data));\n      yield put(filterCrimeCircles(data))\n    } else {\n      yield put(searchFailure('There is no position info! Please, click the map and tell me where you want to know'));\n    }\n  } catch(err) { \n    console.log(err);\n    yield put(searchFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any> {\n  yield fork(loadAvailability);\n  yield fork(loadCrimeCategory);\n\n  yield takeLatest(LOAD_CRIME_CATEGORY_REQUEST, loadCrimeCategory);\n  yield takeLatest(SEARCH_REQUEST, search);\n}","// @flow\n\nimport { takeLatest, select, put } from 'redux-saga/effects';\nimport { api, request, keys } from '../../utils/request';\n\nimport {\n  LOAD_GRAPHS_REQUEST,\n  loadGraphsSuccess,\n  loadGraphsFailure,\n  LOAD_NEWS_REQUEST,\n  loadNewsFailure,\n  loadNewsSuccess,\n} from './actions';\n\nfunction* loadGraph({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    const dateGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.month]: acc[ele.month] >= 0 ? acc[ele.month] + 1 : 0,\n    }), {})).map(([date, count]) => ({ date, count }));\n\n    const categoryGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.category]: acc[ele.category] >= 0 ? acc[ele.category] + 1 : 0,\n    }), {})).map(([category, count]) => ({ category, count }));\n\n    const outcomeGraph = Object.entries(selectedCrimes.reduce((acc, ele) => {\n      const {\n        outcome_status,\n        outcomes: {\n          category: outcome,\n        } = outcome_status || {},\n      } = ele;\n\n      if (outcome) {\n        return {\n          ...acc,\n          [outcome]: acc[outcome] >= 0 ? acc[outcome] + 1 : 0,\n        };\n      }\n      return acc;\n    }, {})).map(([outcome, count]) => ({ outcome, count }));\n\n    yield put(loadGraphsSuccess({\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n    }));\n  } catch(err) {\n    yield put(loadGraphsFailure(err.message));\n  }\n}\n\n/*\nfunction* loadCrimeTables({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    console.log('selectedCrimes', selectedCrimes);\n\n    const crimeTable = selectedCrimes.map(({\n      id,\n      month,\n      category,\n      outcome_status,\n      outcomes: {\n        category: outcome,\n      } = outcome_status || {},\n    }) => ({ id, list: [['month', month], ['category', category], ['outcome', outcome]] }));\n\n    yield put(loadGraphSuccess({\n      crimeTable,\n    }));\n  } catch(err) {\n    yield put(loadGraphFailure(err.message));\n  }\n}\n*/\n\nfunction* loadNews({ latlng }) {\n  try {\n    const addressUrl = `${api.mapquest}/reverse?key=${keys.mapquest}&location=${latlng.join(',')}&includeRoadMetadata=true&includeNearestIntersection=true`;\n\n    const {\n      data: {\n        results: address = [],\n      } = {},\n    } = yield request(addressUrl);\n\n    const { locations = [] } = address[0];\n    const { street, adminArea5, postalCode } = locations[0];\n\n    const query = `${adminArea5} AND ${street ? street : postalCode}`;\n    const dates = yield select((state) => state.search.dates);\n\n    const newsUrl = `${api.guardian}?q=${query}&from-date=${dates[0]}-01&api-key=${keys.guardian}`;\n\n    const {\n      data: {\n        response: {\n          results = [],\n        },\n      } = {},\n    } = yield request(newsUrl);\n\n    results.sort((a, b) => a.webPublicationDate.localeCompare(b.webPublicationDate));\n\n    yield put(loadNewsSuccess(results));\n  } catch (err) {\n    console.error(err);\n    yield put(loadNewsFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any>{\n  yield takeLatest(LOAD_GRAPHS_REQUEST, loadGraph);\n  yield takeLatest(LOAD_NEWS_REQUEST, loadNews);\n}","// @flow\n\nimport { all, fork } from 'redux-saga/effects';\n\nimport searchSaga from './SearchPage/saga';\nimport analyseSaga from './AnalysePage/saga';\n\nexport default function* sagas (): Generator<any, void, any>  {\n  yield all([\n    searchSaga,\n    analyseSaga\n  ].map(fork));\n}","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport './index.css';\n\nimport App from './containers/App';\n\nimport reducers from './containers/reducers';\nimport sagas from './containers/sagas';\n\nimport * as serviceWorker from './serviceWorker';\n\nconst saga = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(saga)),\n);\n\nsaga.run(sagas);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}