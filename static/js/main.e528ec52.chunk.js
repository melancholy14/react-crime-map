(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{259:function(e,t,n){e.exports=n(475)},266:function(e,t,n){},475:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(96),o=n.n(c),i=n(43),l=n(19),s=n(258),u=n(246),d=(n(266),n(38)),m=n(39),p=n(44),h=n(40),f=n(45),b=n(12),g=n(13),v=n(248);function y(){var e=Object(b.a)(["\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n"]);return y=function(){return e},e}var E=g.a.header(y()),O=function(){return r.a.createElement(E,null,r.a.createElement("div",{className:"title"},"CRIME MAP"),r.a.createElement("div",{className:"email"},r.a.createElement("span",{className:"smaller"},"Contact me: melancholy8914@gmail.com")))},x=n(35),w=n(18),j="containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS",k="containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE",S="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST",C="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS",A="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE",N="containers/SearchPage/actions/SEARCH_REQUEST",L="containers/SearchPage/actions/SEARCH_SUCCESS",_="containers/SearchPage/actions/SEARCH_FAILURE";function I(e){return{type:L,data:e}}function R(e){return{type:_,message:e}}var P=n(61),D={url:"all-crime",name:"All crime"},T={"all-crime":"#d17f68","anti-social-behaviour":"#73b638","bicycle-theft":"#a45dcf",burglary:"#5fbc6e","criminal-damage-arson":"#c0489a",drugs:"#4b7d3c","other-theft":"#666dc6","possession-of-weapons":"#d99938","public-order":"#5e99d2",robbery:"#cc4f32",shoplifting:"#49b9a9","theft-from-the-person":"#c7496a","vehicle-crime":"#adac4d","violent-crime":"#c581bb","other-crime":"#8b6c2f"},M=(n(64),"containers/MapPage/actions/SAVE_LOCATION"),U="containers/MapPage/actions/INITIAL_CRIME_CIRCLES",$="containers/MapPage/actions/FILTER_CRIME_CIRCLES";function z(e){return{type:M,data:e}}function F(e){var t=e.reduce(function(e,t){var n=t.category,a=t.location,r=(a=void 0===a?{}:a).latitude,c=a.longitude,o=a.street,i=void 0===o?{}:o;return e[i.id]?Object(w.a)({},e,Object(P.a)({},i.id,Object(w.a)({},e[i.id],{count:e[i.id].count+1}))):Object(w.a)({},e,Object(P.a)({},i.id,{category:n,fillColor:T[n],street:i,count:1,latlng:[parseFloat(r),parseFloat(c)]}))},{}),n=Object.values(t),a=Math.max.apply(Math,Object(x.a)(n.map(function(e){return e.count}))),r=n.map(function(e){return Object(w.a)({},e,{opacity:(t=e.count/a,.25*t+.75),radius:function(e){return 225*e+25}(e.count/a)});var t});return{type:U,data:r}}function q(){var e=Object(b.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  .modal-title {\n    position: fixed;\n    right: 0;\n    left: 0;\n    top: 4.5rem;\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n\n    @media screen and (min-width: 426px) {\n      top: 7rem;\n    }\n\n    @media screen and (min-width: 768px) {\n      right: 10%;\n      left: 10%;\n    }\n\n    .title {\n      display: inline-block;\n      width: calc(100% - 2rem);\n    }\n\n    .close {\n      display: inline-block;\n      width: 2rem;\n      font-size: large;\n      font-weight: bold;    \n      border: 0;\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    min-height: 10rem;\n    // height: calc(50% - 6rem);\n    overflow: auto;\n    top: 7.5rem;\n    left: 0;\n    right: 0;\n    \n    @media screen and (min-width: 426px) {\n      top: 10rem;\n    }\n\n    @media screen and (min-width: 768px) {\n      right: 10%;\n      left: 10%;\n    }\n\n    &.fixed-bottom {\n      bottom: 7.5rem;\n\n      @media screen and (min-width: 426px) {\n        bottom: 10rem;\n      }\n    }\n  }\n\n  .modal-footer {\n    position: fixed;\n    background-color: white;\n    padding: 1rem;\n    right: 0;\n    left: 0;\n    text-align: right;\n\n    bottom: 4rem;\n    @media screen and (min-width: 426px) {\n      bottom: 7rem;\n    }\n    \n    border-top: 1px dotted black;\n\n    .close {\n      border: none;\n      font-size: large;\n      background: transparent;\n    }\n  }\n"]);return q=function(){return e},e}var H=g.a.div(q()),G=function(e){var t=e.title,n=e.show,a=e.onClose,c=e.fixedBottom,o=void 0!==c&&c,i=e.children;return r.a.createElement(H,{className:"display-".concat(n?"block":"none")},t&&r.a.createElement("div",{className:"modal-title"},r.a.createElement("div",{className:"title"},t),a&&r.a.createElement("button",{className:"close",onClick:a},"X")),r.a.createElement("div",{className:"modal-main ".concat(o?"fixed-bottom":"")},i),!t&&a&&o&&r.a.createElement("div",{className:"modal-footer"},a&&r.a.createElement("button",{className:"close",onClick:a},"Close")))};function K(){var e=Object(b.a)(["\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n    width: 4rem;\n  }\n\n  .td {\n    display: table-cell;\n  }\n"]);return K=function(){return e},e}var J=g.a.div(K()),Y=function(e){var t=e.children;return r.a.createElement("div",{className:"th"},t)},B=function(e){var t=e.children;return r.a.createElement("div",{className:"td"},t)},W=function(e){var t=e.children;return r.a.createElement("div",{className:"tr"},t)},V=function(e){var t=e.children;return r.a.createElement(J,{className:"table"},t)},Q=n(249);function X(){var e=Object(b.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  & > div {\n    margin: 15rem auto;\n  }\n"]);return X=function(){return e},e}var Z=g.a.div(X()),ee=function(e){var t=e.loading;return r.a.createElement(Z,{className:"display-".concat(t?"block":"none")},r.a.createElement(Q.HashLoader,{color:"#fff",loading:t}))},te=n(0),ne=n.n(te);function ae(){var e=Object(b.a)(["\n  margin: 1rem;\n  padding: 1rem 0.5rem;\n"]);return ae=function(){return e},e}var re=g.a.div(ae()),ce=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).toggleModal=function(){return e.setState({show:!e.state.show})},e.state={show:!1},e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.message!==this.props.message&&this.toggleModal()}},{key:"render",value:function(){return r.a.createElement(G,{title:"Something goes wrong",show:this.state.show,onClose:this.toggleModal},r.a.createElement(re,null,this.props.message))}}]),t}(r.a.PureComponent);ce.propTyeps={message:ne.a.string};var oe=ce,ie=n(78);function le(){var e=Object(b.a)(["\n  border: 1px solid lightgray;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  background-color: white;\n  font-family: inherit;\n"]);return le=function(){return e},e}g.a.select(le());function se(){var e=Object(b.a)(["\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.3rem 1rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n  font-family: inherit;\n"]);return se=function(){return e},e}var ue=g.a.button(se()),de=function(e){var t=e.onClick,n=e.className,a=e.children,c=Object(ie.a)(e,["onClick","className","children"]);return r.a.createElement(ue,Object.assign({onClick:t,className:n},c),a)};function me(){var e=Object(b.a)(["\n  .tabs {\n    overflow: hidden;\n    background-color: #f1f1f1;\n    border: 1px solid #ccc;\n\n    button {\n      background-color: inherit;\n      float: left;\n      border: none;\n      outline: none;\n      cursor: pointer;\n      padding: 14px 16px;\n      transition: 0.3s;\n\n      &:hover {\n        background-color: #ddd;\n      }\n\n      .active {\n        background-color: #ccc;\n      }\n    }\n  }\n\n  .tab {\n    display: none;\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    border-top: none;\n\n    &.active {\n      display: block;\n    }\n  }\n"]);return me=function(){return e},e}var pe=g.a.div(me()),he=(r.a.Component,n(480)),fe=n(485),be=n(487);function ge(){var e=Object(b.a)(["\n  border: 1px solid lightgray;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  font-family: inherit;\n"]);return ge=function(){return e},e}var ve=Object(g.a)(be.a)(ge()),ye={Text:function(e){return r.a.createElement(ve,Object.assign({component:"input",type:"text"},e))},Select:function(e){var t=e.options,n=Object(ie.a)(e,["options"]);return r.a.createElement(ve,Object.assign({component:"select"},n),t&&t.map(function(e){var t=e.value,n=e.text,a=void 0===n?t:n;return r.a.createElement("option",{key:t,value:t},a)}))},Checkbox:function(e){return r.a.createElement(be.a,Object.assign({component:"input",type:"checkbox"},e))}};function Ee(){var e=Object(b.a)(["\n  padding: 0.5rem;\n\n  & > label {\n    font-size: smaller;\n    text-transform: capitalize;\n    font-weight: bold;\n  }\n\n  &.select {\n    padding: 0.25rem 0.5rem;\n  }\n\n  &.whole-row {\n    grid-column-start: 1;\n    grid-column-end: 3;\n\n    .each-crime {\n      display: inline-block;\n\n      min-width: 50%;\n      @media screen and (max-width: 400px) {\n        min-width: 75%;\n      }\n      @media screen and (min-width: 768px) {\n        min-width: calc(100%/3);\n      }\n      @media screen and (min-width: 1024px) {\n        min-width: 25%;\n      }\n\n      font-size: small;\n      line-height: 1rem;\n      vertical-align: middle;\n\n      label {\n        font-size: smaller;\n        font-weight: bolder;\n      }\n\n      .color {\n        width: 0.75rem;\n        height: 0.75rem;\n        display: inline-block;\n        border-radius: 0.5rem;\n        margin: 0 0.3rem;\n      }\n    }\n\n    button {\n      width: 100%;\n    }\n  }\n"]);return Ee=function(){return e},e}var Oe=g.a.div(Ee()),xe=function(e){var t=e.id,n=e.className,a=e.children;return r.a.createElement(Oe,{id:t,className:n},a)};function we(){var e=Object(b.a)(["\n  display: grid;\n  grid-template-rows: 2rem 2rem auto 2rem;\n  grid-template-columns: 4.5rem auto;\n"]);return we=function(){return e},e}var je=Object(g.a)(he.a)(we()),ke=Object(fe.a)({form:"search"})(function(e){var t=e.dates,n=e.category,a=e.onCheckCategory,c=e.handleSubmit;return r.a.createElement(je,{onSubmit:c},r.a.createElement(xe,null,r.a.createElement("label",{htmlFor:"select_date"},"date")),r.a.createElement(xe,{className:"select",id:"select_date"},r.a.createElement(ye.Select,{name:"minDate",options:t}),r.a.createElement("span",null," ~ "),r.a.createElement(ye.Select,{name:"maxDate",options:t})),r.a.createElement(xe,null,r.a.createElement("label",{htmlFor:"postcode"},"postcode")),r.a.createElement(xe,{className:"select"},r.a.createElement(ye.Text,{name:"postcode",id:"postcode"})),r.a.createElement(xe,{className:"whole-row"},n&&n.map(function(e){var t=e.url,n=e.checked,c=e.name;return r.a.createElement("div",{className:"each-crime",key:t},r.a.createElement(ye.Checkbox,{name:t,id:"checkbox_".concat(t),onChange:a,checked:n}),r.a.createElement("label",{htmlFor:"checkbox_".concat(t)},c),t!==D.url&&r.a.createElement("span",{className:"color",style:{backgroundColor:T[t]}}))})),r.a.createElement(xe,{className:"whole-row"},r.a.createElement(de,{type:"submit"},"SEARCH")))});function Se(){var e=Object(b.a)(["\n  order: 1;\n  margin: 0.5rem;\n  padding: 0.5rem;\n"]);return Se=function(){return e},e}var Ce=g.a.aside(Se()),Ae=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).checkCategory=function(e,t,a,r){var c=[],o=(c=r===D.url?n.state.checkboxes.map(function(e){return Object(w.a)({},e,{checked:t})}):n.state.checkboxes.map(function(e){return e.url===r?Object(w.a)({},e,{checked:t}):e})).reduce(function(e,t){return t.checked?Object(x.a)(e).concat([t.url]):e},[]);n.props.onFilterCrimeCategory(o),n.setState({checkboxes:c})},n.search=function(e){var t=n.state.date,a=(t=void 0===t?{}:t).dates,r=Object(w.a)({},e,{dates:a});n.props.onSearch(r)},n.state={date:{min:"",max:"",dates:[]},checkboxes:[]},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.availability,n=e.category,a=e.crimes,r=this.props,c=r.availability,o=r.category,i=r.crimes;if(JSON.stringify(t)!==JSON.stringify(c)){var l=c.reduce(function(e,t){return{min:e.min&&e.min<t.date?e.min:t.date,max:e.max&&e.max>t.date?e.max:t.date,dates:e.dates?Object(x.a)(e.dates).concat([{value:t.date}]):[{value:t.date}]}},Object(w.a)({},this.state.date));this.setState({date:l})}if(JSON.stringify(n)!==JSON.stringify(o)){var s=this.props.category.reduce(function(e,t){return Object(x.a)(e).concat([Object(w.a)({},t,{checked:!0})])},[]);this.setState({checkboxes:s})}if(JSON.stringify(a)!==JSON.stringify(i)){var u=[D.url].concat(Object(x.a)(i.map(function(e){return e.category}))),d=this.props.category.reduce(function(e,t){return Object(x.a)(e).concat([Object(w.a)({},t,{checked:u.includes(t.url)})])},[]);this.setState({checkboxes:d})}}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.loading,a=this.state,c=a.date.dates,o=a.checkboxes;return r.a.createElement(Ce,null,r.a.createElement(ke,{dates:c,category:o,onCheckCategory:this.checkCategory,onSubmit:this.search}),r.a.createElement(ee,{loading:n}),r.a.createElement(oe,{message:t}))}}]),t}(r.a.PureComponent);Ae.defaultProps={availability:[],category:[],crimes:[],message:null,loading:!1,onSelectCrimeCategory:function(){},onFilterCrimeCategory:function(){},onSearch:function(){}};var Ne=Object(i.b)(function(e){return Object(w.a)({},e.search)},function(e){return{onSearch:function(t){return e(function(e){var t=e.minDate,n=e.maxDate,a=e.dates,r=e.postcode,c=a[0].value,o=t||c,i=n||c,l=a.reduce(function(e,t){return o<=t.value&&t.value<=i?Object(x.a)(e).concat([t.value]):e},[]).sort(function(e,t){return e.localeCompare(t)});return{type:N,data:{dates:l,postcode:r}}}(t))},onFilterCrimeCategory:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:$,selected:e}}(t))}}})(Ae),Le=n(486),_e=n(490),Ie=n(481),Re=n(491),Pe=n(488),De="containers/AnalysePage/LOAD_GRAPHS_REQUEST",Te="containers/AnalysePage/LOAD_GRAPHS_SUCCESS",Me="containers/AnalysePage/LOAD_GRAPHS_FAILURE",Ue="containers/AnalysePage/LOAD_NEWS_REQUEST",$e="containers/AnalysePage/LOAD_NEWS_SUCCESS",ze="containers/AnalysePage/LOAD_NEWS_FAILURE",Fe="containers/AnalysePage/SAVE_STREET_DATA";function qe(e){return{type:Fe,data:e}}function He(){var e=Object(b.a)(["\n  order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n"]);return He=function(){return e},e}var Ge=g.a.main(He()),Ke=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){return n.props.onSaveLocation(e.latlng)},n.handleLocationFound=function(e){n.setState({hasLocation:!0,latlng:e.latlng}),n.props.onSaveLocation(e.latlng)},n.handleCircle=function(e,t){return function(){n.props.onLoadGraphRequest(e),n.props.onLoadNewsRequest(t)}},n.state={latlng:e.latlng},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.map.leafletElement&&this.map.leafletElement.locate()}},{key:"componentDidUpdate",value:function(e){var t=e.latlng,n=this.props.latlng;t!==n&&this.setState({latlng:n})}},{key:"render",value:function(){var e=this,t=this.props.circles,n=this.state.latlng,a=void 0===n?{}:n;return r.a.createElement(Ge,{className:"map"},r.a.createElement(Le.a,{center:a,ref:function(t){e.map=t},zoom:13,onClick:this.handleClick,onLocationfound:this.handleLocationFound},r.a.createElement(_e.a,{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&r.a.createElement(Ie.a,{position:[a.lat,a.lng]},r.a.createElement(Re.a,null,"You clicked here!!\n              Latitude: ".concat(a.lat,"\n              Longitude: ").concat(a.lng))),t&&t.map(function(t){var n=t.latlng,a=t.street,c=t.radius,o=t.count,i=t.opacity,l=void 0===i?.5:i,s=t.fillColor;return r.a.createElement(Pe.a,{fillColor:s,fillOpacity:l,stroke:!1,radius:c,center:n,key:n,onClick:e.handleCircle(a,n)},r.a.createElement(Re.a,null,"Street Id: ".concat(a.id,"\n              Street Name: ").concat(a.name,"\n              Crime Count: ").concat(o)))})))}}]),t}(r.a.PureComponent),Je=Object(i.b)(function(e){return Object(w.a)({},e.map)},function(e){return{onSaveLocation:function(t){return e(z(t))},onLoadGraphRequest:function(t){return e({type:De,street:t})},onLoadNewsRequest:function(t){return e(function(e){return{type:Ue,latlng:e}}(t))}}})(Ke);function Ye(){var e=Object(b.a)(["\n  .table {\n    width: 90%;\n\n    @media screen and (min-width: 768px) {\n      display: inline-table;\n      width: 45%;\n      margin: 0.5rem;\n    }\n  }\n  .tr {\n    line-height: 2rem;\n\n    .th, .td {\n      padding: 0 0.5rem;\n      font-size: smaller;\n    }\n  }\n"]);return Ye=function(){return e},e}var Be=g.a.div(Ye()),We=function(e){var t=e.news;return r.a.createElement(Be,null,t&&t.map(function(e){var t=e.id,n=e.sectionName,a=e.pillarName,c=e.webTitle,o=e.webUrl,i=e.webPublicationDate;return r.a.createElement(V,{key:t},r.a.createElement(W,null,r.a.createElement(Y,null,"Date"),r.a.createElement(B,null,new Date(i).toLocaleDateString())),r.a.createElement(W,null,r.a.createElement(Y,null,"Section"),r.a.createElement(B,null,n)),r.a.createElement(W,null,r.a.createElement(Y,null,"Pillar"),r.a.createElement(B,null,a)),r.a.createElement(W,null,r.a.createElement(Y,null,"Title"),r.a.createElement(B,null,r.a.createElement("a",{href:o,target:"_new"},c))))}))},Ve=n(482),Qe=n(151),Xe=n(152),Ze=n(476),et=n(483),tt=n(454),nt=n(484),at=n(477);function rt(){var e=Object(b.a)(["\n  display: inline-block;\n  padding: 0 0.5rem;\n"]);return rt=function(){return e},e}var ct=g.a.div(rt()),ot=function(e){var t=e.graph,n=(t=void 0===t?{}:t).date,a=t.category,c=t.outcome,o=window.innerWidth+24;return o>=1024?o/=3:o>=768&&(o/=2),o=o-35-12,r.a.createElement("div",null,n&&n.length>0&&r.a.createElement(ct,null,r.a.createElement("p",null,"Number of crimes by date"),r.a.createElement(Ve.a,{width:o,height:o,data:n},r.a.createElement(Qe.a,{dataKey:"date"}),r.a.createElement(Xe.a,{type:"number",yAxisId:0}),r.a.createElement(Ze.a,null),r.a.createElement(et.a,{stroke:"#f5f5f5"}),r.a.createElement(tt.a,{type:"monotone",dataKey:"count",stroke:"#ff7300",yAxisId:0}))),a&&a.length>1&&r.a.createElement(ct,null,r.a.createElement("p",null,"Number of crimes by category"),r.a.createElement(nt.a,{width:o,height:o,data:a},r.a.createElement(Qe.a,{dataKey:"category"}),r.a.createElement(Xe.a,{type:"number",yAxisId:0}),r.a.createElement(Ze.a,null),r.a.createElement(et.a,{stroke:"#f5f5f5"}),r.a.createElement(at.a,{type:"monotone",dataKey:"count",fill:"#387908",yAxisId:0}))),c&&c.length>0&&r.a.createElement(ct,null,r.a.createElement("p",null,"Number of crimes by outcome"),r.a.createElement(nt.a,{width:o,height:o,data:c},r.a.createElement(Qe.a,{dataKey:"outcome"}),r.a.createElement(Xe.a,{type:"number",yAxisId:0}),r.a.createElement(Ze.a,null),r.a.createElement(et.a,{stroke:"#f5f5f5"}),r.a.createElement(at.a,{type:"monotone",dataKey:"count",fill:"#38abc8",yAxisId:0}))))};function it(){var e=Object(b.a)(["\n  position: relative;\n  height: 100%;\n\n  .tabs {\n    overflow: hidden;\n    background-color: #f1f1f1;\n    border: 1px solid #ccc;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n\n    button {\n      background-color: inherit;\n      // float: left;\n      border: none;\n      outline: none;\n      cursor: pointer;\n      padding: 14px 16px;\n      transition: 0.3s;\n      font-size: medium;\n\n      &:hover {\n        background-color: #ddd;\n      }\n\n      &.active {\n        background-color: #ccc;\n      }\n    }\n  }\n\n  .tab {\n    display: none;\n    // padding: 6px 12px;\n    width: 100%;\n    box-sizing: border-box;\n    border: 1px solid #ccc;\n    border-top: none;\n\n    position: absolute;\n    top: 3rem;\n    bottom: 0;\n    overflow: auto;\n\n    animation: fadeEffect 1s;\n    @keyframes fadeEffect {\n      from {\n        opacity: 0;\n      }\n      to {\n        opacity: 1;\n      }\n    }\n\n    &.active {\n      display: block;\n    }\n  }\n"]);return it=function(){return e},e}var lt=g.a.div(it()),st=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).toggleShow=function(){return e.setState({show:!e.state.show})},e.select=function(t){return function(){return e.setState({select:t})}},e.state={show:!1,select:0},e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(!t.show&&!this.state.show){var n=this.props,a=n.graph,r=n.news;this.setState({show:!!a||!!r})}}},{key:"render",value:function(){var e=this.props,t=e.graph,n=e.news,a=e.street,c=this.state,o=c.show,i=c.select;return r.a.createElement(G,{title:a.name,show:o,onClose:this.toggleShow,fixedBottom:!0},r.a.createElement(lt,null,r.a.createElement("div",{className:"tabs"},r.a.createElement("button",{className:"".concat(0===i?"active":""),onClick:this.select(0)},"Graphs"),r.a.createElement("button",{className:"".concat(1===i?"active":""),onClick:this.select(1)},"News")),r.a.createElement("div",{className:"tab ".concat(0===i?"active":"")},r.a.createElement(ot,{graph:t})),r.a.createElement("div",{className:"tab ".concat(1===i?"active":"")},r.a.createElement(We,{news:n}))))}}]),t}(r.a.PureComponent),ut=Object(i.b)(function(e){return Object(w.a)({},e.analyse)})(st);function dt(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return dt=function(){return e},e}var mt=g.a.div(dt()),pt=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(mt,null,r.a.createElement(v.Helmet,null,r.a.createElement("title",null,"CRIME MAP IN THE UK"),r.a.createElement("meta",{name:"description",content:"You can find a visualised data about the UK crime on the map"}),r.a.createElement("meta",{property:"og:title",content:"CRIME MAP IN THE UK"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://melancholy14.github.io/react-crime-map/"}),r.a.createElement("meta",{property:"og:description",content:"You can find a visualised data about the UK crime on the map"})),r.a.createElement(O,null),r.a.createElement(Ne,null),r.a.createElement(Je,null),r.a.createElement(ut,null))}}]),t}(a.Component),ht=n(30),ft=n.n(ht),bt={availability:[],category:[],crimes:[],message:"",loading:!1};var gt={latlng:{lat:51.505,lng:-.09},crimes:[],circles:[]};var vt={graph:{date:[],category:[],outcome:[]},street:{},news:[],message:""};var yt=n(489),Et=Object(l.combineReducers)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return ft()(e,{latlng:{$set:t.data}});case U:return ft()(e,{crimes:{$set:t.data},circles:{$set:t.data}});case $:var n=e.crimes.filter(function(e){var n=e.category;return t.selected.includes(n)});return ft()(e,{circles:{$set:n}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return ft()(e,{$merge:Object(w.a)({},t.data,{loading:!0})});case j:return ft()(e,{availability:{$set:t.data}});case C:return ft()(e,{category:{$set:t.data}});case L:return ft()(e,{crimes:{$set:t.data},loading:{$set:!1}});case k:case A:return ft()(e,{message:{$set:t.message}});case _:return ft()(e,{message:{$set:t.message},loading:{$set:!1}});default:return e}},analyse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return ft()(e,{graph:{$set:t.data}});case $e:return ft()(e,{news:{$set:t.data}});case Fe:return ft()(e,{street:{$set:t.data}});case ze:case Me:return ft()(e,{message:{$set:t.message}});default:return e}},form:yt.a}),Ot=n(21),xt=n.n(Ot),wt=n(14),jt=n(255),kt=n(256),St=n.n(kt),Ct={police:"https://data.police.uk/api",guardian:"https://content.guardianapis.com/search",mapquest:"https://open.mapquestapi.com/geocoding/v1"},At={guardian:"36ecd8a8-f9be-4d95-9643-4095fae41301",mapquest:"7qAl9AvfefdHSIOkkLrVvSc466ZoHenG"};function Nt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(jt.a)(xt.a.mark(function e(t){var n,a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=4;break}return e.abrupt("return",t);case 4:return(n=new Error).response=t,e.prev=6,e.next=9,t.json();case 9:throw a=e.sent,n.body=a,n.message=a.message||t.statusText,n;case 15:throw e.prev=15,e.t0=e.catch(6),e.t0;case 18:case"end":return e.stop()}},e,this,[[6,15]])}))).apply(this,arguments)}function _t(e){return 204===e.status||205===e.status?null:e}function It(e,t){return St.a.get(e,t).then(Nt).then(_t)}var Rt=xt.a.mark(Mt),Pt=xt.a.mark(Ut),Dt=xt.a.mark($t),Tt=xt.a.mark(zt);function Mt(){var e;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It("".concat(Ct.police,"/crimes-street-dates"));case 3:return e=t.sent,t.next=6,Object(wt.c)((a=e.data,{type:j,data:a}));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.next=13,Object(wt.c)((n=t.t0.message,{type:k,message:n}));case 13:case"end":return t.stop()}var n,a},Rt,this,[[0,8]])}function Ut(){var e,t,n,a,r=arguments;return xt.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=e.date,c.prev=1,n=t||(new Date).toLocaleDateString(),c.next=5,It("".concat(Ct.police,"/crime-categories?date=").concat(n));case 5:return a=c.sent,c.next=8,Object(wt.c)((i=a.data,{type:C,data:i}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.log(c.t0),c.next=15,Object(wt.c)((o=c.t0.message,{type:A,message:o}));case 15:case"end":return c.stop()}var o,i},Pt,this,[[1,10]])}function $t(){var e,t,n,a,r,c,o,i,l,s,u,d,m,p,h,f,b=arguments;return xt.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return e=b.length>0&&void 0!==b[0]?b[0]:{},t=e.data,t.urls,n=t.dates,a=t.postcode,g.prev=1,g.next=4,Object(wt.d)(function(e){return e.map.latlng});case 4:if(r=g.sent,c=r.lat,o=r.lng,i=c,l=o,!a){g.next=18;break}return s={options:{},location:{street:"",city:"",state:"",postalCode:a,adminArea1:"GB"}},g.next=13,It("".concat(Ct.mapquest,"/address?key=").concat(At.mapquest,"&json=").concat(JSON.stringify(s)));case 13:u=g.sent,d=u.data,(m=(d=void 0===d?{}:d).results)&&m.length>0&&(p=m[0].locations,i=p[0].latLng.lat,l=p[0].latLng.lng);case 18:if(!(i&&l&&n&&n.length>0)){g.next=31;break}return g.next=21,Object(wt.a)(n.map(function(e){return It("".concat(Ct.police,"/crimes-street/all-crime?lat=").concat(i,"&lng=").concat(l,"&date=").concat(e))}));case 21:return h=g.sent,f=h&&h.reduce(function(e,t){return Object(x.a)(e).concat(Object(x.a)(t&&t.data))},[]),g.next=25,Object(wt.c)(z({lat:i,lng:l}));case 25:return g.next=27,Object(wt.c)(I(f));case 27:return g.next=29,Object(wt.c)(F(f));case 29:g.next=33;break;case 31:return g.next=33,Object(wt.c)(R("There is no position info! Please, click the map and tell me where you want to know"));case 33:g.next=40;break;case 35:return g.prev=35,g.t0=g.catch(1),console.log(g.t0),g.next=40,Object(wt.c)(R(g.t0.message));case 40:case"end":return g.stop()}},Dt,this,[[1,35]])}function zt(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wt.b)(Mt);case 2:return e.next=4,Object(wt.b)(Ut);case 4:return e.next=6,Object(wt.e)(S,Ut);case 6:return e.next=8,Object(wt.e)(N,$t);case 8:case"end":return e.stop()}},Tt,this)}var Ft=n(199),qt=xt.a.mark(Kt),Ht=xt.a.mark(Jt),Gt=xt.a.mark(Yt);function Kt(e){var t,n,a,r,c,o,i,l;return xt.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.street,s.prev=1,s.next=4,Object(wt.d)(function(e){return e.search.crimes});case 4:return n=s.sent,a=n&&n.filter(function(e){var n=e.location,a=(n=void 0===n?{}:n).street;return(a=void 0===a?{}:a).id===t.id}),r=a.reduce(function(e,t){return Object(w.a)({},e,Object(P.a)({},t.month,e[t.month]?e[t.month]+1:1))},{}),s.next=9,Object(wt.d)(function(e){return e.search.dates});case 9:return c=s.sent,o=c.map(function(e){return{date:e,count:r[e]||0}}),i=Object.entries(a.reduce(function(e,t){return Object(w.a)({},e,Object(P.a)({},t.category,e[t.category]?e[t.category]+1:1))},{})).map(function(e){var t=Object(Ft.a)(e,2);return{category:t[0],count:t[1]}}),l=Object.entries(a.reduce(function(e,t){var n=t.outcome_status,a=t.outcomes,r=(a=void 0===a?n||{}:a).category;return r?Object(w.a)({},e,Object(P.a)({},r,e[r]?e[r]+1:1)):e},{})).map(function(e){var t=Object(Ft.a)(e,2);return{outcome:t[0],count:t[1]}}),s.next=15,Object(wt.c)({type:Te,data:{date:o,category:i,outcome:l}});case 15:return s.next=17,Object(wt.c)(qe(t));case 17:s.next=23;break;case 19:return s.prev=19,s.t0=s.catch(1),s.next=23,Object(wt.c)((u=s.t0.message,{type:Me,message:u}));case 23:case"end":return s.stop()}var u},qt,this,[[1,19]])}function Jt(e){var t,n,a,r,c,o,i,l,s,u,d,m,p,h,f,b,g;return xt.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.latlng,v.prev=1,n="".concat(Ct.mapquest,"/reverse?key=").concat(At.mapquest,"&location=").concat(t.join(","),"&includeRoadMetadata=true&includeNearestIntersection=true"),v.next=5,It(n);case 5:return a=v.sent,r=a.data,c=(r=void 0===r?{}:r).results,o=(void 0===c?[]:c)[0].locations,i=(void 0===o?[]:o)[0],l=i.street,s=i.adminArea5,u=i.postalCode,d="".concat(s," AND ").concat(l||u),v.next=14,Object(wt.d)(function(e){return e.search.dates});case 14:return m=v.sent,p="".concat(Ct.guardian,"?q=").concat(d,"&from-date=").concat(m[0],"-01&api-key=").concat(At.guardian),v.next=18,It(p);case 18:return h=v.sent,f=h.data,b=(f=void 0===f?{}:f).response.results,(g=void 0===b?[]:b).sort(function(e,t){return t.webPublicationDate.localeCompare(e.webPublicationDate)}),v.next=25,Object(wt.c)({type:$e,data:g});case 25:v.next=32;break;case 27:return v.prev=27,v.t0=v.catch(1),console.error(v.t0),v.next=32,Object(wt.c)((y=v.t0.message,{type:ze,message:y}));case 32:case"end":return v.stop()}var y},Ht,this,[[1,27]])}function Yt(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wt.e)(De,Kt);case 2:return e.next=4,Object(wt.e)(Ue,Jt);case 4:case"end":return e.stop()}},Gt,this)}var Bt=xt.a.mark(Wt);function Wt(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wt.a)([zt,Yt].map(wt.b));case 2:case"end":return e.stop()}},Bt,this)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=Object(s.a)(),Qt=Object(l.createStore)(Et,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(Vt)));Vt.run(Wt),o.a.render(r.a.createElement(i.a,{store:Qt},r.a.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t){}},[[259,2,1]]]);
//# sourceMappingURL=main.e528ec52.chunk.js.map