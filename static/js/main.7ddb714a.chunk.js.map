{"version":3,"sources":["assets/iu.gif","assets/boa.gif","containers/SearchPage/actions.js","containers/SearchPage/style.js","utils/constants.js","containers/MapPage/actions.js","components/modal.js","components/table.js","components/loading.js","components/message.js","components/select.js","components/button.js","components/checkbox.js","containers/SearchPage/page.js","containers/AnalysePage/actions.js","containers/MapPage/page.js","containers/AnalysePage/news.js","containers/AnalysePage/graphs.js","containers/AnalysePage/page.js","containers/App.js","containers/SearchPage/reducer.js","containers/MapPage/reducer.js","containers/AnalysePage/reducer.js","containers/reducers.js","utils/request.js","containers/SearchPage/saga.js","containers/AnalysePage/saga.js","containers/sagas.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","LOAD_AVAILABILITY_SUCCESS","LOAD_AVAILABILITY_FAILURE","LOAD_CRIME_CATEGORY_REQUEST","LOAD_CRIME_CATEGORY_SUCCESS","LOAD_CRIME_CATEGORY_FAILURE","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAILURE","searchSuccess","data","type","searchFailure","message","SearchStyle","styled","aside","_templateObject","allCrime","url","name","categoryColors","all-crime","anti-social-behaviour","bicycle-theft","burglary","criminal-damage-arson","drugs","other-theft","possession-of-weapons","public-order","robbery","shoplifting","theft-from-the-person","vehicle-crime","violent-crime","other-crime","SAVE_LOCATION","FILTER_CRIME_CIRCLES","filterCrimeCircles","crimes","arguments","length","undefined","categories","values","Object","reduce","acc","ele","category","_ele$location","location","latitude","longitude","_ele$location$street","street","find","cat","id","objectSpread","defineProperty","count","fillColor","latlng","parseFloat","max","Math","apply","toConsumableArray","map","opacity","radius","ModalDiv","div","modal_templateObject","Modal","_ref","title","show","onClose","children","react_default","a","createElement","className","concat","onClick","TableDiv","table_templateObject","Th","Td","_ref2","Tr","_ref3","Table","_ref4","LoadingDiv","loading_templateObject","Loading","loading","modal","src","round","random","boa","iu","alt","MessageDiv","message_templateObject","Message","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","toggleModal","setState","state","prevProps","props","React","PureComponent","propTyeps","PropTypes","string","DefaultSelect","select","select_templateObject","Select","value","options","onChange","val","_ref2$text","text","key","DefaultButton","button","button_templateObject","Button","Checkbox","checked","Search","changeDate","evt","target","minmax","sort","b","localeCompare","date","changeCategory","crimeCheckboxes","selectedCategory","checkCategory","list","onFilterCrimeCategory","search","preventDefault","_this$state","dates","params","onSearch","min","prevAvailability","availability","prevCategory","_this$props","JSON","stringify","_this2","_this$state2","_this$state2$date","_this$state2$date$dat","_this$props2","_this$props2$category","style","htmlFor","components_select","components_checkbox","backgroundColor","components_button","components_loading","components_message","defaultProps","onSelectCrimeCategory","connect","_state$search","_state$search$categor","dispatch","param","LOAD_GRAPHS_REQUEST","LOAD_GRAPHS_SUCCESS","LOAD_GRAPHS_FAILURE","LOAD_NEWS_REQUEST","LOAD_NEWS_SUCCESS","LOAD_NEWS_FAILURE","MapStyle","main","page_templateObject","LeafletMap","handleClick","onSaveLocation","handleLocationFound","hasLocation","handleCircle","onLoadGraphRequest","onLoadNewsRequest","enterKeyword","postCode","searchAddr","leafletElement","locate","prevLatlng","circles","_this$state$latlng","Map","center","ref","zoom","onLocationfound","TileLayer","attribution","Marker","position","lat","lng","Popup","_ref$opacity","Circle","fillOpacity","stroke","loadGraphsRequest","loadNewsRequest","NewsStyle","news_templateObject","News","news","sectionName","pillarName","webTitle","webUrl","webPublicationDate","table_Table","table_Tr","table_Th","table_Td","Date","toLocaleDateString","href","Graphs","outcome","width","window","innerWidth","LineChart","height","XAxis","dataKey","YAxis","yAxisId","Tooltip","CartesianGrid","Line","BarChart","Bar","fill","AnalyseStyle","AnalysePage_page_templateObject","AnalysePage","dateGraph","categoryGraph","outcomeGraph","graphs","AnalysePage_news","analyse","AppDiv","App_templateObject","App","page","MapPage_page","AnalysePage_page","Component","initialState","combineReducers","action","update","$set","$merge","api","police","guardian","mapquest","keys","checkStatus","_callee","response","error","body","regenerator_default","wrap","_context","prev","next","status","abrupt","Error","json","sent","statusText","t0","stop","parseJSON","request","path","axios","get","then","loadAvailability","loadCrimeCategory","saga","put","console","log","_marked","_date","_args2","_context2","_marked2","_ref2$data","responses","_args3","_context3","all","_marked3","_context4","fork","takeLatest","_marked4","loadGraph","loadNews","streetId","selectedCrimes","filter","_ref2$location","_ref2$location$street","entries","month","slicedToArray","_ref5","_ref6","outcome_status","_ele$outcomes","outcomes","_ref7","_ref8","saga_marked","_ref9","addressUrl","_ref10","_ref10$data","_ref10$data$results","_address$0$locations","_locations$","adminArea5","postalCode","query","newsUrl","_ref11","_ref11$data","_ref11$data$response$","results","join","locations","saga_marked2","saga_marked3","sagas","searchSaga","analyseSaga","sagas_marked","Boolean","hostname","match","createSagaMiddleware","store","createStore","reducers","composeWithDevTools","applyMiddleware","run","ReactDOM","render","es","containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7ddb714a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/iu.be3a3a56.gif\";","module.exports = __webpack_public_path__ + \"static/media/boa.3096abdc.gif\";","// @flow\n\nexport const LOAD_AVAILABILITY_SUCCESS = 'containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS';\nexport const LOAD_AVAILABILITY_FAILURE = 'containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE';\n\nexport const LOAD_CRIME_CATEGORY_REQUEST = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST';\nexport const LOAD_CRIME_CATEGORY_SUCCESS = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS';\nexport const LOAD_CRIME_CATEGORY_FAILURE = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE';\n\nexport const SEARCH_REQUEST = 'containers/SearchPage/actions/SEARCH_REQUEST';\nexport const SEARCH_SUCCESS = 'containers/SearchPage/actions/SEARCH_SUCCESS';\nexport const SEARCH_FAILURE = 'containers/SearchPage/actions/SEARCH_FAILURE';\n\nexport function loadAvailabilitySuccess (data: Array<Object>) {\n  return {\n    type: LOAD_AVAILABILITY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadAvailabilityFailure (message: string) {\n  return {\n    type: LOAD_AVAILABILITY_FAILURE,\n    message,\n  }\n}\n\nexport function loadCrimeCategorySuccess (data: Array<Object>) {\n  return {\n    type: LOAD_CRIME_CATEGORY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadCrimeCategoryFailure (message: string) {\n  return {\n    type: LOAD_CRIME_CATEGORY_FAILURE,\n    message,\n  }\n}\n\nexport function searchRequest (data: { url: string, dates: Array<string> }) {\n  return {\n    type: SEARCH_REQUEST,\n    data,\n  }\n}\n\nexport function searchSuccess (data: Array<Object>) {\n  return {\n    type: SEARCH_SUCCESS,\n    data,\n  }\n}\n\nexport function searchFailure (message: string) {\n  return {\n    type: SEARCH_FAILURE,\n    message,\n  }\n}","import styled from 'styled-components';\n\nconst SearchStyle = styled.aside`\n  order: 1;\n  margin: 0.5rem;\n  padding: 0.5rem;\n\n  .grid-container {\n    display: grid;\n    grid-template-rows: 2rem 2rem auto 2rem;\n    grid-template-columns: 4.5rem auto;\n\n    .grid-item {\n      padding: 0.5rem;\n\n      &.select {\n        padding: 0.25rem 0.5rem;\n      }\n\n      &.whole-row {\n        grid-column-start: 1;\n        grid-column-end: 3;\n\n        .each-crime {\n          display: inline-block;\n          min-width: 50%;\n          font-size: small;\n          line-height: 1rem;\n          vertical-align: middle;\n\n          label {\n            font-size: smaller;\n            font-weight: bolder;\n          }\n\n          .color {\n            width: 0.75rem;\n            height: 0.75rem;\n            display: inline-block;\n            border-radius: 0.5rem;\n            margin: 0 0.3rem;\n          }\n        }\n      }\n    }\n\n    & > label {\n      font-size: smaller;\n      text-transform: capitalize;\n      font-weight: bold;\n    }\n  }\n\n  button {     \n    padding: 0.3rem 1rem;\n  }\n`;\n\nexport default SearchStyle;","export const outcomes = [\n  { code: \"awaiting-court-result\", name: \"Awaiting court outcome\" },\n  { code: \"court-result-unavailable\", name: \"Court result unavailable\" },\n  { code: \"unable-to-proceed\", name: \"Court case unable to proceed\" },\n  { code: \"local-resolution\", name: \"Local resolution\" },\n  { code: \"no-further-action\", name: \"Investigation complete; no suspect identified\" },\n  { code: \"deprived-of-property\", name: \"Offender deprived of property\" },\n  { code: \"fined\", name: \"Offender fined\" },\n  { code: \"absolute-discharge\", name: \"Offender given absolute discharge\" },\n  { code: \"cautioned\", name: \"Offender given a caution\" },\n  { code: \"drugs-possession-warning\", name: \"Offender given a drugs possession warning\" },\n  { code: \"penalty-notice-issued\", name: \"Offender given a penalty notice\" },\n  { code: \"community-penalty\", name: \"Offender given community sentence\" },\n  { code: \"conditional-discharge\", name: \"Offender given conditional discharge\" },\n  { code: \"suspended-sentence\", name: \"Offender given suspended prison sentence\" },\n  { code: \"imprisoned\", name: \"Offender sent to prison\" },\n  { code: \"other-court-disposal\", name: \"Offender otherwise dealt with\" },\n  { code: \"compensation\", name: \"Offender ordered to pay compensation\" },\n  { code: \"sentenced-in-another-case\", name: \"Suspect charged as part of another case\" },\n  { code: \"charged\", name: \"Suspect charged\" },\n  { code: \"not-guilty\", name: \"Defendant found not guilty\" },\n  { code: \"sent-to-crown-court\", name: \"Defendant sent to Crown Court\" },\n  { code: \"unable-to-prosecute\", name: \"Unable to prosecute suspect\" },\n  { code: \"formal-action-not-in-public-interest\", name: \"Formal action is not in the public interest\" },\n  { code: \"action-taken-by-another-organisation\", name: \"Action to be taken by another organisation\" },\n  { code: \"further-investigation-not-in-public-interest\", name: \"Further investigation is not in the public interest\" },\n  { code: \"under-investigation\", name: \"Under investigation\" },\n  { code: \"status-update-unavailable\", name: \"Status update unavailable\" },\n];\n\nexport const allCrime = {\n  url: 'all-crime',\n  name: 'All crime'\n};\n\nexport const categoryColors = {\n  \"all-crime\": \"#d17f68\",\n  \"anti-social-behaviour\": \"#73b638\",\n  \"bicycle-theft\": \"#a45dcf\",\n  \"burglary\": \"#5fbc6e\",\n  \"criminal-damage-arson\": \"#c0489a\",\n  \"drugs\": \"#4b7d3c\",\n  \"other-theft\": \"#666dc6\",\n  \"possession-of-weapons\": \"#d99938\",\n  \"public-order\": \"#5e99d2\",\n  \"robbery\": \"#cc4f32\",\n  \"shoplifting\": \"#49b9a9\",\n  \"theft-from-the-person\": \"#c7496a\",\n  \"vehicle-crime\": \"#adac4d\",\n  \"violent-crime\": \"#c581bb\",\n  \"other-crime\": \"#8b6c2f\",\n};","import {\n  categoryColors,\n} from '../../utils/constants';\n\nexport const SAVE_LOCATION = 'containers/MapPage/actions/SAVE_LOCATION';\n\nexport const FILTER_CRIME_CIRCLES = 'containers/MapPage/actions/FILTER_CRIME_CIRCLES';\n\nexport function saveLocation (data) {\n  return {\n    type: SAVE_LOCATION,\n    data,\n  }\n}\n\nexport function filterCrimeCircles (crimes = [], categories = []) {\n  const values = Object.values(crimes.reduce((acc, ele) => {\n    const {\n      category,\n      location: {\n        latitude,\n        longitude,\n        street = {},\n      } = {},\n    } = ele;\n\n    if (categories.length === 0 || categories.find((cat) => cat === category)) {\n      if (!acc[street.id]) {\n        return {\n          ...acc,\n          [street.id]: {\n            category,\n            fillColor: categoryColors[category],\n            street,\n            count: 1,\n            latlng: [parseFloat(latitude), parseFloat(longitude)],\n          },\n        };\n      } else {\n        return {\n          ...acc,\n          [street.id]: {\n            ...acc[street.id],\n            count: acc[street.id].count + 1,\n          },\n        };\n      }\n    }\n    return acc;\n  }, {}));\n\n  const max = Math.max(...values.map((ele) => ele.count));\n\n  const data = values.map((ele) => ({\n    ...ele,\n    opacity: ((ele.count - (ele.count%100))/100 > 0) ? 1 : (((ele.count - (ele.count%10))/10 > 0) ? 0.75 : 0.5),\n    radius: (25 / max) * ele.count,\n  }));\n\n  return {\n    type: FILTER_CRIME_CIRCLES,\n    data,\n  }\n}","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst ModalDiv = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  .modal-title {\n    position: fixed;\n    top: 7rem;\n    width: 100%;\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n\n    .title {\n      display: inline-block;\n      width: calc(100% - 2rem);\n    }\n\n    .close {\n      display: inline-block;\n      width: 2rem;\n      font-size: large;\n      font-weight: bold;    \n      border: 0;\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    width: 100%;\n    min-height: 10rem;\n    // height: calc(50% - 6rem);\n    overflow: auto;\n    top: 10rem;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  // .modal-footer {\n  //   position: fixed;\n  //   top: calc(50% - 6rem + 10rem);\n  //   height: 3rem;\n  //   background-color: white;\n  //   width: 100%;\n  //   line-height: 3rem;\n  //   vertical-align: middle;\n  //   text-align: center;\n  //   border-top: 1px solid black;\n  //   box-sizing: border-box;\n\n  //   .close {\n  //     background-color: black;\n  //     color: white;\n  //     font-weight: bolder;\n  //     padding: 0.5rem 1rem;\n  //     border: 0;\n  //   }\n  // }\n`;\n\nconst Modal = ({ title, show, onClose, children }: {\n  title: string,\n  show: boolean,\n  onClose?: Function,\n  children: any,\n}) => (\n  <ModalDiv className={`display-${show ? 'block' : 'none'}`}>\n    <div className=\"modal-title\">\n      <div className=\"title\">{ title }</div>\n      { onClose && <button className=\"close\" onClick={onClose}>X</button> }\n    </div>\n    <div className=\"modal-main\">\n      { children }\n    </div>\n  </ModalDiv>\n);\n\nexport default Modal;","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst TableDiv = styled.div`\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  // border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n  }\n\n  .td {\n    display: table-cell;\n  }\n`;\n\nconst Th = ({ children }: { children: any }) => (<div className=\"th\">{ children }</div>);\n\nconst Td = ({ children }: { children: any }) => (<div className=\"td\">{ children }</div>);\n\nconst Tr = ({ children }: { children: Array<any> }) => (<div className=\"tr\">{ children }</div>);\n\nconst Table = ({ children }: { children: Array<typeof Tr> }) => (<TableDiv>{ children }</TableDiv>);\n\n\nexport {\n  Table,\n  Tr, Th, Td,\n};\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport Modal from './modal';\n\nimport iu from '../assets/iu.gif'\nimport boa from '../assets/boa.gif';\n\nconst LoadingDiv = styled.div` \n  img {\n    width: 100%;\n  }\n`;\n\nconst Loading = ({ loading }: { loading: boolean }) => (\n  <Modal\n    title=\"Loading...\"\n    show={loading}\n  >\n    <LoadingDiv>\n      <img src={Math.round(Math.random()) % 2 === 0 ? boa : iu} alt=\"loading...\" />\n    </LoadingDiv>\n  </Modal>\n);\n\nexport default Loading;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport Modal from './modal';\n\nconst MessageDiv = styled.div`\n  margin: 1rem;\n  padding: 1rem 0.5rem;\n`;\n\nclass Message extends React.PureComponent {\n  static propTyeps = {\n    message: PropTypes.string,\n  }\n\n  constructor() {\n    super();\n\n    this.state = {\n      show: false,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.message !== this.props.message) {\n      this.toggleModal();\n    }\n  }\n\n  toggleModal = () => this.setState({ show: !this.state.show })\n\n  render() {\n    return (<Modal\n      title=\"Something goes wrong\"\n      show={this.state.show}\n      onClose={this.toggleModal}\n      >\n        <MessageDiv>\n          {this.props.message}\n        </MessageDiv>\n      </Modal>);\n  }\n}\n\nexport default Message;","// @flow\n\nimport React from 'react';\n\nimport styled from 'styled-components';\n\nconst DefaultSelect = styled.select`\n  border: 1px solid lightgray;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  background-color: white;\n  font-family: inherit;\n`;\n\nconst Select = ({ id, value, options, onChange, className }: {\n  id: string | number,\n  value: any,\n  className: string,\n  options: Array<{ value: any, text?: string }>,\n  onChange: Function,\n}) => \n(<DefaultSelect id={id} onChange={onChange} value={value} className={className}>\n  {\n    options && options.map(({value: val, text = val}) => <option key={val} value={val}>{text}</option>)\n  }\n</DefaultSelect>);\n\nexport default Select;\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst DefaultButton = styled.button`\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.3rem 1rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n  font-family: inherit;\n`;\n\nconst Button = ({ onClick, className, children }: { onClick: Function, className: string, children: any }) => (\n  <DefaultButton onClick={onClick} className={className}>\n    { children }\n  </DefaultButton>\n);\n\nexport default Button;","// @flow\n\nimport React from 'react';\n\nconst Checkbox = ({ id, value, checked, className, onChange }: {\n  id: string,\n  value: any,\n  checked: boolean,\n  className: string,\n  onChange: Function,\n}) => (\n  <input\n    type=\"checkbox\"\n    id={id}\n    value={value}\n    onChange={onChange}\n    checked={checked}\n    className={className}\n  />\n);\n\nexport default Checkbox;","// @flow\n\nimport React from 'react';\n\nimport { connect } from 'react-redux';\n\nimport {\n  searchRequest,\n} from './actions';\n\nimport SearchStyle from './style';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nimport {\n  categoryColors,\n  allCrime,\n} from '../../utils/constants';\n\nimport {\n  SearchPageProps as Props,\n  SearchPageState as State,\n} from '../../utils/types';\n\nimport {\n  Loading,\n  Select,\n  Button,\n  Checkbox,\n  Message,\n} from '../../components';\n\nclass Search extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    availability: [],\n    category: [],\n    crimes: [],\n    message: null,\n    loading: false,\n    onSelectCrimeCategory: () => {},\n    onFilterCrimeCategory: () => {},\n    onSearch: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      date: {\n        min: '',\n        max: '',\n        dates: [],\n      },\n      minmax: [],\n      crimeCheckboxes: [],\n      selectedCategory: '',\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      availability: prevAvailability,\n      category: prevCategory,\n    } = prevProps;\n\n    const {\n      availability,\n      category,\n    } = this.props;\n\n    if (JSON.stringify(prevAvailability) !== JSON.stringify(availability)){\n      const date = availability.reduce((acc, ele) => ({\n          min: (acc.min && acc.min < ele.date) ? acc.min : ele.date,\n          max: (acc.max && acc.max > ele.date) ? acc.max : ele.date,\n          dates: acc.dates ? [...acc.dates, { value: ele.date }] : [{ value: ele.date }],\n        }), {\n          ...this.state.date,\n        });\n\n      const minmax = [date.min, date.max];\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n\n    if (JSON.stringify(prevCategory) !== JSON.stringify(category)) {\n      const crimeCheckboxes = this.props.category.reduce((acc, ele) => {\n        if (ele.url !== allCrime.url) {\n          return [\n            ...acc,\n            {\n              ...ele,\n              checked: true,\n            }\n          ];\n        }\n        return acc;\n      }, []);\n\n      this.setState({\n        crimeCheckboxes,\n      });\n    }\n  }\n\n  changeDate = (type) => (evt) => {\n    const { value } = evt.target;\n\n    if(value) {\n      const minmax = [...this.state.minmax];\n      minmax[type === 'min' ? 0 : 1] = value;\n      // minmax.sort((a, b) => a > b);\n      minmax.sort((a, b) => a.localeCompare(b));\n\n      const date = {\n        ...this.state.date,\n        [type]: value,\n      };\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n  }\n\n  changeCategory = (evt) => {\n    let crimeCheckboxes = [];\n    if (evt.target.value === allCrime.url) {\n      crimeCheckboxes = this.props.category.map((ele) => {\n        return {\n          ...ele,\n          checked: true,\n        }\n      });\n    }\n\n    this.setState({\n      crimeCheckboxes,\n      selectedCategory: evt.target.value,\n    });\n  }\n\n  checkCategory = (url) => (evt) => {\n    const crimeCheckboxes = this.state.crimeCheckboxes.map((ele) => {\n      if (ele.url === url) {\n        return {\n          ...ele,\n          checked: evt.target.checked,\n        }\n      } \n      return ele;\n    });\n\n    this.setState({\n      crimeCheckboxes,\n    });\n\n    const list = crimeCheckboxes.reduce((acc, ele) => {\n      if(ele.checked) {\n        return [...acc, ele.url];\n      }\n      return acc;\n    }, []);\n\n    this.props.onFilterCrimeCategory(this.props.crimes, list);\n  }\n\n  search = (evt) => {\n    evt.preventDefault();\n\n    const {\n      minmax,\n      date,\n      selectedCategory,\n    } = this.state;\n\n    const dates = date.dates.reduce((acc, ele) => {\n      if (minmax[0] <= ele.value && ele.value <= minmax[1]) {\n        return [...acc, ele.value];\n      }\n      return acc;\n    }, []).sort((a, b) => a.localeCompare(b));\n\n    const params = {\n      url: selectedCategory || allCrime.url,\n      dates,\n    };\n\n    this.props.onSearch(params);\n  }\n\n  render() {\n    const {\n      date: {\n        min,\n        max,\n        dates = [],\n      } = {},\n      crimeCheckboxes,\n    } = this.state;\n\n    const {\n      category = [allCrime],\n      message,\n      loading,\n    } = this.props;\n\n    return (\n      <SearchStyle>\n        <form className=\"grid-container\">\n          <label htmlFor=\"select_date\" className=\"grid-item\">date</label>\n          <div className=\"grid-item select\">\n            <Select\n              onChange={this.changeDate('min')}\n              value={min}\n              options={dates}\n            />\n            <span> ~ </span>\n            <Select\n              onChange={this.changeDate('max')}\n              value={max}\n              options={dates}\n            />\n          </div>\n          <label htmlFor=\"select_category\" className=\"grid-item\">category</label>\n          <div className=\"grid-item select\">\n            <Select\n              id=\"select_category\"\n              onChange={this.changeCategory}\n              options={category}\n            />\n          </div>\n          { crimeCheckboxes &&\n          <div className=\"grid-item whole-row\">\n            {\n              crimeCheckboxes && crimeCheckboxes.map(({ url, checked, name }) => (<div className=\"each-crime\" key={url}>\n                <Checkbox\n                  value={url}\n                  id={`checkbox_${url}`}\n                  onChange={this.checkCategory(url)}\n                  checked={checked}\n                />\n                <label htmlFor={`checkbox_${url}`}>{name}</label>\n                <span className=\"color\" style={{backgroundColor: categoryColors[url]}}></span>\n              </div>))\n            }\n          </div> }\n          <Button onClick={this.search} className=\"grid-item whole-row\">SEARCH</Button>\n        </form>\n        <Loading loading={loading} />\n        <Message\n          message={message}\n        />\n      </SearchStyle>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const {\n    search: {\n      category = [],\n    } = {},\n  } = state;\n  \n  return {\n    ...state.search,\n    category: category.map((ele) => ({\n      ...ele,\n      value: ele.url,\n      text: ele.name,\n    })),\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSearch: (param) => dispatch(searchRequest(param)),\n    onFilterCrimeCategory: (crimes, list) => dispatch(filterCrimeCircles(crimes, list)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","// @flow\n\nexport const LOAD_GRAPHS_REQUEST = 'containers/AnalysePage/LOAD_GRAPHS_REQUEST';\nexport const LOAD_GRAPHS_SUCCESS = 'containers/AnalysePage/LOAD_GRAPHS_SUCCESS';\nexport const LOAD_GRAPHS_FAILURE = 'containers/AnalysePage/LOAD_GRAPHS_FAILURE';\n\nexport const LOAD_NEWS_REQUEST = 'containers/AnalysePage/LOAD_NEWS_REQUEST';\nexport const LOAD_NEWS_SUCCESS = 'containers/AnalysePage/LOAD_NEWS_SUCCESS';\nexport const LOAD_NEWS_FAILURE = 'containers/AnalysePage/LOAD_NEWS_FAILURE';\n\nexport function loadGraphsRequest(id: string) {\n  return {\n    type: LOAD_GRAPHS_REQUEST,\n    id,\n  }\n}\n\nexport function loadGraphsSuccess(data: { dateGraph: Array<Object>, categoryGraph: Array<Object>, outcomeGraph: Array<Object>}) {\n  return {\n    type: LOAD_GRAPHS_SUCCESS,\n    data,\n  }\n}\n\nexport function loadGraphsFailure(message: string) {\n  return {\n    type: LOAD_GRAPHS_FAILURE,\n    message,\n  }\n}\n\nexport function loadNewsRequest(latlng: { lat: number, lng: number }) {\n  return {\n    type: LOAD_NEWS_REQUEST,\n    latlng,\n  }\n}\n\nexport function loadNewsSuccess(news: Array<Object>) {\n  return {\n    type: LOAD_NEWS_SUCCESS,\n    data: news,\n  }\n}\n\nexport function loadNewsFailure(message: string) {\n  return {\n    type: LOAD_NEWS_FAILURE,\n    message,\n  }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport styled from 'styled-components';\n\nimport {\n  Map, TileLayer,\n  Marker, Popup,\n  Circle,\n} from 'react-leaflet';\n\nimport {\n  loadGraphsRequest,\n  loadNewsRequest,\n} from '../AnalysePage/actions';\n\nimport {\n  saveLocation,\n} from './actions';\n\nconst attribution = \"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\";\nconst url = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\nconst MapStyle = styled.main`\n  order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n`;\n\nclass LeafletMap extends React.PureComponent {\n  static propTypes = {\n    latlng: PropTypes.shape({\n      lat: PropTypes.number,\n      lng: PropTypes.number,\n    }),\n    circles: PropTypes.array,\n    onSaveLocation: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      latlng: props.latlng,\n      postCode: '',\n    }\n  }\n\n  componentDidMount() {\n    if (this.map.leafletElement) {\n      this.map.leafletElement.locate();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      latlng: prevLatlng,\n    } = prevProps;\n\n    const {\n      latlng,\n    } = this.props;\n\n    if (prevLatlng !== latlng) {\n      this.setState({\n        latlng,\n      });\n    }\n  }\n\n  handleClick = (evt) => this.props.onSaveLocation(evt.latlng);\n\n  handleLocationFound = (evt) => {\n    this.setState({\n      hasLocation: true,\n      latlng: evt.latlng,\n    });\n\n    this.props.onSaveLocation(evt.latlng);\n  }\n\n  handleCircle = (id, latlng) => () => {\n    this.props.onLoadGraphRequest(id);\n    this.props.onLoadNewsRequest(latlng);\n  }\n\n  enterKeyword = (evt) => {\n    this.setState({\n      postCode: evt.target.value,\n    });\n  }\n\n  searchAddr = () => {\n    \n  }\n\n  render() {\n    const {\n      circles,\n    } = this.props;\n\n    const {\n      latlng = {},\n    } = this.state;\n\n    return (\n      <MapStyle className=\"map\">\n        <Map\n          center={latlng}\n          ref={(val) => { this.map = val; }}\n          zoom={13}\n          onClick={this.handleClick}\n          onLocationfound={this.handleLocationFound}\n        >\n          <TileLayer\n            attribution={attribution}\n            url={url}\n          />\n          { latlng &&\n          <Marker position={[latlng.lat, latlng.lng]}>\n            <Popup>\n              {`You clicked here!!\n              Latitude: ${latlng.lat}\n              Longitude: ${latlng.lng}`}\n            </Popup>\n          </Marker> }\n          {\n            circles && circles.map(({latlng, street, radius, count, opacity = 0.5, fillColor}) => \n            <Circle\n              fillColor={fillColor}\n              fillOpacity={opacity}\n              stroke={false}\n              radius={radius < 10 ? radius * 25 : 250}\n              center={latlng}\n              key={latlng}\n              onClick={this.handleCircle(street.id, latlng)}\n            >\n              <Popup>\n              {`Street Id: ${street.id}\n              Street Name: ${street.name}\n              Crime Count: ${count}`}\n              </Popup>\n            </Circle>)\n          }\n        </Map>\n      </MapStyle>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.map,\n  };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSaveLocation: (latlng) => dispatch(saveLocation(latlng)),\n    onLoadGraphRequest: (id) => dispatch(loadGraphsRequest(id)),\n    onLoadNewsRequest: (latlng) => dispatch(loadNewsRequest(latlng)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeafletMap);\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport {\n  Table, Tr, Th, Td,\n} from '../../components';\n\nimport {\n  NewsProps as Props,\n} from '../../utils/types';\n\nconst NewsStyle = styled.div`\n  .tr {\n    line-height: 2rem;\n\n    .th, .td {\n      padding: 0 0.5rem;\n      font-size: smaller;\n    }\n  }\n`;\n\nconst News = ({ news }: Props) => (\n  <NewsStyle>\n    {\n      news && news.map(({id, sectionName, pillarName, webTitle, webUrl, webPublicationDate }) =>\n        (<Table key={id}>\n          <Tr>\n            <Th>Date</Th>\n            <Td>{ new Date(webPublicationDate).toLocaleDateString() }</Td>\n          </Tr>\n          <Tr>\n            <Th>Section</Th>\n            <Td>{ sectionName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Pillar</Th>\n            <Td>{ pillarName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Title</Th>\n            <Td><a href={webUrl} target=\"_new\">{ webTitle }</a></Td>\n          </Tr>\n        </Table>\n      ))\n    }\n  </NewsStyle>\n);\n\nexport default News;","// @flow\n\nimport React from 'react';\n\nimport {\n  LineChart, Line,\n  BarChart, Bar,\n  XAxis, YAxis,\n  Tooltip,\n  CartesianGrid,\n} from 'recharts';\n\nimport {\n  GraphProps as Props,\n} from '../../utils/types';\n\nconst Graphs = (props: Props) => {\n  const {\n    date,\n    category,\n    outcome,\n  } = props;\n  \n  const width = window.innerWidth - 35;\n\n  return (<div>\n    { date && date.length > 0 && \n    <div>\n      <p>The number of crimes per Date</p>\n      <LineChart\n        width={width}\n        height={width}\n        data={date}\n      >\n        <XAxis dataKey=\"date\" />\n        <YAxis type=\"number\" yAxisId={0} />\n        <Tooltip />\n        <CartesianGrid stroke=\"#f5f5f5\" />\n        <Line type=\"monotone\" dataKey=\"count\" stroke=\"#ff7300\" yAxisId={0} />\n      </LineChart>\n      </div>\n    }\n    { category && category.length > 1 &&\n      <div>\n        <p>The number of crimes per Category</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={category}\n        >\n          <XAxis dataKey=\"category\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#387908\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n    { outcome && outcome.length > 0 &&\n      <div>\n        <p>The ratio of crimes per Outcome</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={outcome}\n        >\n          <XAxis dataKey=\"outcome\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#38abc8\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n  </div>);\n}\n\nexport default Graphs;\n","// @flow\n\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport News from './news';\nimport Graphs from './graphs';\n\nimport {\n  AnalysePageProps as Props\n} from '../../utils/types';\n\nconst AnalyseStyle = styled.main`\n  order: 3;\n  padding: 1rem;\n`;\n\nclass AnalysePage extends React.PureComponent<Props> {\n  render(){\n    const {\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n      news,\n    } = this.props;\n\n    return (<AnalyseStyle>\n      { dateGraph &&\n        <section>\n          <h3>Graphs</h3>\n          <Graphs\n            date={dateGraph}\n            category={categoryGraph}\n            outcome={outcomeGraph}\n          />\n        </section>\n      }\n      { news &&\n        <section>\n          <h3>News</h3>\n          <News\n            news={news}\n          />\n        </section>\n      }\n    </AnalyseStyle>);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.analyse,\n  }\n}\n\nexport default connect(mapStateToProps)(AnalysePage);","// @flow\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport Search from './SearchPage/page';\nimport LeafletMap from './MapPage/page';\nimport Analyse from './AnalysePage/page';\n\nconst AppDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  header {\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n  }\n`;\n\ntype Props = {};\n\nclass App extends Component<Props> {\n  render() {\n    return (\n      <AppDiv>\n        <header>\n          <div className=\"title\">\n            CRIME MAP\n          </div>\n          <div className=\"email\">\n            <span className=\"smaller\">Contact me: melancholy8914@gmail.com</span>\n          </div>\n        </header>\n        <Search />\n        <LeafletMap />\n        <Analyse />\n      </AppDiv>\n    );\n  }\n}\n\nexport default App;\n","// @flow\nimport update from 'immutability-helper';\n\nimport {\n  LOAD_AVAILABILITY_SUCCESS,\n  LOAD_AVAILABILITY_FAILURE,\n  LOAD_CRIME_CATEGORY_SUCCESS,\n  LOAD_CRIME_CATEGORY_FAILURE,\n  SEARCH_REQUEST,\n  SEARCH_SUCCESS,\n  SEARCH_FAILURE,\n} from './actions';\n\nimport {\n  SearchReducerState as State,\n  Action,\n} from '../../utils/types';\n\nconst initialState = {\n  availability: [],\n  category: [],\n  crimes: [],\n  message: '',\n  loading: false,\n};\n\nexport default function searchReducer(state: State = initialState, action: Action): State {\n  switch(action.type) {\n    case SEARCH_REQUEST:\n      return update(state, {\n        $merge: {\n          ...action.data,\n          loading: true\n        }\n      });\n    case LOAD_AVAILABILITY_SUCCESS:\n      return update(state, {\n        availability: {$set: action.data}\n      });\n    case LOAD_CRIME_CATEGORY_SUCCESS:\n      return update(state, {\n        category: {$set: action.data},\n      });\n    case SEARCH_SUCCESS:\n      return update(state, {\n        crimes: {$set: action.data},\n        loading: {$set: false},\n      });\n    case LOAD_AVAILABILITY_FAILURE:\n    case LOAD_CRIME_CATEGORY_FAILURE:\n      return update(state, {\n        message: {$set: action.message}\n      });\n    case SEARCH_FAILURE:\n      return update(state, {\n        message: {$set: action.message},\n        loading: {$set: false},\n      });\n    default:\n      return state;\n  }\n}\n","import update from 'immutability-helper';\n\nimport {\n  SAVE_LOCATION,\n  FILTER_CRIME_CIRCLES,\n} from './actions';\n\nconst initialState = {\n  latlng: {\n    lat: 51.505,\n    lng: -0.09,\n  },\n  circles: [],\n};\n\nexport default function mapReducer(state = initialState, action){\n  switch(action.type) {\n    case SAVE_LOCATION:\n      return update(state, {\n        latlng: {$set: action.data},\n      });\n    case FILTER_CRIME_CIRCLES:\n      return update(state, {\n        circles: {$set: action.data},\n      });\n    default:\n      return state;\n  }\n}\n","// @flow\n\nimport update from 'immutability-helper';\n\nimport {\n  LOAD_GRAPHS_SUCCESS,\n  LOAD_GRAPHS_FAILURE,\n  LOAD_NEWS_SUCCESS,\n  LOAD_NEWS_FAILURE,\n} from './actions';\n\nimport {\n  AnalyseReducerState as State,\n  Action,\n} from '../../utils/types';\n\nconst initialState = {\n  dateGraph: [],\n  categoryGraph: [],\n  outcomeGraph: [],\n  news: [],\n  message: '',\n}\n\nexport default function analyseReducer(state: State = initialState, action: Action): State {\n  switch(action.type){\n    case LOAD_GRAPHS_SUCCESS:\n      return update(state, {\n        $merge: {\n          ...action.data\n        }\n      });\n    case LOAD_NEWS_SUCCESS:\n      return update(state, {\n        news: {$set: action.data},\n      });\n    case LOAD_NEWS_FAILURE:\n    case LOAD_GRAPHS_FAILURE:\n      return update(state, {\n        message: {$set: action.message},\n      });\n    default:\n      return state;\n  }\n};\n","// @flow\n\nimport { combineReducers } from 'redux';\n\nimport searchReducer from './SearchPage/reducer';\nimport mapReducer from './MapPage/reducer';\nimport analyseReducer from './AnalysePage/reducer';\n\nexport default combineReducers({\n  map: mapReducer,\n  search: searchReducer,\n  analyse: analyseReducer,\n});","import axios from 'axios';\n\nexport const api = {\n  police: 'https://data.police.uk/api',\n  guardian: 'https://content.guardianapis.com/search',\n  mapquest: 'https://open.mapquestapi.com/geocoding/v1',\n};\n\nexport const keys = {\n  guardian: '36ecd8a8-f9be-4d95-9643-4095fae41301',\n  mapquest: '7qAl9AvfefdHSIOkkLrVvSc466ZoHenG',\n}\n\nasync function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error();\n    error.response = response;\n\n    try {\n      const body = await response.json();\n      error.body = body;\n      error.message = body.message || response.statusText;\n\n      throw error;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction parseJSON(response){\n  if(response.status === 204 || response.status === 205){\n    return null;\n  }\n\n  return response;\n}\n\nexport function request(path, options) {\n  return axios.get(path, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}","// @flow\n\nimport { fork, put, takeLatest, select, all } from 'redux-saga/effects';\nimport { api, request } from '../../utils/request';\n\nimport {\n  LOAD_CRIME_CATEGORY_REQUEST,\n  SEARCH_REQUEST,\n  loadAvailabilitySuccess,\n  loadAvailabilityFailure,\n  loadCrimeCategorySuccess,\n  loadCrimeCategoryFailure,\n  searchSuccess,\n  searchFailure,\n} from './actions';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nfunction* loadAvailability() {\n  try {\n    const response = yield request(`${api.police}/crimes-street-dates`);\n\n    yield put(loadAvailabilitySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadAvailabilityFailure(err.message));\n  }\n}\n\nfunction* loadCrimeCategory({ date: _date } = {}) {\n  try {\n    const date = _date || (new Date()).toLocaleDateString();\n\n    const response = yield request(`${api.police}/crime-categories?date=${date}`);\n\n    yield put(loadCrimeCategorySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadCrimeCategoryFailure(err.message));\n  }\n}\n\nfunction* search({ data: { url, dates }} = {}) {\n  try {\n    const { lat, lng } = yield select((state) => state.map.latlng);\n\n    if (lat && lng && dates && dates.length > 0) {\n      const responses = yield all(dates.map((date) => request(`${api.police}/crimes-street/${url}?lat=${lat}&lng=${lng}&date=${date}`)));\n\n      const data = responses && responses.reduce((acc, response) => {\n        return [...acc, ...(response && response.data)];\n      }, []);\n\n      yield put(searchSuccess(data));\n      yield put(filterCrimeCircles(data))\n    } else {\n      yield put(searchFailure('There is no position info! Please, click the map and tell me where you want to know'));\n    }\n  } catch(err) { \n    console.log(err);\n    yield put(searchFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any> {\n  yield fork(loadAvailability);\n  yield fork(loadCrimeCategory);\n\n  yield takeLatest(LOAD_CRIME_CATEGORY_REQUEST, loadCrimeCategory);\n  yield takeLatest(SEARCH_REQUEST, search);\n}","// @flow\n\nimport { takeLatest, select, put } from 'redux-saga/effects';\nimport { api, request, keys } from '../../utils/request';\n\nimport {\n  LOAD_GRAPHS_REQUEST,\n  loadGraphsSuccess,\n  loadGraphsFailure,\n  LOAD_NEWS_REQUEST,\n  loadNewsFailure,\n  loadNewsSuccess,\n} from './actions';\n\nfunction* loadGraph({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    const dateGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.month]: acc[ele.month] >= 0 ? acc[ele.month] + 1 : 0,\n    }), {})).map(([date, count]) => ({ date, count }));\n\n    const categoryGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.category]: acc[ele.category] >= 0 ? acc[ele.category] + 1 : 0,\n    }), {})).map(([category, count]) => ({ category, count }));\n\n    const outcomeGraph = Object.entries(selectedCrimes.reduce((acc, ele) => {\n      const {\n        outcome_status,\n        outcomes: {\n          category: outcome,\n        } = outcome_status || {},\n      } = ele;\n\n      if (outcome) {\n        return {\n          ...acc,\n          [outcome]: acc[outcome] >= 0 ? acc[outcome] + 1 : 0,\n        };\n      }\n      return acc;\n    }, {})).map(([outcome, count]) => ({ outcome, count }));\n\n    yield put(loadGraphsSuccess({\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n    }));\n  } catch(err) {\n    yield put(loadGraphsFailure(err.message));\n  }\n}\n\nfunction* loadNews({ latlng }) {\n  try {\n    const addressUrl = `${api.mapquest}/reverse?key=${keys.mapquest}&location=${latlng.join(',')}&includeRoadMetadata=true&includeNearestIntersection=true`;\n\n    const {\n      data: {\n        results: address = [],\n      } = {},\n    } = yield request(addressUrl);\n\n    const { locations = [] } = address[0];\n    const { street, adminArea5, postalCode } = locations[0];\n\n    const query = `${adminArea5} AND ${street ? street : postalCode}`;\n    const dates = yield select((state) => state.search.dates);\n\n    const newsUrl = `${api.guardian}?q=${query}&from-date=${dates[0]}-01&api-key=${keys.guardian}`;\n\n    const {\n      data: {\n        response: {\n          results = [],\n        },\n      } = {},\n    } = yield request(newsUrl);\n\n    results.sort((a, b) => a.webPublicationDate.localeCompare(b.webPublicationDate));\n\n    yield put(loadNewsSuccess(results));\n  } catch (err) {\n    console.error(err);\n    yield put(loadNewsFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any>{\n  yield takeLatest(LOAD_GRAPHS_REQUEST, loadGraph);\n  yield takeLatest(LOAD_NEWS_REQUEST, loadNews);\n}","// @flow\n\nimport { all, fork } from 'redux-saga/effects';\n\nimport searchSaga from './SearchPage/saga';\nimport analyseSaga from './AnalysePage/saga';\n\nexport default function* sagas (): Generator<any, void, any>  {\n  yield all([\n    searchSaga,\n    analyseSaga\n  ].map(fork));\n}","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport './index.css';\n\nimport App from './containers/App';\n\nimport reducers from './containers/reducers';\nimport sagas from './containers/sagas';\n\nimport * as serviceWorker from './serviceWorker';\n\nconst saga = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(saga)),\n);\n\nsaga.run(sagas);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}