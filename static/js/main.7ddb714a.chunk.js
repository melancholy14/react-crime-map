(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,n){e.exports=n.p+"static/media/iu.be3a3a56.gif"},179:function(e,t,n){e.exports=n.p+"static/media/boa.3096abdc.gif"},189:function(e,t,n){e.exports=n(335)},196:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(63),o=n.n(c),i=n(53),l=n(51),s=n(188),u=n(175),m=(n(196),n(38)),d=n(39),h=n(41),g=n(40),p=n(42),f=n(15),b=n(16),v=n(36),y=n(13),E=n(37),O="containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS",j="containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE",w="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST",x="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS",k="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE",C="containers/SearchPage/actions/SEARCH_REQUEST",S="containers/SearchPage/actions/SEARCH_SUCCESS",A="containers/SearchPage/actions/SEARCH_FAILURE";function N(e){return{type:S,data:e}}function L(e){return{type:A,message:e}}function _(){var e=Object(f.a)(["\n  order: 1;\n  margin: 0.5rem;\n  padding: 0.5rem;\n\n  .grid-container {\n    display: grid;\n    grid-template-rows: 2rem 2rem auto 2rem;\n    grid-template-columns: 4.5rem auto;\n\n    .grid-item {\n      padding: 0.5rem;\n\n      &.select {\n        padding: 0.25rem 0.5rem;\n      }\n\n      &.whole-row {\n        grid-column-start: 1;\n        grid-column-end: 3;\n\n        .each-crime {\n          display: inline-block;\n          min-width: 50%;\n          font-size: small;\n          line-height: 1rem;\n          vertical-align: middle;\n\n          label {\n            font-size: smaller;\n            font-weight: bolder;\n          }\n\n          .color {\n            width: 0.75rem;\n            height: 0.75rem;\n            display: inline-block;\n            border-radius: 0.5rem;\n            margin: 0 0.3rem;\n          }\n        }\n      }\n    }\n\n    & > label {\n      font-size: smaller;\n      text-transform: capitalize;\n      font-weight: bold;\n    }\n  }\n\n  button {     \n    padding: 0.3rem 1rem;\n  }\n"]);return _=function(){return e},e}var R=b.a.aside(_()),D={url:"all-crime",name:"All crime"},P={"all-crime":"#d17f68","anti-social-behaviour":"#73b638","bicycle-theft":"#a45dcf",burglary:"#5fbc6e","criminal-damage-arson":"#c0489a",drugs:"#4b7d3c","other-theft":"#666dc6","possession-of-weapons":"#d99938","public-order":"#5e99d2",robbery:"#cc4f32",shoplifting:"#49b9a9","theft-from-the-person":"#c7496a","vehicle-crime":"#adac4d","violent-crime":"#c581bb","other-crime":"#8b6c2f"},I="containers/MapPage/actions/SAVE_LOCATION",T="containers/MapPage/actions/FILTER_CRIME_CIRCLES";function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.values(e.reduce(function(e,n){var a=n.category,r=n.location,c=(r=void 0===r?{}:r).latitude,o=r.longitude,i=r.street,l=void 0===i?{}:i;return 0===t.length||t.find(function(e){return e===a})?e[l.id]?Object(y.a)({},e,Object(v.a)({},l.id,Object(y.a)({},e[l.id],{count:e[l.id].count+1}))):Object(y.a)({},e,Object(v.a)({},l.id,{category:a,fillColor:P[a],street:l,count:1,latlng:[parseFloat(c),parseFloat(o)]})):e},{})),a=Math.max.apply(Math,Object(E.a)(n.map(function(e){return e.count}))),r=n.map(function(e){return Object(y.a)({},e,{opacity:(e.count-e.count%100)/100>0?1:(e.count-e.count%10)/10>0?.75:.5,radius:25/a*e.count})});return{type:T,data:r}}function M(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  .modal-title {\n    position: fixed;\n    top: 7rem;\n    width: 100%;\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n\n    .title {\n      display: inline-block;\n      width: calc(100% - 2rem);\n    }\n\n    .close {\n      display: inline-block;\n      width: 2rem;\n      font-size: large;\n      font-weight: bold;    \n      border: 0;\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    width: 100%;\n    min-height: 10rem;\n    // height: calc(50% - 6rem);\n    overflow: auto;\n    top: 10rem;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  // .modal-footer {\n  //   position: fixed;\n  //   top: calc(50% - 6rem + 10rem);\n  //   height: 3rem;\n  //   background-color: white;\n  //   width: 100%;\n  //   line-height: 3rem;\n  //   vertical-align: middle;\n  //   text-align: center;\n  //   border-top: 1px solid black;\n  //   box-sizing: border-box;\n\n  //   .close {\n  //     background-color: black;\n  //     color: white;\n  //     font-weight: bolder;\n  //     padding: 0.5rem 1rem;\n  //     border: 0;\n  //   }\n  // }\n"]);return M=function(){return e},e}var U=b.a.div(M()),F=function(e){var t=e.title,n=e.show,a=e.onClose,c=e.children;return r.a.createElement(U,{className:"display-".concat(n?"block":"none")},r.a.createElement("div",{className:"modal-title"},r.a.createElement("div",{className:"title"},t),a&&r.a.createElement("button",{className:"close",onClick:a},"X")),r.a.createElement("div",{className:"modal-main"},c))};function $(){var e=Object(f.a)(["\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  // border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n  }\n\n  .td {\n    display: table-cell;\n  }\n"]);return $=function(){return e},e}var q=b.a.div($()),z=function(e){var t=e.children;return r.a.createElement("div",{className:"th"},t)},H=function(e){var t=e.children;return r.a.createElement("div",{className:"td"},t)},K=function(e){var t=e.children;return r.a.createElement("div",{className:"tr"},t)},W=function(e){var t=e.children;return r.a.createElement(q,null,t)},J=n(178),Y=n.n(J),B=n(179),Q=n.n(B);function V(){var e=Object(f.a)([" \n  img {\n    width: 100%;\n  }\n"]);return V=function(){return e},e}var X=b.a.div(V()),Z=function(e){var t=e.loading;return r.a.createElement(F,{title:"Loading...",show:t},r.a.createElement(X,null,r.a.createElement("img",{src:Math.round(Math.random())%2===0?Q.a:Y.a,alt:"loading..."})))},ee=n(0),te=n.n(ee);function ne(){var e=Object(f.a)(["\n  margin: 1rem;\n  padding: 1rem 0.5rem;\n"]);return ne=function(){return e},e}var ae=b.a.div(ne()),re=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).toggleModal=function(){return e.setState({show:!e.state.show})},e.state={show:!1},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){e.message!==this.props.message&&this.toggleModal()}},{key:"render",value:function(){return r.a.createElement(F,{title:"Something goes wrong",show:this.state.show,onClose:this.toggleModal},r.a.createElement(ae,null,this.props.message))}}]),t}(r.a.PureComponent);re.propTyeps={message:te.a.string};var ce=re;function oe(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  background-color: white;\n  font-family: inherit;\n"]);return oe=function(){return e},e}var ie=b.a.select(oe()),le=function(e){var t=e.id,n=e.value,a=e.options,c=e.onChange,o=e.className;return r.a.createElement(ie,{id:t,onChange:c,value:n,className:o},a&&a.map(function(e){var t=e.value,n=e.text,a=void 0===n?t:n;return r.a.createElement("option",{key:t,value:t},a)}))};function se(){var e=Object(f.a)(["\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.3rem 1rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n  font-family: inherit;\n"]);return se=function(){return e},e}var ue=b.a.button(se()),me=function(e){var t=e.onClick,n=e.className,a=e.children;return r.a.createElement(ue,{onClick:t,className:n},a)},de=function(e){var t=e.id,n=e.value,a=e.checked,c=e.className,o=e.onChange;return r.a.createElement("input",{type:"checkbox",id:t,value:n,onChange:o,checked:a,className:c})},he=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).changeDate=function(e){return function(t){var a=t.target.value;if(a){var r=Object(E.a)(n.state.minmax);r["min"===e?0:1]=a,r.sort(function(e,t){return e.localeCompare(t)});var c=Object(y.a)({},n.state.date,Object(v.a)({},e,a));n.setState({minmax:r,date:c})}}},n.changeCategory=function(e){var t=[];e.target.value===D.url&&(t=n.props.category.map(function(e){return Object(y.a)({},e,{checked:!0})})),n.setState({crimeCheckboxes:t,selectedCategory:e.target.value})},n.checkCategory=function(e){return function(t){var a=n.state.crimeCheckboxes.map(function(n){return n.url===e?Object(y.a)({},n,{checked:t.target.checked}):n});n.setState({crimeCheckboxes:a});var r=a.reduce(function(e,t){return t.checked?Object(E.a)(e).concat([t.url]):e},[]);n.props.onFilterCrimeCategory(n.props.crimes,r)}},n.search=function(e){e.preventDefault();var t=n.state,a=t.minmax,r=t.date,c=t.selectedCategory,o=r.dates.reduce(function(e,t){return a[0]<=t.value&&t.value<=a[1]?Object(E.a)(e).concat([t.value]):e},[]).sort(function(e,t){return e.localeCompare(t)}),i={url:c||D.url,dates:o};n.props.onSearch(i)},n.state={date:{min:"",max:"",dates:[]},minmax:[],crimeCheckboxes:[],selectedCategory:""},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.availability,n=e.category,a=this.props,r=a.availability,c=a.category;if(JSON.stringify(t)!==JSON.stringify(r)){var o=r.reduce(function(e,t){return{min:e.min&&e.min<t.date?e.min:t.date,max:e.max&&e.max>t.date?e.max:t.date,dates:e.dates?Object(E.a)(e.dates).concat([{value:t.date}]):[{value:t.date}]}},Object(y.a)({},this.state.date)),i=[o.min,o.max];this.setState({minmax:i,date:o})}if(JSON.stringify(n)!==JSON.stringify(c)){var l=this.props.category.reduce(function(e,t){return t.url!==D.url?Object(E.a)(e).concat([Object(y.a)({},t,{checked:!0})]):e},[]);this.setState({crimeCheckboxes:l})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=(n=void 0===n?{}:n).min,c=n.max,o=n.dates,i=void 0===o?[]:o,l=t.crimeCheckboxes,s=this.props,u=s.category,m=void 0===u?[D]:u,d=s.message,h=s.loading;return r.a.createElement(R,null,r.a.createElement("form",{className:"grid-container"},r.a.createElement("label",{htmlFor:"select_date",className:"grid-item"},"date"),r.a.createElement("div",{className:"grid-item select"},r.a.createElement(le,{onChange:this.changeDate("min"),value:a,options:i}),r.a.createElement("span",null," ~ "),r.a.createElement(le,{onChange:this.changeDate("max"),value:c,options:i})),r.a.createElement("label",{htmlFor:"select_category",className:"grid-item"},"category"),r.a.createElement("div",{className:"grid-item select"},r.a.createElement(le,{id:"select_category",onChange:this.changeCategory,options:m})),l&&r.a.createElement("div",{className:"grid-item whole-row"},l&&l.map(function(t){var n=t.url,a=t.checked,c=t.name;return r.a.createElement("div",{className:"each-crime",key:n},r.a.createElement(de,{value:n,id:"checkbox_".concat(n),onChange:e.checkCategory(n),checked:a}),r.a.createElement("label",{htmlFor:"checkbox_".concat(n)},c),r.a.createElement("span",{className:"color",style:{backgroundColor:P[n]}}))})),r.a.createElement(me,{onClick:this.search,className:"grid-item whole-row"},"SEARCH")),r.a.createElement(Z,{loading:h}),r.a.createElement(ce,{message:d}))}}]),t}(r.a.PureComponent);he.defaultProps={availability:[],category:[],crimes:[],message:null,loading:!1,onSelectCrimeCategory:function(){},onFilterCrimeCategory:function(){},onSearch:function(){}};var ge=Object(i.b)(function(e){var t=e.search,n=(t=void 0===t?{}:t).category,a=void 0===n?[]:n;return Object(y.a)({},e.search,{category:a.map(function(e){return Object(y.a)({},e,{value:e.url,text:e.name})})})},function(e){return{onSearch:function(t){return e({type:C,data:t})},onFilterCrimeCategory:function(t,n){return e(G(t,n))}}})(he),pe=n(344),fe=n(347),be=n(340),ve=n(346),ye=n(345),Ee="containers/AnalysePage/LOAD_GRAPHS_REQUEST",Oe="containers/AnalysePage/LOAD_GRAPHS_SUCCESS",je="containers/AnalysePage/LOAD_GRAPHS_FAILURE",we="containers/AnalysePage/LOAD_NEWS_REQUEST",xe="containers/AnalysePage/LOAD_NEWS_SUCCESS",ke="containers/AnalysePage/LOAD_NEWS_FAILURE";function Ce(){var e=Object(f.a)(["\n  order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n"]);return Ce=function(){return e},e}var Se=b.a.main(Ce()),Ae=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleClick=function(e){return n.props.onSaveLocation(e.latlng)},n.handleLocationFound=function(e){n.setState({hasLocation:!0,latlng:e.latlng}),n.props.onSaveLocation(e.latlng)},n.handleCircle=function(e,t){return function(){n.props.onLoadGraphRequest(e),n.props.onLoadNewsRequest(t)}},n.enterKeyword=function(e){n.setState({postCode:e.target.value})},n.searchAddr=function(){},n.state={latlng:e.latlng,postCode:""},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.map.leafletElement&&this.map.leafletElement.locate()}},{key:"componentDidUpdate",value:function(e){var t=e.latlng,n=this.props.latlng;t!==n&&this.setState({latlng:n})}},{key:"render",value:function(){var e=this,t=this.props.circles,n=this.state.latlng,a=void 0===n?{}:n;return r.a.createElement(Se,{className:"map"},r.a.createElement(pe.a,{center:a,ref:function(t){e.map=t},zoom:13,onClick:this.handleClick,onLocationfound:this.handleLocationFound},r.a.createElement(fe.a,{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&r.a.createElement(be.a,{position:[a.lat,a.lng]},r.a.createElement(ve.a,null,"You clicked here!!\n              Latitude: ".concat(a.lat,"\n              Longitude: ").concat(a.lng))),t&&t.map(function(t){var n=t.latlng,a=t.street,c=t.radius,o=t.count,i=t.opacity,l=void 0===i?.5:i,s=t.fillColor;return r.a.createElement(ye.a,{fillColor:s,fillOpacity:l,stroke:!1,radius:c<10?25*c:250,center:n,key:n,onClick:e.handleCircle(a.id,n)},r.a.createElement(ve.a,null,"Street Id: ".concat(a.id,"\n              Street Name: ").concat(a.name,"\n              Crime Count: ").concat(o)))})))}}]),t}(r.a.PureComponent),Ne=Object(i.b)(function(e){return Object(y.a)({},e.map)},function(e){return{onSaveLocation:function(t){return e({type:I,data:t})},onLoadGraphRequest:function(t){return e(function(e){return{type:Ee,id:e}}(t))},onLoadNewsRequest:function(t){return e(function(e){return{type:we,latlng:e}}(t))}}})(Ae);function Le(){var e=Object(f.a)(["\n  .tr {\n    line-height: 2rem;\n\n    .th, .td {\n      padding: 0 0.5rem;\n      font-size: smaller;\n    }\n  }\n"]);return Le=function(){return e},e}var _e=b.a.div(Le()),Re=function(e){var t=e.news;return r.a.createElement(_e,null,t&&t.map(function(e){var t=e.id,n=e.sectionName,a=e.pillarName,c=e.webTitle,o=e.webUrl,i=e.webPublicationDate;return r.a.createElement(W,{key:t},r.a.createElement(K,null,r.a.createElement(z,null,"Date"),r.a.createElement(H,null,new Date(i).toLocaleDateString())),r.a.createElement(K,null,r.a.createElement(z,null,"Section"),r.a.createElement(H,null,n)),r.a.createElement(K,null,r.a.createElement(z,null,"Pillar"),r.a.createElement(H,null,a)),r.a.createElement(K,null,r.a.createElement(z,null,"Title"),r.a.createElement(H,null,r.a.createElement("a",{href:o,target:"_new"},c))))}))},De=n(341),Pe=n(166),Ie=n(167),Te=n(337),Ge=n(342),Me=n(314),Ue=n(343),Fe=n(336),$e=function(e){var t=e.date,n=e.category,a=e.outcome,c=window.innerWidth-35;return r.a.createElement("div",null,t&&t.length>0&&r.a.createElement("div",null,r.a.createElement("p",null,"The number of crimes per Date"),r.a.createElement(De.a,{width:c,height:c,data:t},r.a.createElement(Pe.a,{dataKey:"date"}),r.a.createElement(Ie.a,{type:"number",yAxisId:0}),r.a.createElement(Te.a,null),r.a.createElement(Ge.a,{stroke:"#f5f5f5"}),r.a.createElement(Me.a,{type:"monotone",dataKey:"count",stroke:"#ff7300",yAxisId:0}))),n&&n.length>1&&r.a.createElement("div",null,r.a.createElement("p",null,"The number of crimes per Category"),r.a.createElement(Ue.a,{width:c,height:c,data:n},r.a.createElement(Pe.a,{dataKey:"category"}),r.a.createElement(Ie.a,{type:"number",yAxisId:0}),r.a.createElement(Te.a,null),r.a.createElement(Ge.a,{stroke:"#f5f5f5"}),r.a.createElement(Fe.a,{type:"monotone",dataKey:"count",fill:"#387908",yAxisId:0}))),a&&a.length>0&&r.a.createElement("div",null,r.a.createElement("p",null,"The ratio of crimes per Outcome"),r.a.createElement(Ue.a,{width:c,height:c,data:a},r.a.createElement(Pe.a,{dataKey:"outcome"}),r.a.createElement(Ie.a,{type:"number",yAxisId:0}),r.a.createElement(Te.a,null),r.a.createElement(Ge.a,{stroke:"#f5f5f5"}),r.a.createElement(Fe.a,{type:"monotone",dataKey:"count",fill:"#38abc8",yAxisId:0}))))};function qe(){var e=Object(f.a)(["\n  order: 3;\n  padding: 1rem;\n"]);return qe=function(){return e},e}var ze=b.a.main(qe()),He=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dateGraph,n=e.categoryGraph,a=e.outcomeGraph,c=e.news;return r.a.createElement(ze,null,t&&r.a.createElement("section",null,r.a.createElement("h3",null,"Graphs"),r.a.createElement($e,{date:t,category:n,outcome:a})),c&&r.a.createElement("section",null,r.a.createElement("h3",null,"News"),r.a.createElement(Re,{news:c})))}}]),t}(r.a.PureComponent),Ke=Object(i.b)(function(e){return Object(y.a)({},e.analyse)})(He);function We(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n\n  header {\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n  }\n"]);return We=function(){return e},e}var Je=b.a.div(We()),Ye=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(Je,null,r.a.createElement("header",null,r.a.createElement("div",{className:"title"},"CRIME MAP"),r.a.createElement("div",{className:"email"},r.a.createElement("span",{className:"smaller"},"Contact me: melancholy8914@gmail.com"))),r.a.createElement(ge,null),r.a.createElement(Ne,null),r.a.createElement(Ke,null))}}]),t}(a.Component),Be=n(25),Qe=n.n(Be),Ve={availability:[],category:[],crimes:[],message:"",loading:!1};var Xe={latlng:{lat:51.505,lng:-.09},circles:[]};var Ze={dateGraph:[],categoryGraph:[],outcomeGraph:[],news:[],message:""};var et=Object(l.combineReducers)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Qe()(e,{latlng:{$set:t.data}});case T:return Qe()(e,{circles:{$set:t.data}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Qe()(e,{$merge:Object(y.a)({},t.data,{loading:!0})});case O:return Qe()(e,{availability:{$set:t.data}});case x:return Qe()(e,{category:{$set:t.data}});case S:return Qe()(e,{crimes:{$set:t.data},loading:{$set:!1}});case j:case k:return Qe()(e,{message:{$set:t.message}});case A:return Qe()(e,{message:{$set:t.message},loading:{$set:!1}});default:return e}},analyse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Qe()(e,{$merge:Object(y.a)({},t.data)});case xe:return Qe()(e,{news:{$set:t.data}});case ke:case je:return Qe()(e,{message:{$set:t.message}});default:return e}}}),tt=n(17),nt=n.n(tt),at=n(11),rt=n(186),ct=n(187),ot=n.n(ct),it={police:"https://data.police.uk/api",guardian:"https://content.guardianapis.com/search",mapquest:"https://open.mapquestapi.com/geocoding/v1"},lt={guardian:"36ecd8a8-f9be-4d95-9643-4095fae41301",mapquest:"7qAl9AvfefdHSIOkkLrVvSc466ZoHenG"};function st(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(rt.a)(nt.a.mark(function e(t){var n,a;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=4;break}return e.abrupt("return",t);case 4:return(n=new Error).response=t,e.prev=6,e.next=9,t.json();case 9:throw a=e.sent,n.body=a,n.message=a.message||t.statusText,n;case 15:throw e.prev=15,e.t0=e.catch(6),e.t0;case 18:case"end":return e.stop()}},e,this,[[6,15]])}))).apply(this,arguments)}function mt(e){return 204===e.status||205===e.status?null:e}function dt(e,t){return ot.a.get(e,t).then(st).then(mt)}var ht=nt.a.mark(bt),gt=nt.a.mark(vt),pt=nt.a.mark(yt),ft=nt.a.mark(Et);function bt(){var e;return nt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dt("".concat(it.police,"/crimes-street-dates"));case 3:return e=t.sent,t.next=6,Object(at.c)((a=e.data,{type:O,data:a}));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.next=13,Object(at.c)((n=t.t0.message,{type:j,message:n}));case 13:case"end":return t.stop()}var n,a},ht,this,[[0,8]])}function vt(){var e,t,n,a,r=arguments;return nt.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=e.date,c.prev=1,n=t||(new Date).toLocaleDateString(),c.next=5,dt("".concat(it.police,"/crime-categories?date=").concat(n));case 5:return a=c.sent,c.next=8,Object(at.c)((i=a.data,{type:x,data:i}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.log(c.t0),c.next=15,Object(at.c)((o=c.t0.message,{type:k,message:o}));case 15:case"end":return c.stop()}var o,i},gt,this,[[1,10]])}function yt(){var e,t,n,a,r,c,o,i,l,s=arguments;return nt.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},t=e.data,n=t.url,a=t.dates,u.prev=1,u.next=4,Object(at.d)(function(e){return e.map.latlng});case 4:if(r=u.sent,c=r.lat,o=r.lng,!(c&&o&&a&&a.length>0)){u.next=18;break}return u.next=10,Object(at.a)(a.map(function(e){return dt("".concat(it.police,"/crimes-street/").concat(n,"?lat=").concat(c,"&lng=").concat(o,"&date=").concat(e))}));case 10:return i=u.sent,l=i&&i.reduce(function(e,t){return Object(E.a)(e).concat(Object(E.a)(t&&t.data))},[]),u.next=14,Object(at.c)(N(l));case 14:return u.next=16,Object(at.c)(G(l));case 16:u.next=20;break;case 18:return u.next=20,Object(at.c)(L("There is no position info! Please, click the map and tell me where you want to know"));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.log(u.t0),u.next=27,Object(at.c)(L(u.t0.message));case 27:case"end":return u.stop()}},pt,this,[[1,22]])}function Et(){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(at.b)(bt);case 2:return e.next=4,Object(at.b)(vt);case 4:return e.next=6,Object(at.e)(w,vt);case 6:return e.next=8,Object(at.e)(C,yt);case 8:case"end":return e.stop()}},ft,this)}var Ot=n(118),jt=nt.a.mark(kt),wt=nt.a.mark(Ct),xt=nt.a.mark(St);function kt(e){var t,n,a,r,c,o;return nt.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.id,i.prev=1,i.next=4,Object(at.d)(function(e){return e.search.crimes});case 4:return n=i.sent,a=n&&n.filter(function(e){var n=e.location,a=(n=void 0===n?{}:n).street;return(a=void 0===a?{}:a).id===t}),r=Object.entries(a.reduce(function(e,t){return Object(y.a)({},e,Object(v.a)({},t.month,e[t.month]>=0?e[t.month]+1:0))},{})).map(function(e){var t=Object(Ot.a)(e,2);return{date:t[0],count:t[1]}}),c=Object.entries(a.reduce(function(e,t){return Object(y.a)({},e,Object(v.a)({},t.category,e[t.category]>=0?e[t.category]+1:0))},{})).map(function(e){var t=Object(Ot.a)(e,2);return{category:t[0],count:t[1]}}),o=Object.entries(a.reduce(function(e,t){var n=t.outcome_status,a=t.outcomes,r=(a=void 0===a?n||{}:a).category;return r?Object(y.a)({},e,Object(v.a)({},r,e[r]>=0?e[r]+1:0)):e},{})).map(function(e){var t=Object(Ot.a)(e,2);return{outcome:t[0],count:t[1]}}),i.next=11,Object(at.c)({type:Oe,data:{dateGraph:r,categoryGraph:c,outcomeGraph:o}});case 11:i.next=17;break;case 13:return i.prev=13,i.t0=i.catch(1),i.next=17,Object(at.c)((l=i.t0.message,{type:je,message:l}));case 17:case"end":return i.stop()}var l},jt,this,[[1,13]])}function Ct(e){var t,n,a,r,c,o,i,l,s,u,m,d,h,g,p,f,b;return nt.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.latlng,v.prev=1,n="".concat(it.mapquest,"/reverse?key=").concat(lt.mapquest,"&location=").concat(t.join(","),"&includeRoadMetadata=true&includeNearestIntersection=true"),v.next=5,dt(n);case 5:return a=v.sent,r=a.data,c=(r=void 0===r?{}:r).results,o=(void 0===c?[]:c)[0].locations,i=(void 0===o?[]:o)[0],l=i.street,s=i.adminArea5,u=i.postalCode,m="".concat(s," AND ").concat(l||u),v.next=14,Object(at.d)(function(e){return e.search.dates});case 14:return d=v.sent,h="".concat(it.guardian,"?q=").concat(m,"&from-date=").concat(d[0],"-01&api-key=").concat(lt.guardian),v.next=18,dt(h);case 18:return g=v.sent,p=g.data,f=(p=void 0===p?{}:p).response.results,(b=void 0===f?[]:f).sort(function(e,t){return e.webPublicationDate.localeCompare(t.webPublicationDate)}),v.next=25,Object(at.c)({type:xe,data:b});case 25:v.next=32;break;case 27:return v.prev=27,v.t0=v.catch(1),console.error(v.t0),v.next=32,Object(at.c)((y=v.t0.message,{type:ke,message:y}));case 32:case"end":return v.stop()}var y},wt,this,[[1,27]])}function St(){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(at.e)(Ee,kt);case 2:return e.next=4,Object(at.e)(we,Ct);case 4:case"end":return e.stop()}},xt,this)}var At=nt.a.mark(Nt);function Nt(){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(at.a)([Et,St].map(at.b));case 2:case"end":return e.stop()}},At,this)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Lt=Object(s.a)(),_t=Object(l.createStore)(et,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(Lt)));Lt.run(Nt),o.a.render(r.a.createElement(i.a,{store:_t},r.a.createElement(Ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[189,2,1]]]);
//# sourceMappingURL=main.7ddb714a.chunk.js.map