{"version":3,"sources":["assets/iu.gif","assets/boa.gif","containers/SearchPage/actions.js","utils/contants.js","containers/MapPage/actions.js","components/modal.js","components/table.js","components/loading.js","components/select.js","components/button.js","components/checkbox.js","containers/SearchPage/page.js","containers/AnalysePage/actions.js","containers/MapPage/page.js","containers/AnalysePage/news.js","containers/AnalysePage/graphs.js","containers/AnalysePage/page.js","containers/App.js","containers/SearchPage/reducer.js","containers/MapPage/reducer.js","containers/AnalysePage/reducer.js","containers/reducers.js","utils/request.js","containers/SearchPage/saga.js","containers/AnalysePage/saga.js","containers/sagas.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","LOAD_AVAILABILITY_SUCCESS","LOAD_AVAILABILITY_FAILURE","LOAD_CRIME_CATEGORY_REQUEST","LOAD_CRIME_CATEGORY_SUCCESS","LOAD_CRIME_CATEGORY_FAILURE","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAILURE","searchSuccess","data","dateLength","arguments","length","undefined","type","searchFailure","message","categoryColors","all-crime","anti-social-behaviour","bicycle-theft","burglary","criminal-damage-arson","drugs","other-theft","possession-of-weapons","public-order","robbery","shoplifting","theft-from-the-person","vehicle-crime","violent-crime","other-crime","SAVE_LOCATION","FILTER_CRIME_CIRCLES","filterCrimeCircles","crimes","categories","values","Object","reduce","acc","ele","category","_ele$location","location","latitude","longitude","_ele$location$street","street","find","cat","id","objectSpread","defineProperty","count","fillColor","latlng","parseFloat","max","Math","apply","toConsumableArray","map","opacity","radius","ModalDiv","styled","div","_templateObject","Modal","_ref","title","show","onClose","children","react_default","a","createElement","className","concat","onClick","TableDiv","table_templateObject","Table","Tr","_ref2","Th","_ref3","Td","_ref4","LoadingDiv","loading_templateObject","Loading","loading","modal","src","round","random","boa","iu","alt","DefaultSelect","select","select_templateObject","Select","value","options","onChange","val","_ref2$text","text","key","DefaultButton","button","button_templateObject","Button","Checkbox","checked","SearchContainer","page_templateObject","allCrime","url","name","Search","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","changeDate","evt","target","minmax","state","sort","b","localeCompare","date","setState","changeCategory","crimeCheckboxes","selectedCategory","checkCategory","console","log","list","props","onFilterCrimeCategory","search","preventDefault","_this$state","dates","params","onSearch","toggleModal","showError","min","prevProps","prevAvailability","availability","prevCategory","prevMessage","_this$props","_this2","_this$state2","_this$state2$date","_this$state2$date$dat","_this$props2","_this$props2$category","htmlFor","components_select","components_checkbox","style","backgroundColor","components_button","components_loading","React","PureComponent","defaultProps","onSelectCrimeCategory","connect","dispatch","param","LOAD_GRAPHS_REQUEST","LOAD_GRAPHS_SUCCESS","LOAD_GRAPHS_FAILURE","LOAD_NEWS_REQUEST","LOAD_NEWS_SUCCESS","LOAD_NEWS_FAILURE","LeafletMap","handleClick","onSaveLocation","handleLocationFound","hasLocation","handleCircle","onLoadGraphRequest","onLoadNewsRequest","leafletElement","locate","prevPops","circles","_this$state$latlng","Map","center","ref","zoom","onLocationfound","TileLayer","attribution","Marker","position","lat","lng","Popup","_ref$opacity","Circle","fillOpacity","stroke","loadGraphsRequest","loadNewsRequest","News","news","sectionName","pillarName","webTitle","webUrl","webPublicationDate","table_Table","table_Tr","table_Th","table_Td","Date","toLocaleDateString","href","Graphs","outcome","width","window","innerWidth","LineChart","height","XAxis","dataKey","YAxis","yAxisId","Tooltip","CartesianGrid","Line","BarChart","Bar","fill","AnalyseContainer","AnalysePage_page_templateObject","AnalysePage","dateGraph","categoryGraph","outcomeGraph","graphs","AnalysePage_news","analyse","AppDiv","App_templateObject","App","page","MapPage_page","AnalysePage_page","Component","initialState","crimeTable","combineReducers","action","api","police","guardian","mapquest","keys","checkStatus","_callee","response","error","body","regenerator_default","wrap","_context","prev","next","status","abrupt","Error","json","sent","statusText","t0","stop","parseJSON","request","path","axios","get","then","loadAvailability","loadCrimeCategory","saga","put","_marked","_date","_args2","_context2","_marked2","_ref2$data","responses","_args3","_context3","all","_marked3","_context4","fork","takeLatest","_marked4","loadGraph","loadNews","streetId","selectedCrimes","filter","_ref2$location","_ref2$location$street","entries","month","slicedToArray","_ref5","_ref6","outcome_status","_ele$outcomes","outcomes","_ref7","_ref8","saga_marked","_ref9","addressUrl","_ref10","_ref10$data","_ref10$data$results","_address$0$locations","_locations$","adminArea5","postalCode","query","newsUrl","_ref11","_ref11$data","_ref11$data$response$","results","join","locations","saga_marked2","saga_marked3","sagas","searchSaga","analyseSaga","sagas_marked","Boolean","hostname","match","createSagaMiddleware","store","createStore","reducers","composeWithDevTools","applyMiddleware","run","ReactDOM","render","es","containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ffe128b4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/iu.be3a3a56.gif\";","module.exports = __webpack_public_path__ + \"static/media/boa.3096abdc.gif\";","// @flow\n\nexport const LOAD_AVAILABILITY_SUCCESS = 'containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS';\nexport const LOAD_AVAILABILITY_FAILURE = 'containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE';\n\nexport const LOAD_CRIME_CATEGORY_REQUEST = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST';\nexport const LOAD_CRIME_CATEGORY_SUCCESS = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS';\nexport const LOAD_CRIME_CATEGORY_FAILURE = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE';\n\nexport const SEARCH_REQUEST = 'containers/SearchPage/actions/SEARCH_REQUEST';\nexport const SEARCH_SUCCESS = 'containers/SearchPage/actions/SEARCH_SUCCESS';\nexport const SEARCH_FAILURE = 'containers/SearchPage/actions/SEARCH_FAILURE';\n\nexport function loadAvailabilitySuccess (data: Array<mixed>) {\n  return {\n    type: LOAD_AVAILABILITY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadAvailabilityFailure (message: string) {\n  return {\n    type: LOAD_AVAILABILITY_FAILURE,\n    message,\n  }\n}\n\nexport function loadCrimeCategoryRequest (date: string) {\n  return {\n    type: LOAD_CRIME_CATEGORY_REQUEST,\n    date,\n  }\n}\n\nexport function loadCrimeCategorySuccess (data: Array<mixed>) {\n  return {\n    type: LOAD_CRIME_CATEGORY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadCrimeCategoryFailure (message: string) {\n  return {\n    type: LOAD_CRIME_CATEGORY_FAILURE,\n    message,\n  }\n}\n\nexport function searchRequest (data: { url: string, dates: Array<string> }) {\n  return {\n    type: SEARCH_REQUEST,\n    data,\n  }\n}\n\nexport function searchSuccess (data: Array<mixed>, dateLength: number = 1) {\n  return {\n    type: SEARCH_SUCCESS,\n    data,\n    dateLength,\n  }\n}\n\nexport function searchFailure (message: string) {\n  return {\n    type: SEARCH_FAILURE,\n    message,\n  }\n}","export const outcomes = [\n  { code: \"awaiting-court-result\", name: \"Awaiting court outcome\" },\n  { code: \"court-result-unavailable\", name: \"Court result unavailable\" },\n  { code: \"unable-to-proceed\", name: \"Court case unable to proceed\" },\n  { code: \"local-resolution\", name: \"Local resolution\" },\n  { code: \"no-further-action\", name: \"Investigation complete; no suspect identified\" },\n  { code: \"deprived-of-property\", name: \"Offender deprived of property\" },\n  { code: \"fined\", name: \"Offender fined\" },\n  { code: \"absolute-discharge\", name: \"Offender given absolute discharge\" },\n  { code: \"cautioned\", name: \"Offender given a caution\" },\n  { code: \"drugs-possession-warning\", name: \"Offender given a drugs possession warning\" },\n  { code: \"penalty-notice-issued\", name: \"Offender given a penalty notice\" },\n  { code: \"community-penalty\", name: \"Offender given community sentence\" },\n  { code: \"conditional-discharge\", name: \"Offender given conditional discharge\" },\n  { code: \"suspended-sentence\", name: \"Offender given suspended prison sentence\" },\n  { code: \"imprisoned\", name: \"Offender sent to prison\" },\n  { code: \"other-court-disposal\", name: \"Offender otherwise dealt with\" },\n  { code: \"compensation\", name: \"Offender ordered to pay compensation\" },\n  { code: \"sentenced-in-another-case\", name: \"Suspect charged as part of another case\" },\n  { code: \"charged\", name: \"Suspect charged\" },\n  { code: \"not-guilty\", name: \"Defendant found not guilty\" },\n  { code: \"sent-to-crown-court\", name: \"Defendant sent to Crown Court\" },\n  { code: \"unable-to-prosecute\", name: \"Unable to prosecute suspect\" },\n  { code: \"formal-action-not-in-public-interest\", name: \"Formal action is not in the public interest\" },\n  { code: \"action-taken-by-another-organisation\", name: \"Action to be taken by another organisation\" },\n  { code: \"further-investigation-not-in-public-interest\", name: \"Further investigation is not in the public interest\" },\n  { code: \"under-investigation\", name: \"Under investigation\" },\n  { code: \"status-update-unavailable\", name: \"Status update unavailable\" },\n];\n\nexport const categoryColors = {\n  \"all-crime\": \"#d17f68\",\n  \"anti-social-behaviour\": \"#73b638\",\n  \"bicycle-theft\": \"#a45dcf\",\n  \"burglary\": \"#5fbc6e\",\n  \"criminal-damage-arson\": \"#c0489a\",\n  \"drugs\": \"#4b7d3c\",\n  \"other-theft\": \"#666dc6\",\n  \"possession-of-weapons\": \"#d99938\",\n  \"public-order\": \"#5e99d2\",\n  \"robbery\": \"#cc4f32\",\n  \"shoplifting\": \"#49b9a9\",\n  \"theft-from-the-person\": \"#c7496a\",\n  \"vehicle-crime\": \"#adac4d\",\n  \"violent-crime\": \"#c581bb\",\n  \"other-crime\": \"#8b6c2f\",\n};","import {\n  categoryColors,\n} from '../../utils/contants';\n\nexport const SAVE_LOCATION = 'containers/MapPage/actions/SAVE_LOCATION';\n\nexport const FILTER_CRIME_CIRCLES = 'containers/MapPage/actions/FILTER_CRIME_CIRCLES';\n\nexport function saveLocation (data) {\n  return {\n    type: SAVE_LOCATION,\n    data,\n  }\n}\n\nexport function filterCrimeCircles (crimes = [], categories = []) {\n  const values = Object.values(crimes.reduce((acc, ele) => {\n    const {\n      category,\n      location: {\n        latitude,\n        longitude,\n        street = {},\n      } = {},\n    } = ele;\n\n    if (categories.length === 0 || categories.find((cat) => cat === category)){\n      if (!acc[street.id]) {\n        return {\n          ...acc,\n          [street.id]: {\n            category,\n            fillColor: categoryColors[category],\n            street,\n            count: 1,\n            latlng: [parseFloat(latitude), parseFloat(longitude)],\n          },\n        };\n      } else {\n        return {\n          ...acc,\n          [street.id]: {\n            ...acc[street.id],\n            count: acc[street.id].count + 1,\n          },\n        };\n      }\n    }\n    return acc;\n  }, {}));\n\n  const max = Math.max(...values.map((ele) => ele.count));\n\n  const data = values.map((ele) => ({\n    ...ele,\n    opacity: ((ele.count - (ele.count%100))/100 > 0) ? 1 : (((ele.count - (ele.count%10))/10 > 0) ? 0.75 : 0.5),\n    radius: (25 / max) * ele.count,\n  }));\n\n  return {\n    type: FILTER_CRIME_CIRCLES,\n    data,\n  }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst ModalDiv = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n\n  .modal-title {\n    position: fixed;\n    top: 7rem;\n    width: 100%;\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n\n    .title {\n      display: inline-block;\n      width: calc(100% - 2rem);\n    }\n\n    .close {\n      display: inline-block;\n      width: 2rem;\n      font-size: large;\n      font-weight: bold;    \n      border: 0;\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    width: 100%;\n    min-height: 10rem;\n    // height: calc(50% - 6rem);\n    overflow: auto;\n    top: 10rem;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  // .modal-footer {\n  //   position: fixed;\n  //   top: calc(50% - 6rem + 10rem);\n  //   height: 3rem;\n  //   background-color: white;\n  //   width: 100%;\n  //   line-height: 3rem;\n  //   vertical-align: middle;\n  //   text-align: center;\n  //   border-top: 1px solid black;\n  //   box-sizing: border-box;\n\n  //   .close {\n  //     background-color: black;\n  //     color: white;\n  //     font-weight: bolder;\n  //     padding: 0.5rem 1rem;\n  //     border: 0;\n  //   }\n  // }\n`;\n\nconst Modal = ({ title, show, onClose, children }) => (\n  <ModalDiv className={`display-${show ? 'block' : 'none'}`}>\n    <div className=\"modal-title\">\n      <div className=\"title\">{ title }</div>\n      <button className=\"close\" onClick={onClose}>X</button>\n    </div>\n    <div className=\"modal-main\">\n      { children }\n    </div>\n  </ModalDiv>\n);\n\nModal.propTypes = {\n  title: PropTypes.string,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  children: PropTypes.any,\n};\n\nexport default Modal;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst TableDiv = styled.div`\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  // border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n  }\n\n  .td {\n    display: table-cell;\n  }\n`;\n\nconst Table = ({ children }) => (<TableDiv>{ children }</TableDiv>);\nTable.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Tr = ({ children }) => (<div className=\"tr\">{ children }</div>);\nTr.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Th = ({ children }) => (<div className=\"th\">{ children }</div>);\nTh.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Td = ({ children }) => (<div className=\"td\">{ children }</div>);\nTd.propTypes = {\n  children: PropTypes.any,\n};\n\nexport {\n  Table,\n  Tr, Th, Td,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport Modal from './modal';\n\nimport iu from '../assets/iu.gif'\nimport boa from '../assets/boa.gif';\n\nconst LoadingDiv = styled.div` \n  img {\n    width: 100%;\n  }\n`;\n\nconst Loading = ({ loading }) => (\n  <Modal\n    title=\"Loading...\"\n    show={loading}\n  >\n    <LoadingDiv>\n      <img src={Math.round(Math.random()) % 2 === 0 ? boa : iu} alt=\"loading...\" />\n    </LoadingDiv>\n  </Modal>\n);\n\nLoading.propTypes = {\n  loading: PropTypes.bool,\n}\n\nexport default Loading;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styled from 'styled-components';\n\nconst DefaultSelect = styled.select`\n  border: 0;\n  height: 1rem;\n  min-width: 5rem;\n  background-color: white;\n`;\n\nconst Select = ({ id, value, options, onChange, className }) => \n(<DefaultSelect id={id} onChange={onChange} value={value} className={className}>\n  {\n    options && options.map(({value: val, text = val}) => <option key={val} value={val}>{text}</option>)\n  }\n</DefaultSelect>);\n\nSelect.propTypes = {\n  id: PropTypes.any,\n  value: PropTypes.any,\n  className: PropTypes.string,\n  options: PropTypes.array,\n  onChange: PropTypes.func,\n}\n\nexport default Select;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst DefaultButton = styled.button`\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.3rem 1rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n`;\n\nconst Button = ({ onClick, className, children }) => (\n  <DefaultButton onClick={onClick} className={className}>\n    { children }\n  </DefaultButton>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  className: PropTypes.string,\n  children: PropTypes.any,\n};\n\nexport default Button;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Checkbox = ({ id, value, checked, className, onChange }) => (\n  <input\n    type=\"checkbox\"\n    id={id}\n    value={value}\n    onChange={onChange}\n    checked={checked}\n    className={className}\n  />\n)\n\nCheckbox.propTypes = {\n  id: PropTypes.string,\n  value: PropTypes.any,\n  checked: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nexport default Checkbox;","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { connect } from 'react-redux';\n\nimport {\n  searchRequest,\n} from './actions';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nimport {\n  categoryColors,\n} from '../../utils/contants';\n\nimport {\n  Modal,\n  Loading,\n  Select,\n  Button,\n  Checkbox,\n} from '../../components';\n\nconst SearchContainer = styled.div`\n    order: 1;\n    margin: 0.5rem;\n    padding: 0.5rem;\n\n    .grid-container {\n      display: grid;\n      grid-template-rows: 2rem 2rem auto 2rem;\n      grid-template-columns: 4.5rem auto;\n\n      .grid-item {\n        padding: 0.5rem;\n        \n        &.whole-row {\n          grid-column-start: 1;\n          grid-column-end: 3;\n\n          .each-crime {\n            display: inline-block;\n            min-width: 50%;\n            font-size: small;\n            line-height: 1rem;\n            vertical-align: middle;\n\n            label {\n              font-size: smaller;\n            }\n\n            .color {\n              width: 0.75rem;\n              height: 0.75rem;\n              display: inline-block;\n              border-radius: 0.5rem;\n              margin: 0 0.3rem;\n            }\n          }\n        }\n      }\n\n      & > label {\n        font-size: smaller;\n        text-transform: capitalize;\n      }\n    }\n\n    button {     \n      padding: 0.3rem 1rem;\n    }\n`;\n\nconst allCrime = {\n  url: 'all-crime',\n  name: 'All crime'\n};\n\ntype Props = {\n  availability: Array<{ date: string }>,\n  category: Array<{ url: string, name: string }>,\n  crimes: Array<mixed>,\n  message: string,\n  loading: boolean,\n  onSelectCrimeCategory: Function,\n  onFilterCrimeCategory: Function,\n  onSearch: Function,\n}\n\ntype State = {\n  date: {\n    min: string,\n    max: string,\n    dates: Array<{ value: string }>,\n  },\n  minmax: string[],\n  showError: boolean,\n  crimeCheckboxes: Array<{ url: string, name: string, checked: boolean }>,\n  selectedCategory: string,\n}\n\nclass Search extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    availability: [],\n    category: [],\n    crimes: [],\n    message: null,\n    loading: false,\n    onSelectCrimeCategory: () => {},\n    onFilterCrimeCategory: () => {},\n    onSearch: () => {},\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      date: {\n        min: '',\n        max: '',\n        dates: [],\n      },\n      minmax: [],\n      crimeCheckboxes: [],\n      selectedCategory: '',\n      showError: false,\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      availability: prevAvailability,\n      category: prevCategory,\n      message: prevMessage,\n    } = prevProps;\n\n    const {\n      availability,\n      category,\n      message,\n    } = this.props;\n\n    if (prevAvailability !== availability) {\n      const date = availability.reduce((acc, ele) => ({\n          min: (acc.min && acc.min < ele.date) ? acc.min : ele.date,\n          max: (acc.max && acc.max > ele.date) ? acc.max : ele.date,\n          dates: acc.dates ? [...acc.dates, { value: ele.date }] : [{ value: ele.date }],\n        }), {\n          ...this.state.date,\n        });\n\n      const minmax = [date.min, date.max];\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n\n    if (prevCategory !== category) {\n      const crimeCheckboxes = this.props.category.reduce((acc, ele) => {\n        if (ele.url !== allCrime.url) {\n          return [\n            ...acc,\n            {\n              ...ele,\n              checked: true,\n            }\n          ];\n        }\n        return acc;\n      }, []);\n\n      this.setState({\n        crimeCheckboxes,\n      });\n    }\n    \n    if (prevMessage !== message) {\n      this.setState({\n        showError: true,\n      });\n    }\n  }\n\n  changeDate = (type) => (evt) => {\n    const { value } = evt.target;\n\n    if(value) {\n      const minmax = [...this.state.minmax];\n      minmax[type === 'min' ? 0 : 1] = value;\n      // minmax.sort((a, b) => a > b);\n      minmax.sort((a, b) => a.localeCompare(b));\n\n      const date = {\n        ...this.state.date,\n        [type]: value,\n      };\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n  }\n\n  changeCategory = (evt) => {\n    const crimeCheckboxes = this.state.crimeCheckboxes.map((ele) => {\n      const checked = (evt.target.value === allCrime.url) ? true : (ele.url === evt.target.value);\n      return {\n        ...ele,\n        checked,\n      }\n    });\n\n    this.setState({\n      crimeCheckboxes,\n      selectedCategory: evt.target.value,\n    });\n  }\n\n  checkCategory = (url) => (evt) => {\n    const crimeCheckboxes = this.state.crimeCheckboxes.map((ele) => {\n      if (ele.url === url) {\n        return {\n          ...ele,\n          checked: evt.target.checked,\n        }\n      } \n      return ele;\n    });\n\n    console.log(url, evt.target.checked);\n    console.log(crimeCheckboxes);\n\n    this.setState({\n      crimeCheckboxes,\n    });\n\n    const list = crimeCheckboxes.reduce((acc, ele) => {\n      if(ele.checked) {\n        return [...acc, ele.url];\n      }\n      return acc;\n    }, []);\n\n    this.props.onFilterCrimeCategory(this.props.crimes, list);\n  }\n\n  search = (evt) => {\n    evt.preventDefault();\n\n    const {\n      minmax,\n      date,\n      selectedCategory,\n    } = this.state;\n\n    const dates = date.dates.reduce((acc, ele) => {\n      if (minmax[0] <= ele.value && ele.value <= minmax[1]) {\n        return [...acc, ele.value];\n      }\n      return acc;\n    }, []).sort((a, b) => a.localeCompare(b));\n\n    const params = {\n      url: selectedCategory || allCrime.url,\n      dates,\n    };\n\n    this.props.onSearch(params);\n  }\n\n  toggleModal = () => this.setState({ showError: !this.state.showError })\n\n  render() {\n    const {\n      date: {\n        min,\n        max,\n        dates = [],\n      } = {},\n      crimeCheckboxes,\n      showError,\n    } = this.state;\n\n    const {\n      category = [allCrime],\n      message,\n      loading,\n    } = this.props;\n\n    return (\n      <SearchContainer>\n        <form className=\"grid-container\">\n          <label htmlFor=\"select_date\" className=\"grid-item\">date</label>\n          <div className=\"grid-item\">\n            <Select\n              onChange={this.changeDate('min')}\n              value={min}\n              options={dates}\n            />\n            <span> ~ </span>\n            <Select\n              onChange={this.changeDate('max')}\n              value={max}\n              options={dates}\n            />\n          </div>\n          <label htmlFor=\"select_category\" className=\"grid-item\">category</label>\n          <div className=\"grid-item\">\n            <Select\n              id=\"select_category\"\n              onChange={this.changeCategory}\n              options={category}\n            />\n          </div>\n          { crimeCheckboxes &&\n          <div className=\"grid-item whole-row\">\n            {\n              crimeCheckboxes && crimeCheckboxes.map((ele) => (<div className=\"each-crime\" key={ele.url}>\n                <Checkbox\n                  value={ele.url}\n                  id={`checkbox_${ele.url}`}\n                  onChange={this.checkCategory(ele.url)}\n                  checked={ele.checked}\n                />\n                <label htmlFor={`checkbox_${ele.url}`}>{ele.name}</label>\n                <span className=\"color\" style={{backgroundColor: categoryColors[ele.url]}}></span>\n              </div>))\n            }\n          </div> }\n          <Button onClick={this.search} className=\"grid-item whole-row\">SEARCH</Button>\n        </form>\n        <Loading loading={loading} />\n        <Modal\n          show={showError}\n          onClose={this.toggleModal}\n        >\n          {message}\n        </Modal>\n      </SearchContainer>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.search,\n    category: state.search.category.map((ele) => ({\n      ...ele,\n      value: ele.url,\n      text: ele.name,\n    })),\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSearch: (param) => dispatch(searchRequest(param)),\n    onFilterCrimeCategory: (crimes, list) => dispatch(filterCrimeCircles(crimes, list)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);","// @flow\n\nexport const LOAD_GRAPHS_REQUEST = 'containers/AnalysePage/LOAD_GRAPHS_REQUEST';\nexport const LOAD_GRAPHS_SUCCESS = 'containers/AnalysePage/LOAD_GRAPHS_SUCCESS';\nexport const LOAD_GRAPHS_FAILURE = 'containers/AnalysePage/LOAD_GRAPHS_FAILURE';\n\nexport const LOAD_NEWS_REQUEST = 'containers/AnalysePage/LOAD_NEWS_REQUEST';\nexport const LOAD_NEWS_SUCCESS = 'containers/AnalysePage/LOAD_NEWS_SUCCESS';\nexport const LOAD_NEWS_FAILURE = 'containers/AnalysePage/LOAD_NEWS_FAILURE';\n\nexport function loadGraphsRequest(id: string) {\n  return {\n    type: LOAD_GRAPHS_REQUEST,\n    id,\n  }\n}\n\nexport function loadGraphsSuccess(data: { dateGraph: Array<any>, categoryGraph: Array<any>, outcomeGraph: Array<any>}) {\n  return {\n    type: LOAD_GRAPHS_SUCCESS,\n    data,\n  }\n}\n\nexport function loadGraphsFailure(message: string) {\n  return {\n    type: LOAD_GRAPHS_FAILURE,\n    message,\n  }\n}\n\nexport function loadNewsRequest(latlng: { lat: number, lng: number }) {\n  return {\n    type: LOAD_NEWS_REQUEST,\n    latlng,\n  }\n}\n\nexport function loadNewsSuccess(news: Array<any>) {\n  return {\n    type: LOAD_NEWS_SUCCESS,\n    data: news,\n  }\n}\n\nexport function loadNewsFailure(message: string) {\n  return {\n    type: LOAD_NEWS_FAILURE,\n    message,\n  }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport {\n  Map, TileLayer,\n  Marker, Popup,\n  Circle,\n} from 'react-leaflet';\n\nimport {\n  loadGraphsRequest,\n  loadNewsRequest,\n} from '../AnalysePage/actions';\n\nimport {\n  saveLocation,\n} from './actions';\n\nconst attribution = \"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\";\nconst url = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\nclass LeafletMap extends React.PureComponent {\n  static propTypes = {\n    latlng: PropTypes.shape({\n      lat: PropTypes.number,\n      lng: PropTypes.number,\n    }),\n    circles: PropTypes.array,\n    onSaveLocation: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      latlng: props.latlng,\n    }\n  }\n\n  componentDidMount() {\n    if (this.map.leafletElement) {\n      this.map.leafletElement.locate();\n    }\n  }\n\n  componentDidUpdate(prevPops) {\n    if (prevPops.latlng !== this.props.latlng) {\n      this.setState({\n        latlng: this.props.latlng,\n      });\n    }\n  }\n\n  handleClick = (evt) => this.props.onSaveLocation(evt.latlng);\n\n  handleLocationFound = (evt) => {\n    this.setState({\n      hasLocation: true,\n      latlng: evt.latlng,\n    });\n\n    this.props.onSaveLocation(evt.latlng);\n  }\n\n  handleCircle = (id, latlng) => () => {\n    // evt.preventDefault();\n\n    this.props.onLoadGraphRequest(id);\n    this.props.onLoadNewsRequest(latlng);\n  }\n\n  render() {\n    const {\n      circles,\n    } = this.props;\n\n    const {\n      latlng = {},\n    } = this.state;\n\n    return (\n      <Map\n        center={latlng}\n        ref={(val) => { this.map = val; }}\n        zoom={13}\n        onClick={this.handleClick}\n        onLocationfound={this.handleLocationFound}\n      >\n        <TileLayer\n          attribution={attribution}\n          url={url}\n        />\n        { latlng &&\n        <Marker position={[latlng.lat, latlng.lng]}>\n          <Popup>\n            {`You clicked here!!\n            Latitude: ${latlng.lat}\n            Longitude: ${latlng.lng}`}\n          </Popup>\n        </Marker> }\n        {\n          circles && circles.map(({latlng, street, radius, count, opacity = 0.5, fillColor}) => \n          <Circle\n            fillColor={fillColor}\n            fillOpacity={opacity}\n            stroke={false}\n            radius={radius < 10 ? radius * 25 : 250}\n            center={latlng}\n            key={latlng}\n            onClick={this.handleCircle(street.id, latlng)}\n          >\n            <Popup>\n            {`Street Id: ${street.id}\n            Street Name: ${street.name}\n            Crime Count: ${count}`}\n            </Popup>\n          </Circle>)\n        }\n      </Map>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.map,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSaveLocation: (latlng) => dispatch(saveLocation(latlng)),\n    onLoadGraphRequest: (id) => dispatch(loadGraphsRequest(id)),\n    onLoadNewsRequest: (latlng) => dispatch(loadNewsRequest(latlng)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeafletMap);","// @flow\n\nimport React from 'react';\n\nimport {\n  Table, Tr, Th, Td,\n} from '../../components';\n\nconst News = ({ news }: {\n  news: Array<{\n    id: string,\n    sectionName: string,\n    pillarName: string,\n    webTitle: string,\n    webUrl: string,\n    webPublicationDate: string,\n  }>\n}) => (\n  <div>\n    {\n      news && news.map(({id, sectionName, pillarName, webTitle, webUrl, webPublicationDate }) =>\n        (<Table key={id}>\n          <Tr>\n            <Th>Date</Th>\n            <Td>{ new Date(webPublicationDate).toLocaleDateString() }</Td>\n          </Tr>\n          <Tr>\n            <Th>Section</Th>\n            <Td>{ sectionName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Pillar</Th>\n            <Td>{ pillarName }</Td>\n          </Tr>\n          <Tr>\n            <Th>Title</Th>\n            <Td><a href={webUrl} target=\"_new\">{ webTitle }</a></Td>\n          </Tr>\n        </Table>\n      ))\n    }\n  </div>\n);\n\nexport default News;","// @flow\n\nimport React from 'react';\n\nimport {\n  LineChart, Line,\n  BarChart, Bar,\n  XAxis, YAxis,\n  Tooltip,\n  CartesianGrid,\n} from 'recharts';\n\ntype Props = {\n  date: Array<any>,\n  category: Array<any>,\n  outcome: Array<any>,\n};\n\nconst Graphs = (props: Props) => {\n  const {\n    date,\n    category,\n    outcome,\n  } = props;\n  \n  const width = window.innerWidth - 35;\n\n  return (<div>\n    { date && \n    <div>\n      <p>The number of crimes per Date</p>\n      <LineChart\n        width={width}\n        height={width}\n        data={date}\n      >\n        <XAxis dataKey=\"date\" />\n        <YAxis type=\"number\" yAxisId={0} />\n        <Tooltip />\n        <CartesianGrid stroke=\"#f5f5f5\" />\n        <Line type=\"monotone\" dataKey=\"count\" stroke=\"#ff7300\" yAxisId={0} />\n      </LineChart>\n      </div>\n    }\n    { category && category.length > 1 &&\n      <div>\n        <p>The number of crimes per Category</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={category}\n        >\n          <XAxis dataKey=\"category\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#387908\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n    { outcome &&\n      <div>\n        <p>The ratio of crimes per Outcome</p>\n        <BarChart\n          width={width}\n          height={width}\n          data={outcome}\n        >\n          <XAxis dataKey=\"outcome\" />\n          <YAxis type=\"number\" yAxisId={0} />\n          <Tooltip />\n          <CartesianGrid stroke=\"#f5f5f5\" />\n          <Bar type=\"monotone\" dataKey=\"count\" fill=\"#38abc8\" yAxisId={0} />\n        </BarChart>\n      </div>\n    }\n  </div>);\n}\n\nexport default Graphs;\n","// @flow\n\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport News from './news';\nimport Graphs from './graphs';\n\nconst AnalyseContainer = styled.div`\n  .tr {\n    line-height: 2rem;\n\n    .th, .td {\n      padding: 0 0.5rem;\n      font-size: smaller;\n    }\n  }\n`;\n\ntype Props = {\n  dateGraph: Array<any>,\n  categoryGraph: Array<any>,\n  outcomeGraph: Array<any>,\n  crimeTable: Array<any>,\n  news: Array<any>,\n};\n\nclass AnalysePage extends React.PureComponent<Props> {\n  render(){\n    const {\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n      news,\n    } = this.props;\n\n    return (<AnalyseContainer>\n      { dateGraph &&\n        <section>\n          <h3>Graphs</h3>\n          <Graphs\n            date={dateGraph}\n            category={categoryGraph}\n            outcome={outcomeGraph}\n          />\n        </section>\n      }\n      { news &&\n        <section>\n          <h3>News</h3>\n          <News\n            news={news}\n          />\n        </section>\n      }\n    </AnalyseContainer>);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.analyse,\n  }\n}\n\nexport default connect(mapStateToProps)(AnalysePage);","// @flow\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport Search from './SearchPage/page';\nimport LeafletMap from './MapPage/page';\nimport Analyse from './AnalysePage/page';\n\nconst AppDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  header {\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n  }\n\n  aside {\n    order: 1;\n  }\n\n  .map {\n    order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n  }\n\n  .analyse {\n    order: 3;\n    padding: 1rem;\n  }\n`;\n\ntype Props = {};\n\nclass App extends Component<Props> {\n  render() {\n    return (\n      <AppDiv>\n        <header>\n          <div className=\"title\">\n            CRIME MAP\n          </div>\n          <div className=\"email\">\n            <span className=\"smaller\">Contact me: melancholy14@hotmail.com</span>\n          </div>\n        </header>\n        <aside>\n          <Search />\n        </aside>\n        <main className=\"map\">\n          <LeafletMap />\n        </main>\n        <main className=\"analyse\">\n          <Analyse />\n        </main>\n      </AppDiv>\n    );\n  }\n}\n\nexport default App;\n","// @flow\n\nimport {\n  LOAD_AVAILABILITY_SUCCESS,\n  LOAD_AVAILABILITY_FAILURE,\n  LOAD_CRIME_CATEGORY_SUCCESS,\n  LOAD_CRIME_CATEGORY_FAILURE,\n  SEARCH_REQUEST,\n  SEARCH_SUCCESS,\n  SEARCH_FAILURE,\n} from './actions';\n\ntype State = {\n  +availability: Array<{\n    date: string,\n  }>,\n  +category: Array<{\n    url: string,\n    name: string,\n  }>,\n  +crimes: Array<mixed>,\n  +message: string,\n  +loading: boolean,\n}\n\ntype Action = {\n  type: string,\n  data?: any,\n  message?: string,\n};\n\nconst initialState = {\n  availability: [],\n  category: [],\n  crimes: [],\n  message: '',\n  loading: false,\n};\n\nexport default function searchReducer(state: State = initialState, action: Action): State {\n  switch(action.type) {\n    case SEARCH_REQUEST:\n      return {\n        ...state,\n        ...action.data,\n        loading: true,\n      };\n    case LOAD_AVAILABILITY_SUCCESS:\n      return {\n        ...state,\n        availability: action.data,\n      };\n    case LOAD_CRIME_CATEGORY_SUCCESS:\n      return {\n        ...state,\n        category: action.data,\n      };\n    case SEARCH_SUCCESS:\n      return {\n        ...state,\n        crimes: action.data,\n        loading: false,\n      };\n    case LOAD_AVAILABILITY_FAILURE:\n    case LOAD_CRIME_CATEGORY_FAILURE:\n    case SEARCH_FAILURE:\n      return {\n        ...state,\n        message: action.message,\n        loading: false,\n      };\n    default:\n      return state;\n  }\n}","import {\n  SAVE_LOCATION,\n  FILTER_CRIME_CIRCLES,\n} from './actions';\n\nconst initialState = {\n  latlng: {\n    lat: 51.505,\n    lng: -0.09,\n  },\n  circles: [],\n};\n\nexport default function mapReducer(state = initialState, action){\n  switch(action.type) {\n    case SAVE_LOCATION:\n      return {\n        ...state,\n        latlng: action.data,\n      };\n    case FILTER_CRIME_CIRCLES: {\n      return {\n        ...state,\n        circles: action.data,\n      }\n    }\n    default:\n      return state;\n  }\n}","// @flow\n\nimport {\n  LOAD_GRAPHS_SUCCESS,\n  LOAD_GRAPHS_FAILURE,\n  LOAD_NEWS_SUCCESS,\n  LOAD_NEWS_FAILURE,\n} from './actions';\n\ntype State = {\n  +dateGraph: Array<any>,\n  +categoryGraph: Array<any>,\n  +outcomeGraph: Array<any>,\n  +crimeTable: Array<any>,\n  +news: Array<any>,\n  +message: string,\n}\n\nconst initialState = {\n  dateGraph: [],\n  categoryGraph: [],\n  outcomeGraph: [],\n  crimeTable: [],\n  news: [],\n  message: '',\n}\n\ntype Action = {\n  type: string,\n  data?: any,\n  message?: string,\n}\n\nexport default function analyseReducer(state: State = initialState, action: Action): State{\n  switch(action.type){\n    case LOAD_GRAPHS_SUCCESS:\n      return {\n        ...state,\n        ...action.data,\n      };\n    case LOAD_NEWS_SUCCESS:\n      return {\n        ...state,\n        news: action.data,\n      }\n    case LOAD_NEWS_FAILURE:\n    case LOAD_GRAPHS_FAILURE:\n      return {\n        ...state,\n        message: action.message,\n      };\n    default:\n      return state;\n  }\n};","// @flow\n\nimport { combineReducers } from 'redux';\n\nimport searchReducer from './SearchPage/reducer';\nimport mapReducer from './MapPage/reducer';\nimport analyseReducer from './AnalysePage/reducer';\n\nexport default combineReducers({\n  map: mapReducer,\n  search: searchReducer,\n  analyse: analyseReducer,\n});","import axios from 'axios';\n\nexport const api = {\n  police: 'https://data.police.uk/api',\n  guardian: 'https://content.guardianapis.com/search',\n  mapquest: 'https://open.mapquestapi.com/geocoding/v1',\n};\n\nexport const keys = {\n  guardian: '36ecd8a8-f9be-4d95-9643-4095fae41301',\n  mapquest: '7qAl9AvfefdHSIOkkLrVvSc466ZoHenG',\n}\n\nasync function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error();\n    error.response = response;\n\n    try {\n      const body = await response.json();\n      error.body = body;\n      error.message = body.message || response.statusText;\n\n      throw error;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction parseJSON(response){\n  if(response.status === 204 || response.status === 205){\n    return null;\n  }\n\n  return response;\n}\n\nexport function request(path, options) {\n  return axios.get(path, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}","// @flow\n\nimport { fork, put, takeLatest, select, all } from 'redux-saga/effects';\nimport { api, request } from '../../utils/request';\n\nimport {\n  LOAD_CRIME_CATEGORY_REQUEST,\n  SEARCH_REQUEST,\n  loadAvailabilitySuccess,\n  loadAvailabilityFailure,\n  loadCrimeCategorySuccess,\n  loadCrimeCategoryFailure,\n  searchSuccess,\n  searchFailure,\n} from './actions';\n\nimport {\n  filterCrimeCircles,\n} from '../MapPage/actions';\n\nfunction* loadAvailability() {\n  try {\n    const response = yield request(`${api.police}/crimes-street-dates`);\n\n    yield put(loadAvailabilitySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadAvailabilityFailure(err.message));\n  }\n}\n\nfunction* loadCrimeCategory({ date: _date } = {}) {\n  try {\n    const date = _date || (new Date()).toLocaleDateString();\n\n    const response = yield request(`${api.police}/crime-categories?date=${date}`);\n\n    yield put(loadCrimeCategorySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadCrimeCategoryFailure(err.message));\n  }\n}\n\nfunction* search({ data: { url, dates }} = {}) {\n  try {\n    const { lat, lng } = yield select((state) => state.map.latlng);\n\n    if (lat && lng && dates && dates.length > 0) {\n      const responses = yield all(dates.map((date) => request(`${api.police}/crimes-street/${url}?lat=${lat}&lng=${lng}&date=${date}`)));\n\n      const data = responses && responses.reduce((acc, response) => {\n        return [...acc, ...(response && response.data)];\n      }, []);\n\n      yield put(searchSuccess(data));\n      yield put(filterCrimeCircles(data))\n    } else {\n      yield put(searchFailure('There is no position info! Please, click the map and tell me where you want to know'));\n    }\n  } catch(err) { \n    console.log(err);\n    yield put(searchFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any> {\n  yield fork(loadAvailability);\n  yield fork(loadCrimeCategory);\n\n  yield takeLatest(LOAD_CRIME_CATEGORY_REQUEST, loadCrimeCategory);\n  yield takeLatest(SEARCH_REQUEST, search);\n}","// @flow\n\nimport { takeLatest, select, put } from 'redux-saga/effects';\nimport { api, request, keys } from '../../utils/request';\n\nimport {\n  LOAD_GRAPHS_REQUEST,\n  loadGraphsSuccess,\n  loadGraphsFailure,\n  LOAD_NEWS_REQUEST,\n  loadNewsFailure,\n  loadNewsSuccess,\n} from './actions';\n\nfunction* loadGraph({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    const dateGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.month]: acc[ele.month] >= 0 ? acc[ele.month] + 1 : 0,\n    }), {})).map(([date, count]) => ({ date, count }));\n\n    const categoryGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.category]: acc[ele.category] >= 0 ? acc[ele.category] + 1 : 0,\n    }), {})).map(([category, count]) => ({ category, count }));\n\n    const outcomeGraph = Object.entries(selectedCrimes.reduce((acc, ele) => {\n      const {\n        outcome_status,\n        outcomes: {\n          category: outcome,\n        } = outcome_status || {},\n      } = ele;\n\n      if (outcome) {\n        return {\n          ...acc,\n          [outcome]: acc[outcome] >= 0 ? acc[outcome] + 1 : 0,\n        };\n      }\n      return acc;\n    }, {})).map(([outcome, count]) => ({ outcome, count }));\n\n    yield put(loadGraphsSuccess({\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n    }));\n  } catch(err) {\n    yield put(loadGraphsFailure(err.message));\n  }\n}\n\n/*\nfunction* loadCrimeTables({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    console.log('selectedCrimes', selectedCrimes);\n\n    const crimeTable = selectedCrimes.map(({\n      id,\n      month,\n      category,\n      outcome_status,\n      outcomes: {\n        category: outcome,\n      } = outcome_status || {},\n    }) => ({ id, list: [['month', month], ['category', category], ['outcome', outcome]] }));\n\n    yield put(loadGraphSuccess({\n      crimeTable,\n    }));\n  } catch(err) {\n    yield put(loadGraphFailure(err.message));\n  }\n}\n*/\n\nfunction* loadNews({ latlng }) {\n  try {\n    const addressUrl = `${api.mapquest}/reverse?key=${keys.mapquest}&location=${latlng.join(',')}&includeRoadMetadata=true&includeNearestIntersection=true`;\n\n    const {\n      data: {\n        results: address = [],\n      } = {},\n    } = yield request(addressUrl);\n\n    const { locations = [] } = address[0];\n    const { street, adminArea5, postalCode } = locations[0];\n\n    const query = `${adminArea5} AND ${street ? street : postalCode}`;\n    const dates = yield select((state) => state.search.dates);\n\n    const newsUrl = `${api.guardian}?q=${query}&from-date=${dates[0]}-01&api-key=${keys.guardian}`;\n\n    const {\n      data: {\n        response: {\n          results = [],\n        },\n      } = {},\n    } = yield request(newsUrl);\n\n    results.sort((a, b) => a.webPublicationDate.localeCompare(b.webPublicationDate));\n\n    yield put(loadNewsSuccess(results));\n  } catch (err) {\n    console.error(err);\n    yield put(loadNewsFailure(err.message));\n  }\n}\n\nexport default function* saga(): Generator<any, void, any>{\n  yield takeLatest(LOAD_GRAPHS_REQUEST, loadGraph);\n  yield takeLatest(LOAD_NEWS_REQUEST, loadNews);\n}","// @flow\n\nimport { all, fork } from 'redux-saga/effects';\n\nimport searchSaga from './SearchPage/saga';\nimport analyseSaga from './AnalysePage/saga';\n\nexport default function* sagas (): Generator<any, void, any>  {\n  yield all([\n    searchSaga,\n    analyseSaga\n  ].map(fork));\n}","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport './index.css';\n\nimport App from './containers/App';\n\nimport reducers from './containers/reducers';\nimport sagas from './containers/sagas';\n\nimport * as serviceWorker from './serviceWorker';\n\nconst saga = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(saga)),\n);\n\nsaga.run(sagas);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}