{"version":3,"sources":["containers/SearchPage/actions.js","components/modal.js","components/table.js","containers/SearchPage/page.js","containers/MapPage/actions.js","containers/AnalysePage/actions.js","containers/MapPage/page.js","containers/AnalysePage/graphs.js","containers/AnalysePage/page.js","containers/App.js","containers/SearchPage/reducer.js","containers/MapPage/reducer.js","containers/AnalysePage/reducer.js","containers/reducers.js","utils.js","containers/SearchPage/saga.js","containers/AnalysePage/saga.js","containers/sagas.js","serviceWorker.js","index.js"],"names":["LOAD_AVAILABILITY_SUCCESS","LOAD_AVAILABILITY_FAILURE","LOAD_CRIME_CATEGORY_REQUEST","LOAD_CRIME_CATEGORY_SUCCESS","LOAD_CRIME_CATEGORY_FAILURE","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAILURE","searchSuccess","data","type","searchFailure","message","ModalDiv","styled","div","_templateObject","Modal","_ref","title","show","onClose","children","react_default","a","createElement","className","concat","onClick","table_templateObject","SearchContainer","page_templateObject","Search","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","changeDate","evt","value","target","minmax","toConsumableArray","state","sort","b","date","objectSpread","defineProperty","setState","changeCategory","crimeCategory","search","preventDefault","_this$state","dates","filter","ele","props","onSearch","url","toggleModal","showError","prevProps","prevAvailability","availability","prevMessage","_this$props","reduce","acc","min","max","_this$state2","_this$state2$date","_this$state2$date$dat","_this$props$crimeCate","name","htmlFor","id","onChange","map","key","modal","React","PureComponent","connect","dispatch","onLoadCrimeCategory","param","params","SAVE_LOCATION","SAVE_STREET_ID","EXTRACT_DATA_SUCCESS","EXTRACT_DATA_FAILURE","categoryColors","all-crime","anti-social-behaviour","bicycle-theft","burglary","criminal-damage-arson","drugs","other-theft","possession-of-weapons","public-order","robbery","shoplifting","theft-from-the-person","vehicle-crime","violent-crime","other-crime","LeafletMap","handleClick","latlng","onSaveLocation","clickCircle","onSaveStreetId","_this2","locations","Map","center","ref","val","zoom","TileLayer","attribution","Marker","position","lat","lng","Popup","category","street","count","Circle","fillColor","fillOpacity","stroke","radius","saveStreetId","Graphs","outcome","console","log","width","window","innerWidth","LineChart","height","XAxis","dataKey","YAxis","yAxisId","Tooltip","CartesianGrid","Line","BarChart","Bar","fill","AnalyseContainer","AnalysePage_page_templateObject","AnalysePage","dateGraph","categoryGraph","outcomeGraph","graphs","analyse","AppDiv","App_templateObject","App","page","MapPage_page","AnalysePage_page","Component","initialState","streetId","combineReducers","arguments","length","undefined","action","values","_ele$location","location","latitude","longitude","_ele$location$street","parseFloat","crimes","api","police","guardian","checkStatus","_callee","response","error","body","regenerator_default","wrap","_context","prev","next","status","abrupt","Error","json","sent","statusText","t0","stop","parseJSON","request","path","options","axios","get","then","loadAvailability","loadCrimeCategory","saga","put","_marked","_date","_args2","_context2","Date","toLocaleDateString","_marked2","_ref2","_ref3","responses","_context3","select","all","_marked3","_context4","fork","takeLatest","_marked4","extractData","selectedCrimes","crimeTable","_ref2$location","_ref2$location$street","month","outcome_status","_ref3$outcomes","outcomes","list","entries","_ref4","_ref5","slicedToArray","_ref6","_ref7","_ele$outcomes","_ref8","_ref9","saga_marked","saga_marked2","sagas","searchSaga","analyseSaga","sagas_marked","Boolean","hostname","match","createSagaMiddleware","store","createStore","reducers","composeWithDevTools","applyMiddleware","run","ReactDOM","render","es","containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.23df1931.chunk.js","sourcesContent":["export const LOAD_AVAILABILITY_SUCCESS = 'containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS';\nexport const LOAD_AVAILABILITY_FAILURE = 'containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE';\n\nexport const LOAD_CRIME_CATEGORY_REQUEST = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST';\nexport const LOAD_CRIME_CATEGORY_SUCCESS = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS';\nexport const LOAD_CRIME_CATEGORY_FAILURE = 'containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE';\n\nexport const SEARCH_REQUEST = 'containers/SearchPage/actions/SEARCH_REQUEST';\nexport const SEARCH_SUCCESS = 'containers/SearchPage/actions/SEARCH_SUCCESS';\nexport const SEARCH_FAILURE = 'containers/SearchPage/actions/SEARCH_FAILURE';\n\nexport function loadAvailabilitySuccess (data) {\n  return {\n    type: LOAD_AVAILABILITY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadAvailabilityFailure (message) {\n  return {\n    type: LOAD_AVAILABILITY_FAILURE,\n    message,\n  }\n}\n\nexport function loadCrimeCategoryRequest (date) {\n  return {\n    type: LOAD_CRIME_CATEGORY_REQUEST,\n    date,\n  }\n}\n\nexport function loadCrimeCategorySuccess (data) {\n  return {\n    type: LOAD_CRIME_CATEGORY_SUCCESS,\n    data,\n  }\n}\n\nexport function loadCrimeCategoryFailure (message) {\n  return {\n    type: LOAD_CRIME_CATEGORY_FAILURE,\n    message,\n  }\n}\n\nexport function searchRequest (params) {\n  return {\n    type: SEARCH_REQUEST,\n    params,\n  }\n}\n\nexport function searchSuccess (data) {\n  return {\n    type: SEARCH_SUCCESS,\n    data,\n  }\n}\n\nexport function searchFailure (message) {\n  return {\n    type: SEARCH_FAILURE,\n    message,\n  }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst ModalDiv = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n\n  .modal-title {\n    height: 3rem;\n    background-color: black;\n    color: white;\n    vertical-align: middle;\n    line-height: 3rem;\n    text-align: center;\n  }\n\n  .modal-main {\n    position: fixed;\n    background: white;\n    width: 100%;\n    height: calc(100% - 6rem);\n    overflow: auto;\n    top: 3rem;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  .modal-footer {\n    position: fixed;\n    top: calc(100% - 3rem);\n    height: 3rem;\n    background-color: white;\n    width: 100%;\n    line-height: 3rem;\n    vertical-align: middle;\n    text-align: center;\n    border-top: 1px solid black;\n    box-sizing: border-box;\n\n    .close {\n      background-color: black;\n      color: white;\n      font-weight: bolder;\n      padding: 0.5rem 1rem;\n    }\n  }\n`;\n\nconst Modal = ({ title, show, onClose, children }) => (\n  <ModalDiv className={`display-${show ? 'block' : 'none'}`}>\n    <div className=\"modal-title\">{ title }</div>\n    <div className=\"modal-main\">\n      { children }\n    </div>\n    <div className=\"modal-footer\">\n      <button className=\"close\" onClick={onClose}>Close</button>\n    </div>\n  </ModalDiv>\n);\n\nModal.propTypes = {\n  title: PropTypes.string,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  children: PropTypes.any,\n};\n\nexport default Modal;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst TableDiv = styled.div`\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n\n  .tr {\n    display: table-row;\n  }\n\n  .th {\n    display: table-cell;\n    font-weight: 600;\n  }\n\n  .td {\n    display: table-cell;\n  }\n`;\n\nconst Table = ({ children }) => (<TableDiv>{ children }</TableDiv>);\nTable.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Tr = ({ children }) => (<div className=\"tr\">{ children }</div>);\nTr.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Th = ({ children }) => (<div className=\"th\">{ children }</div>);\nTh.propTypes = {\n  children: PropTypes.any,\n};\n\nconst Td = ({ children }) => (<div className=\"td\">{ children }</div>);\nTd.propTypes = {\n  children: PropTypes.any,\n};\n\nexport {\n  Table,\n  Tr, Th, Td,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { connect } from 'react-redux';\n\nimport {\n  loadCrimeCategoryRequest,\n  searchRequest,\n} from './actions';\n\nimport {\n  Modal,\n} from '../../components';\n\nconst SearchContainer = styled.div`\n    order: 1;\n    margin: 0.5rem;\n    padding: 0.5rem;\n\n    .grid-container {\n      display: grid;\n      grid-template-rows: 2rem 2rem 2rem;\n      grid-template-columns: 4.5rem auto;\n\n      .grid-item {\n        padding: 0.5rem;\n        \n        &.submit {\n          grid-column-start: 1;\n          grid-column-end: 3;\n        }\n      }\n    }\n\n    label {\n      font-size: smaller;\n      text-transform: capitalize;\n    }\n\n    button {\n      background-color: black;\n      color: white;\n      padding: 0.3rem 1rem;\n      font-weight: bolder;\n    }\n`;\n\nclass Search extends React.PureComponent {\n  static propTypes = {\n    availability: PropTypes.array,\n    crimeCategory: PropTypes.array,\n    crimes: PropTypes.array,\n    onLoadCrimeCategory: PropTypes.func,\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      date: {},\n      minmax: [],\n      message: null,\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      availability: prevAvailability,\n      message: prevMessage,\n    } = prevProps;\n\n    const {\n      availability,\n      message,\n    } = this.props;\n\n    if (prevAvailability !== availability) {\n      const date = availability.reduce((acc, ele) => {\n        return {\n          min: (acc.min && acc.min < ele.date) ? acc.min : ele.date,\n          max: (acc.max && acc.max > ele.date) ? acc.max : ele.date,\n          dates: acc.dates ? [...acc.dates, ele.date] : [ele.date],\n        }\n      }, {});\n\n      this.setState({\n        minmax: [date.min, date.max],\n        date,\n      });\n    } else if (prevMessage !== message) {\n      this.setState({\n        message,\n      });\n    }\n  }\n\n  changeDate = (type) => (evt) => {\n    const { value } = evt.target;\n\n    if(value) {\n      const minmax = [...this.state.minmax];\n      minmax[type === 'min' ? 0 : 1] = value;\n      minmax.sort((a, b) => a > b);\n\n      const date = {\n        ...this.state.date,\n        [type]: value,\n      };\n\n      this.setState({\n        minmax,\n        date,\n      });\n    }\n  }\n\n  changeCategory = (evt) => {\n    this.crimeCategory = evt.target.value;\n  }\n\n  search = (evt) => {\n    evt.preventDefault();\n\n    const {\n      minmax,\n      date,\n    } = this.state;\n\n    const dates = date.dates.filter((ele) => minmax[0] <= ele && ele <= minmax[1]).sort((a, b) => a > b);\n\n    this.props.onSearch({\n      url: this.crimeCategory || 'all-crimes',\n      dates,\n    });\n  }\n\n  toggleModal = () => this.setState({ showError: !this.state.showError })\n\n  render() {\n    const {\n      date: {\n        min,\n        max,\n        dates = [],\n      } = {},\n      message,\n      showError,\n    } = this.state;\n\n    const {\n      crimeCategory = [{\n        url: 'all-crimes',\n        name: 'all crimes'\n      }],\n    } = this.props;\n\n    return (\n      <SearchContainer>\n        <form className=\"grid-container\">\n          <label htmlFor=\"select_date\" className=\"grid-item\">date</label>\n          <div className=\"grid-item\">\n            <select id=\"select_date\" onChange={this.changeDate('min')} value={min}>\n            {\n              dates.map((ele) => <option value={ele} key={ele}>{ele}</option>)\n            }\n            </select>\n            <span> ~ </span>\n            <select onChange={this.changeDate('max')} value={max}>\n            {\n              dates.map((ele) => <option value={ele} key={ele}>{ele}</option>)\n            }\n            </select>\n          </div>\n          <label htmlFor=\"select_category\" className=\"grid-item\">category</label>\n          <select id=\"select_category\" onChange={this.changeCategory} className=\"grid-item\">\n          {\n            crimeCategory && crimeCategory.map(({ url, name }) =>\n              <option\n                key={url}\n                value={url}\n              >\n                {name}\n              </option>\n            )\n          }\n          </select>\n          <button onClick={this.search} className=\"grid-item submit\">SEARCH</button>\n        </form>\n        <Modal\n          show={showError}\n          onClose={this.toggleModal}\n        >\n          {message}\n        </Modal>\n      </SearchContainer>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.search,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onLoadCrimeCategory: () => dispatch(loadCrimeCategoryRequest()),\n    onSearch: (param) => dispatch(searchRequest(param)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);","export const SAVE_LOCATION = 'containers/MapPage/actions/SAVE_LOCATION';\n\nexport function saveLocation (data) {\n  return {\n    type: SAVE_LOCATION,\n    data,\n  }\n}","export const SAVE_STREET_ID = 'containers/AnalysePage/SAVE_STREET_ID';\n\nexport const EXTRACT_DATA_SUCCESS = 'containers/AnalysePage/EXTRACT_DATA_SUCCESS';\nexport const EXTRACT_DATA_FAILURE = 'containers/AnalysePage/EXTRACT_DATA_FAILURE';\n\nexport function saveStreetId(id) {\n  return {\n    type: SAVE_STREET_ID,\n    id,\n  }\n}\n\nexport function extractDataSuccess(data) {\n  return {\n    type: EXTRACT_DATA_SUCCESS,\n    data,\n  }\n}\n\nexport function extractDataFailure(message) {\n  return {\n    type: EXTRACT_DATA_FAILURE,\n    message,\n  }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport {\n  Map, TileLayer,\n  Marker, Popup,\n  Circle,\n} from 'react-leaflet';\n\nimport {\n  saveLocation,\n} from './actions';\n\nimport {\n  saveStreetId,\n} from '../AnalysePage/actions';\n\nconst attribution = \"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\";\nconst url = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\nconst categoryColors = {\n  \"all-crime\": \"#d17f68\",\n  \"anti-social-behaviour\": \"#73b638\",\n  \"bicycle-theft\": \"#a45dcf\",\n  \"burglary\": \"#5fbc6e\",\n  \"criminal-damage-arson\": \"#c0489a\",\n  \"drugs\": \"#4b7d3c\",\n  \"other-theft\": \"#666dc6\",\n  \"possession-of-weapons\": \"#d99938\",\n  \"public-order\": \"#5e99d2\",\n  \"robbery\": \"#cc4f32\",\n  \"shoplifting\": \"#49b9a9\",\n  \"theft-from-the-person\": \"#c7496a\",\n  \"vehicle-crime\": \"#adac4d\",\n  \"violent-crime\": \"#c581bb\",\n  \"other-crime\": \"#8b6c2f\",\n};\n// const fillColors = ['palevioletred', 'indianred', 'mediumvioletred', 'darkred', 'orangered', 'red'];\n\nclass LeafletMap extends React.PureComponent {\n  static propTypes = {\n    latlng: PropTypes.shape({\n      lat: PropTypes.number,\n      lng: PropTypes.number,\n    }),\n    locations: PropTypes.array,\n    onSaveLocation: PropTypes.func,\n  }\n\n  handleClick = (evt) => {\n    const { latlng } = evt;\n    this.props.onSaveLocation(latlng);\n  }\n\n  clickCircle = (id) => () => {\n    // evt.preventDefault();\n    this.props.onSaveStreetId(id);\n  }\n\n  render() {\n    const {\n      latlng,\n      locations,\n    } = this.props;\n\n    return (\n      <Map\n        center={latlng}\n        ref={(val) => { this.map = val; }}\n        zoom={13}\n        onClick={this.handleClick}\n      >\n        <TileLayer\n          attribution={attribution}\n          url={url}\n        />\n        { latlng &&\n        <Marker position={[latlng.lat, latlng.lng]}>\n          <Popup>\n            {`You clicked here!!\n            Latitude: ${latlng.lat}\n            Longitude: ${latlng.lng}`}\n          </Popup>\n        </Marker> }\n        {\n          locations && locations.map(({category, latlng, street, count}) => \n          <Circle\n            fillColor={categoryColors[category]}\n            fillOpacity={0.9}\n            stroke={false}\n            radius={count <= 20 ? count * 25 : 500}\n            center={latlng}\n            key={latlng}\n            onClick={this.clickCircle(street.id)}\n          >\n            <Popup>\n            {`Street Id: ${street.id}\n            Street Name: ${street.name}\n            Crime Count: ${count}`}\n            </Popup>\n          </Circle>)\n        }\n      </Map>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.map,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onSaveLocation: (latlng) => dispatch(saveLocation(latlng)),\n    onSaveStreetId: (id) => dispatch(saveStreetId(id)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeafletMap);","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  LineChart, Line,\n  BarChart, Bar,\n  XAxis, YAxis,\n  Tooltip,\n  CartesianGrid,\n} from 'recharts';\n\nconst Graphs = ({ date, category, outcome }) => {\n  console.log('date', date);\n  const width = window.innerWidth - 35;\n\n  return (<div>\n    { date && <p>The number of crimes per Date</p> }\n    { date && <LineChart\n      width={width}\n      height={width}\n      data={date}\n    >\n      <XAxis dataKey=\"date\" />\n      <YAxis type=\"number\" yAxisId={0} />\n      <Tooltip />\n      <CartesianGrid stroke=\"#f5f5f5\" />\n      <Line type=\"monotone\" dataKey=\"count\" stroke=\"#ff7300\" yAxisId={0} />\n    </LineChart> }\n    { category && <p>The number of crimes per Category</p> }\n    { category && <BarChart\n      width={width}\n      height={width}\n      data={category}\n    >\n      <XAxis dataKey=\"category\" />\n      <YAxis type=\"number\" yAxisId={0} />\n      <Tooltip />\n      <CartesianGrid stroke=\"#f5f5f5\" />\n      <Bar type=\"monotone\" dataKey=\"count\" fill=\"#387908\" yAxisId={0} />\n    </BarChart> }\n    { outcome && <p>The ratio of crimes per Outcome</p> }\n    { outcome && <BarChart\n        width={width}\n        height={width}\n        data={outcome}\n      >\n        <XAxis dataKey=\"outcome\" />\n        <YAxis type=\"number\" yAxisId={0} />\n        <Tooltip />\n        <CartesianGrid stroke=\"#f5f5f5\" />\n        <Bar type=\"monotone\" dataKey=\"count\" fill=\"#38abc8\" yAxisId={0} />\n      </BarChart> }\n  </div>);\n}\n\nGraphs.propTypes = {\n  date: PropTypes.array,\n  category: PropTypes.array,\n  outcome: PropTypes.array,\n}\n\nexport default Graphs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport styled from 'styled-components';\n\n// import CrimeTable from './crimeTable';\nimport Graphs from './graphs';\n\nconst AnalyseContainer = styled.div`\n  .tr {\n    line-height: 2rem;\n\n    .th {\n      font-size: smaller;\n    }\n\n    .td {\n      padding: 0 0.5rem;\n    }\n  }\n`;\n\nclass AnalysePage extends React.PureComponent {\n  static propTypes = {\n    streetId: PropTypes.number,\n    dateGraph: PropTypes.array,\n    categoryGraph: PropTypes.array,\n    outcomeGraph: PropTypes.array,\n    crimeTable: PropTypes.array,\n  };\n\n  render(){\n    const {\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n    } = this.props;\n\n    return (<AnalyseContainer>\n      <button>Guardian News</button>\n      <Graphs\n        date={dateGraph}\n        category={categoryGraph}\n        outcome={outcomeGraph}\n      />\n      {/*\n      <CrimeTable\n        crimes={crimeTable}\n      />\n      */}\n    </AnalyseContainer>);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.analyse,\n  }\n}\n\nexport default connect(mapStateToProps)(AnalysePage);","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport Search from './SearchPage/page';\nimport LeafletMap from './MapPage/page';\nimport Analyse from './AnalysePage/page';\n\nconst AppDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  header {\n    order: 0;\n    background: darkslateblue;\n    color: yellow;\n    line-height: 2rem;\n    height: 4rem;\n    vertical-align: middle;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    .title {\n      text-align: center;\n      font-size: larger;\n      font-weight: bolder;\n    }\n\n    .email {\n      text-align: right;\n      padding: 0 1rem;\n      font-size: small;\n    }\n  }\n\n  aside {\n    order: 1;\n  }\n\n  .map {\n    order: 2;\n    height: 32.5rem;\n    z-index: 0;\n\n    .leaflet-container {\n      height: 100%;\n      margin: 0.5rem;\n      border-radius: 1.5rem;\n    }\n  }\n\n  .analyse {\n    order: 3;\n    height: 50rem;\n    padding: 1rem;\n  }\n`;\n\nclass App extends Component {\n  render() {\n    return (\n      <AppDiv>\n        <header>\n          <div className=\"title\">\n            CRIME MAP\n          </div>\n          <div className=\"email\">\n            <span className=\"smaller\">Contact me: melancholy14@hotmail.com</span>\n          </div>\n        </header>\n        <aside>\n          <Search />\n        </aside>\n        <main className=\"map\">\n          <LeafletMap />\n        </main>\n        <main className=\"analyse\">\n          <Analyse />\n        </main>\n      </AppDiv>\n    );\n  }\n}\n\nexport default App;\n","import {\n  LOAD_AVAILABILITY_SUCCESS,\n  LOAD_AVAILABILITY_FAILURE,\n  LOAD_CRIME_CATEGORY_SUCCESS,\n  LOAD_CRIME_CATEGORY_FAILURE,\n  SEARCH_SUCCESS,\n  SEARCH_FAILURE,\n} from './actions';\n\nconst initialState = {\n  availability: [],\n  crimeCategory: [],\n  message: null,\n};\n\nexport default function searchReducer(state = initialState, action) {\n  switch(action.type) {\n    case LOAD_AVAILABILITY_SUCCESS:\n      return {\n        ...state,\n        availability: action.data,\n      };\n    case LOAD_CRIME_CATEGORY_SUCCESS:\n      return {\n        ...state,\n        crimeCategory: action.data,\n      };\n    case SEARCH_SUCCESS:\n      return {\n        ...state,\n        crimes: action.data,\n      };\n    case LOAD_AVAILABILITY_FAILURE:\n    case LOAD_CRIME_CATEGORY_FAILURE:\n    case SEARCH_FAILURE:\n      return {\n        ...state,\n        message: action.message,\n      };\n    default:\n      return state;\n  }\n}","import {\n  SAVE_LOCATION,\n} from './actions';\n\nimport {\n  SEARCH_SUCCESS,\n} from '../SearchPage/actions';\n\nconst initialState = {\n  latlng: {\n    lat: 51.505,\n    lng: -0.09,\n  },\n};\n\nexport default function mapReducer(state = initialState, action){\n  switch(action.type) {\n    case SAVE_LOCATION:\n      return {\n        ...state,\n        latlng: action.data,\n      };\n    case SEARCH_SUCCESS:\n      return {\n        ...state, \n        locations: Object.values(action.data.reduce((acc, ele) => {\n          const {\n            category,\n            location: {\n              latitude,\n              longitude,\n              street = {},\n            } = {},\n          } = ele;\n\n          if (!acc[street.id]) {\n            return {\n              ...acc,\n              [street.id]: {\n                category,\n                street,\n                count: 1,\n                latlng: [parseFloat(latitude), parseFloat(longitude)],\n              },\n            };\n          } else {\n            return {\n              ...acc,\n              [street.id]: {\n                ...acc[street.id],\n                count: acc[street.id].count + 1,\n              },\n            };\n          }\n        }, {})),\n      };\n    default:\n      return state;\n  }\n}","import {\n  SAVE_STREET_ID,\n  EXTRACT_DATA_SUCCESS,\n  EXTRACT_DATA_FAILURE,\n} from './actions';\n\nconst initialState = {\n  streetId: 0,\n};\n\nexport default function analyseReducer(state = initialState, action){\n  switch(action.type){\n    case SAVE_STREET_ID:\n      return {\n        ...state,\n        streetId: action.id,\n      };\n    case EXTRACT_DATA_SUCCESS:\n      return {\n        ...state,\n        ...action.data,\n      };\n    case EXTRACT_DATA_FAILURE:\n      return {\n        ...state,\n        message: action.message,\n      };\n    default:\n      return state;\n  }\n};","import { combineReducers } from 'redux';\n\nimport searchReducer from './SearchPage/reducer';\nimport mapReducer from './MapPage/reducer';\nimport analyseReducer from './AnalysePage/reducer';\n\nexport default combineReducers({\n  map: mapReducer,\n  search: searchReducer,\n  analyse: analyseReducer,\n});","import axios from 'axios';\n\nexport const api = {\n  police: 'https://data.police.uk/api',\n  guardian: 'https://content.guardianapis.com/search',\n};\n\nasync function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error();\n    error.response = response;\n\n    try {\n      const body = await response.json();\n      error.body = body;\n      error.message = body.message || response.statusText;\n\n      throw error;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction parseJSON(response){\n  if(response.status === 204 || response.status === 205){\n    return null;\n  }\n\n  return response;\n}\n\nexport function request(path, options) {\n  return axios.get(path, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}","import { fork, put, takeLatest, select, all } from 'redux-saga/effects';\nimport { api, request } from '../../utils';\n\nimport {\n  LOAD_CRIME_CATEGORY_REQUEST,\n  SEARCH_REQUEST,\n  loadAvailabilitySuccess,\n  loadAvailabilityFailure,\n  loadCrimeCategorySuccess,\n  loadCrimeCategoryFailure,\n  searchSuccess,\n  searchFailure,\n} from './actions';\n\nfunction* loadAvailability() {\n  try {\n    const response = yield request(`${api.police}/crimes-street-dates`);\n\n    yield put(loadAvailabilitySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadAvailabilityFailure(err.message));\n  }\n}\n\nfunction* loadCrimeCategory({ date: _date } = {}) {\n  try {\n    const date = _date || (new Date()).toLocaleDateString();\n\n    const response = yield request(`${api.police}/crime-categories?date=${date}`);\n\n    yield put(loadCrimeCategorySuccess(response.data));\n  } catch(err) { \n    console.log(err);\n    yield put(loadCrimeCategoryFailure(err.message));\n  }\n}\n\nfunction* search({ params }) {\n  try {\n    const {\n      url,\n      dates,\n    } = params;\n\n    const { lat, lng } = yield select((state) => state.map.latlng);\n\n    if (lat && lng && dates && dates.length > 0) {\n      const responses = yield all(dates.map((date) => request(`${api.police}/crimes-street/${url}?lat=${lat}&lng=${lng}&date=${date}`)));\n\n      const data = responses && responses.reduce((acc, response) => {\n        return [...acc, ...(response && response.data)];\n      }, []);\n\n      yield put(searchSuccess(data));\n    } else {\n      yield put(searchFailure('There is no position info! Please, click the map and tell me where you want to know'));\n    }\n  } catch(err) { \n    console.log(err);\n    yield put(searchFailure(err.message));\n  }\n}\n\nexport default function* saga() {\n  yield fork(loadAvailability);\n  yield fork(loadCrimeCategory);\n\n  yield takeLatest(LOAD_CRIME_CATEGORY_REQUEST, loadCrimeCategory);\n  yield takeLatest(SEARCH_REQUEST, search);\n}","import { takeLatest, select, put } from 'redux-saga/effects';\n\nimport {\n  SAVE_STREET_ID,\n  extractDataSuccess,\n  extractDataFailure,\n} from './actions';\n\nfunction* extractData({ id: streetId }){\n  try {\n    const crimes = yield select((state) => state.search.crimes);\n    const selectedCrimes = crimes && crimes.filter(({ location: { street: { id } = {}, } = {}, }) => id === streetId);\n\n    console.log('selectedCrimes', selectedCrimes);\n\n    const crimeTable = selectedCrimes.map(({\n      id,\n      month,\n      category,\n      outcome_status,\n      outcomes: {\n        category: outcome,\n      } = outcome_status || {},\n    }) => ({ id, list: [['month', month], ['category', category], ['outcome', outcome]] }));\n\n    const dateGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.month]: acc[ele.month] >= 0 ? acc[ele.month] + 1 : 0,\n    }), {})).map(([date, count]) => ({ date, count }));\n\n    const categoryGraph = Object.entries(selectedCrimes.reduce((acc, ele) => ({\n      ...acc,\n      [ele.category]: acc[ele.category] >= 0 ? acc[ele.category] + 1 : 0,\n    }), {})).map(([category, count]) => ({ category, count }));\n\n    const outcomeGraph = Object.entries(selectedCrimes.reduce((acc, ele) => {\n      const {\n        outcome_status,\n        outcomes: {\n          category: outcome,\n        } = outcome_status || {},\n      } = ele;\n\n      if (outcome) {\n        return {\n          ...acc,\n          [outcome]: acc[outcome] >= 0 ? acc[outcome] + 1 : 0,\n        };\n      }\n      return acc;\n    }, {})).map(([outcome, count]) => ({ outcome, count }));\n\n    yield put(extractDataSuccess({\n      crimeTable,\n      dateGraph,\n      categoryGraph,\n      outcomeGraph,\n    }));\n  } catch(err) {\n    yield put(extractDataFailure(err.message));\n  }\n}\n\nexport default function* saga(){\n  yield takeLatest(SAVE_STREET_ID, extractData);\n}","import { all, fork } from 'redux-saga/effects';\n\nimport searchSaga from './SearchPage/saga';\nimport analyseSaga from './AnalysePage/saga';\n\nexport default function* sagas () {\n  yield all([\n    searchSaga,\n    analyseSaga\n  ].map(fork));\n}","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport './index.css';\n\nimport App from './containers/App';\n\nimport reducers from './containers/reducers';\nimport sagas from './containers/sagas';\n\nimport * as serviceWorker from './serviceWorker';\n\nconst saga = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(saga)),\n);\n\nsaga.run(sagas);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}